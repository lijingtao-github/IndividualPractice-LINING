<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN" id="sc">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="zh-CN" />
<title>李宁官方网站</title>
<meta name="Keywords" content="" />
<meta name="Description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta property="qc:admins" content="151754653764161673072436375" />
<meta property="wb:webmaster" content="bebfa4568578b1d6" />
<meta http-equiv="cache-control" content="max-age=1800" />
<link rel="shortcut icon" href="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/favicon.ico"/>
<!--解决IE6不支持png图片透明问题-->
<!--[if IE 6]>
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/js/DD_belatedPNG.js?v=1.0"></script>
<script type="text/javascript">
	DD_belatedPNG.fix('*');
</script>
<![endif]-->
<!--/解决IE6不支持png图片透明问题-->
<link type="text/css" href="https://cdns.lining.com/shop/lining/theme/xth2/css/comm_header_ssl.css?v=20190601" rel="stylesheet" />
<link rel="stylesheet" href="https://cdns.lining.com/shop/lining/theme/xth2/css/comm_footer.css?v=20180605" type="text/css" />
<!-- 公共javascript文件 -->
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/comm_js/jquery.js?v=20150722"></script>
	<script type="text/javascript" src="https://cdns.lining.com/framework/layui/layui.all.js?v=2017092702"></script>
	<link type="text/css" href="https://cdns.lining.com/shop/lining/theme/xth2/css/showcartInfo.css?v=2017032428" rel="stylesheet" />
</head>
<body>
<!-- 公共头部 -->
<div id="commHeader" style="height:78px;">&nbsp;</div>
<script>
	//=====加载菜单
	var laytpl = layui.laytpl;
	var bannerData = "";
	var bannerHtml = "";
	//加载导航数据
	$.ajax({ url: "https://store.lining.com/ajax/header_banner.html", type: "get", dataType: "json", async: false, success: function (rets) { if(rets.code == 200){bannerData = rets.data } } })
	//加载导航HTML
	$.ajax({ url: "https://store.lining.com/shop/page/headerBanner.html", type: "get", dataType: "html", async: false, success: function (htmlStr) { bannerHtml = htmlStr } })
	var tplHtml = laytpl(bannerHtml);        	
	commHeader.innerHTML = tplHtml.render(bannerData);
	//=====加载结束
</script>
<div id="container_list">
	<div class="clearfix">
		<div id='shoppingbag'></div>
	</div>
	<div id="container" style="padding-bottom: 20px;">
		<div class="items clearfix" id="cartShow">
			<table cellspacing="0" class="grid">
				<thead>
					<tr>
						<td width="46">
							<span class="checkboxSpan unCheck" name=""></span>
						</td>
						<td width="76" class="textLeft">全选</td>
						<td width="*" class="textLeft" style="padding-left: 56px;">商品信息</td>
						<td width="110">规格</td>
						<td width="110">单价</td>
						<td width="110">数量</td>
						<td width="110">优惠</td>
						<td width="110">小计</td>
						<td width="60">操作</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td colspan="9" id="cartNotice" style="height:210px;">
							<div style="position:relative;">
								<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/load_cart.gif" width="100px">
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<!--去结算-->
<div id="container_calcu" class="hide">
	<div class="c-c-center">
		<div class="c-c-left">
			<span class="checkboxSpan unCheck" name="chkAll_bottom"></span>
			<a class="c-c-allselect" href="javascript:void(0);">全选</a>
			<a class="c-c-delete" href="javascript:void(0);" onclick="custom_cart.chkDel();">批量删除</a>
			<a class="c-c-buy" href="http://store.lining.com">继续购物</a>
		</div>
		<div class="c-c-right">
			<div class="c-r-left">
				<div class="c-line1">
					<span>优惠：</span>
					<span id="totalOffer">-¥0</span>
				</div>
				<div class="c-line2">
					<span>总计：</span>
					<span id="totalSum">¥0.00</span>
				</div>
				<div class="c-line3">(不含运费)</div>
			</div>
			<div class="c-r-right" onclick="giftCart.checkStore();">去结算</div>
		</div>
	</div>
</div>

<script type="text/javascript">
    //定义域名
    JS_G_PAGE_BASEURL = 'http://store.lining.com';
    JS_G_PAGE_BASEURL_SSL = 'https://store.lining.com';
    if (JS_G_PAGE_BASEURL.indexOf('store.lining.com') == -1 && JS_G_PAGE_BASEURL.indexOf('test.e-lining.com') == -1) {
        JS_G_PAGE_BASEURL_SSL = JS_G_PAGE_BASEURL;
    }
</script>

<!--已删除商品-->
<div id="container_del_cart" class="hide"></div>
<script type="text/javascript">
	var global = {
		img_path: "https://cdns.lining.com/shop/lining/theme/xth2/images",
		file_path: "https://cdns.lining.com/shop/lining/theme/xth2",
		href: window.location.host,
		cookie_domain: "store.lining.com",
		isSSL: 1
	};
</script>
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/comm_js/global_sl.js?v=454545444"></script>
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/comm_js/commLoad_ssl.js?v=18071803"></script>
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/comm_js/custActive.js?v=20180631"></script>
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/comm_js/wdz.js?v=20170613001"></script>
<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/comm_js/s_code.js?v=20170613001"></script>
<script>
    //99click部署会员分析
    if (!Utils.isEmpty(get_COOKIE_INFO('WANSONSHOP_IDENTIFIER'))){
        _ozuid = get_COOKIE_INFO('WANSONSHOP_IDENTIFIER');
    }
</script>
<script type="text/javascript" src="https://cdns.lining.com/shop/page/js/PC_code.js"></script>

<!--新加钱换购-->
<div style="width:680px;position:fixed;left:50%;margin-left:-312.5px;overflow:hidden;z-index:1000;display:none;" id="persentBuy">
	<div style="padding-left: 16px;height:36px;line-height:36px;box-sizing:border-box;background:#fff;color:#333;font-size:15px;border-bottom:1px dotted #CCCCCC;">
		<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u525.jpg" width="15px" height="14px">
		<span class="persentBuy-muti" style="color:#333;font-size:15px;">可换购最多0件</span>，已选<span class="persentBuy-alcheck" style="color:#333;font-size:15px;">0</span>件
	</div>
	<div id="persentBuy_main" style="overflow-y:auto;background-color:#FFFFFF;">
		<table cellpadding="0" cellspacing="0">
			<tbody></tbody>
		</table>
	</div>
	<div style="height:46px;line-height:46px;width:100%;border-top:1px solid #CCCCCC;background-color:#FFFFFF;text-align:center;" class="persentBuy-foot">
		<span style="display:inline-block;font-size:13px;color:#FFFFFF;background-color:#EE2737;cursor:pointer;width:71px;height:28px;line-height:28px;" onclick="persentBuy.confirm();">确定</span>
		<span style="display:inline-block;font-size:13px;background-color:#CCCCCC;cursor:pointer;width:71px;height:28px;line-height:28px;color:#fff;margin-left: 38px;" onclick="persentBuy.close();">取消</span>
	</div>
</div>

<!--使用礼品码-->
<div id="giftcode_goods" class="hide">
	<div class="g-close"></div>
	<div class="g-clear"></div>
	<div class="g-goods-content">
		<div class="g-goods-name"></div>
		<div class="g-color-list">
			<div class="g-select-color">选择颜色</div>
			<ul></ul>
			<div class="g-clear"></div>
		</div>
		<div class="g-size-list">
			<div class="g-select-size">选择尺码</div>
			<div class="g-container"></div>
			<div class="g-clear"></div>
		</div>
		<div class="g-confirm">确定</div>
		<div class="g-short hide">暂无库存</div>
	</div>
</div>

<!--日常红包-->
<div id="customer_38_layer" style="position: relative;z-index: 999;display: none;">
	<div class="laymshade" style="background-color: rgba(0,0,0,.35);pointer-events: auto;position: fixed;left:0;top:0;width:100%;height:100%;"></div>
	<div class="layermmain" style="display: table;position: fixed;left:0;top:0;width:100%;height:100%;">
		<div class="section" style="display: table-cell;vertical-align: middle;text-align: center;">
			<div style="position: relative;width: 400px;height: 391px;margin: 0 auto;">
				<img src="" style="width: 400px;height: 391px;" id="showBigCode">
				<img src="https://cdns.lining.com/shop/page/images/redpackets/20hb_pcClose.png" style="width: 22px;height: 22px;position: absolute;right:12px;top:12px;cursor: pointer;" onclick="customer_38_layer_close();">
			</div>
		</div>
	</div>
</div>
<script>
	function customer_38_layer_open() {
        $('#customer_38_layer').css('display','block');
    }
    function customer_38_layer_close() {
		$('#customer_38_layer').css('display','none');
    }
</script>
<!--公共尾部-->
<div id="footer_list" style="min-width:1260px;width:100%;overflow:hidden;margin:45px 0 28px 0;">
	<div class="footer-box" id="footer">
		<div id="footer_content" class="footer_content">

			<div class="footer_content_item">
				<div class="item_image" style="background-position:0 0;"></div>
				<div class="item_content">
					<a class="content_title" href="/shop/help-1.html" target="_blank">获取帮助</a>
					<div class="content_detail">
						<a href="/shop/help-23.html" target="_blank">联系我们</a>
					</div>
				</div>
			</div>
			<div class="footer_content_item">
				<div class="item_image" style="background-position:-47px 0;"></div>
				<div class="item_content">
					<div class="content_title">防伪查询</div>
					<div class="content_detail">
						<a href="/shop/help-31.html" target="_blank">输入查询码</a>
					</div>
				</div>
			</div>
			<div class="footer_content_item">
				<div class="item_image" style="background-position:-94px 0;"></div>
				<div class="item_content">
					<div class="content_title">售后服务</div>
					<div class="content_detail">
						<a href="javascript:void(0);" onclick="serviceShow()" id="service_show">使用说明</a>
					</div>
				</div>
			</div>
                        <div class="footer_content_item">
				<div class="item_image" style="background-position:-141px 0;"></div>
				<div class="item_content">
					<div class="content_title">团购服务</div>
					<div class="content_detail">
						<a href="/shop/display-461-1.html" target="_blank">VIP客户</a>
					</div>
				</div>
			</div>

			<div class="clear_both"></div>
	    </div>
	</div>

	<hr style="width:45%;margin:0 auto;">

	<div id="footerBd">
		<ul class="clearfix" style="margin-top: 28px;margin-left: 26%;">
			<li>
				<a onclick="ClickEvent('BUT_/NAVI_F/INFO_ABOUTLINING');" target="_blank" href="http://www.lining.com/brand/history.html">关于李宁 </a>
			</li>
			<li>
				<a onclick="ClickEvent('BUT_/NAVI_F/INFO_LEGALNOTICES');" target="_blank" href="http://www.lining.com/other/legal.html"> 法律声明 </a>
			</li>
			<li>
				<a onclick="ClickEvent('BUT_/NAVI_F/INFO_INVESTORINFO');" target="_blank" href="http://ir.lining.com">
					投资者关系  Investor Relations
				</a>
			</li>
			<li>
				<a onclick="ClickEvent('BUT_/NAVI_F/INFO_FRANCHISE');" target="_blank" href="http://www.lining.com/other/operate.html"> 特许经营 </a>
			</li>
			<li>
				<a target="_blank" href="https://store.lining.com/shop/display-544-1.html"> 合作伙伴 </a>
			</li>
			<li>
				<a href="javascript:void(0);" id="hotLine" style="border-right: medium none;">客服热线<span class="hideSpan">4006100011</span></a>
			</li>
		</ul>
		<div style="font-size:12px;color:#969492;width:100%;text-align: center;">
			<span style="margin-left:16px;">
				温馨提示：近日有不法分子假冒+4006100011冒充李宁官方客服人员进行电话诈骗，请您提高警惕，注意保护个人账户信息，切勿泄漏他人。如遇类似问题，
				请勿回拨来电号码，直接拨打李宁客服电话400-610-0011询问。
			</span>
		</div>
		<div class="footerRi">
			<p>沪ICP备14035278号-2 <span style="margin-left: 6px;">京公网安备11011202000593</span></p>
		</div>
		<div class="footerRi">
			上海李宁体育用品电子商务有限公司 ©1990-2019
		</div>
	</div>

	<div class="footer_tip" style="margin-top: 54px;">
		<a href="http://www.sgs.gov.cn/lz/licenseLink.do?method=licenceView&entyId=dov73ne26zbqq0ili5i5l2zxnftwwk5ij5">
			<img border="0" src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/icon.gif">
		</a>
		<a href="http://www.cyberpolice.cn/" id="Shanghai110">
			<img border="0" src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/shwj.jpg">
		</a>
		<a href="http://www.zx110.org" id="ZhengxinNet">
			<img border="0" src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/ZhengxinNet.gif">
		</a>
		<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11011202000593">
			<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/ba.png" width="32px"/>
			<div style="font-size: 12px;overflow: hidden;font-family: 微软雅黑;">京公网安备</div>
		</a>
	</div>
</div>
<!-- 交通银行登陆 -->
<div id="bcm_login" class="hide" style="position:fixed;top:60px;z-index:1000;width:100%;left:0;">
	<div style="width:500px;margin:0 auto;padding:18px;position:relative;box-shadow:0 0 10px #555555;background:#fff;left:0;">
		<table style="width:100%;">
			<tr>
				<td style="width:50%;text-align:left;"><h2 style="height:40px;font-size:18px;font-weight:bold;">您尚未登录</h2></td>
				<td style="width:50%;text-align:right;">
					<a href="javascript: void(0);" onclick="bankLoginClose();"><h2 style="height:40px;font-size:18px;font-weight:bold;">关闭</h2></a>
				</td>
			</tr>
		</table>
		<iframe scrolling="no" id="bankCommFr" frameborder="no" style="width:487px;height:407px;border:0;" src=""></iframe>
	</div>
</div> 
<!--内购用户登录提示-->
<div id="purchase_login" class="hide" style="position:fixed;top:170px;z-index:1000;width:100%;left:0;">
	<div style="width:318px;height:122px;margin:0 auto;padding:18px;position:relative;box-shadow:0 0 10px #555555;background:#fff;left:0;border:2px solid #C40000;">
		<div style="color:#C40000;text-align:right;cursor:pointer;" onclick="customer.confirm_purchase(1);">X</div>
		<div>
			<div style="background:url(https://cdns.lining.com/shop/lining/theme/xth2/images/comm/mark.png) no-repeat 0 7px;font-size:15px;padding-left:16px;height:24px;line-height:26px;">
				每位内购会员每季度新品单SKU限购<font style="color:#C40000;font-size:15px;">5件/双。</font>
			</div>
			<div style="background:url(https://cdns.lining.com/shop/lining/theme/xth2/images/comm/mark.png) no-repeat 0 7px;font-size:15px;padding-left:16px;height:24px;line-height:26px;">
				内购商品非质量问题，<font style="color:#C40000;font-size:15px;">只换不退。</font>
			</div>
			<div style="background:url(https://cdns.lining.com/shop/lining/theme/xth2/images/comm/mark.png) no-repeat 0 7px;font-size:15px;padding-left:16px;height:24px;line-height:26px;">
				内购会员不可使用优惠券
			</div>
		</div>
		<div style="margin-top:15px;">
			<input type="checkbox" name="purchaseNotice" id="purchaseNotice" style="vertical-align:middle;">
			下次不再提示
			<input type="button" value="确定" onclick="customer.confirm_purchase(2);" style="margin-left:152px;width:60px;height:24px;background:#C40000;color:white;border:0px;cursor:pointer;">
		</div>
	</div>
</div>

<div id="buttonShow" class="hide" style="left:29%;top: 200px; position: fixed;width: 100%;z-index: 1000;">
	<div style="position: absolute; z-index: 1002; padding-left: 496px; padding-top: 10px;"><a href="javascript:void(0);" onclick="showClose();"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/explain_close.png"></a></div>
	<div style="position: absolute; z-index: 1001;display:none;" class="instructions"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/instructions.jpg"></div>
	<div style="position: absolute; z-index: 1002; padding-top: 195px; padding-left: 69px;"><a href="http://www.lining.com/other/instructions.html" target="_blank" style="margin-right: 10px;"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/official_website.png"></a>
	<a href="/shop/help-16.html" target="_blank"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/headfooter/official_mall.png"></a></div>
</div>

<!--会员登录弹出层-->
<!--会员升级礼包-->
<div id="custUpgrade" style="display:none;">
    <div class="closeUpgrade" onClick="hideGrad();" style="z-index:3"></div>
    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/comm/lazyloading2.gif"/>
    <div class="giftInfo"></div>
    <!--<div class="custMember" onClick="custMember();" style="z-index:3;"><span></span></div>-->
    <div class="gradeGift" onClick="gradeGift();" style="z-index:3"></div>
</div>
<!--生日卡-->
<div id="hideCard" style="display:none;">
    <div class="cardButton" onClick="hideCard();" style="z-index:3"></div>
    <div class="cardGift" onClick="cardGift();" style="z-index:3"></div>
    <div class="cardPacket" onClick="cardPacket();" style="z-index:3"></div>
    <input class="cardRemind" type='checkbox' name='cardRemind' value="1" >
</div>
<!--生日红包-->
<div id="bir_hidebox" style="display:none;">
    <div style="height:40px; right:50px;">
        <img onClick="hidePack();" class="bir_closeButton" src="https://cdns.lining.com/shop/lining/theme/xth2/images/user/close.png">
    </div>
    <!--if 已绑定手机-->
    <div class="linked">
        <div class="titlelink"></div>
        <div style="padding-left:132px;padding-top:10px;font-weight:700;position:relative;">
            <img   src="https://cdns.lining.com/shop/lining/theme/xth2/images/user/linkedgifts.png">
            <div class ="linkgetGift" onClick="linkGet();" ></div>
            <!--领取金额-->
            <div class="linkedMoney"></div>
            <div class="giftInfos">
                请在“我的李宁”-“优惠券”中查看生日红包，<br/>
                <span style="font-weight:bold;">使用有效日期：</span> <span class="endDates">2015年6月30日。</span><br/>
                <span style="font-weight:bold">使用方法：</span><br/>
                <span class="limitMoney">1.订单金额满100元可使用该红包，部分特殊商品除外</span><br/>
                2.在结算页面直接应用优惠券即可抵用等额金额
            </div>
        </div>
    </div>
    <!--else 未绑定手机-->
    <div class="unlink">
        <div style="padding-left:132px;letter-spacing:2px;font-weight:700;font-size:16px;">
            温馨提示：为了您的账户安全，领取红包前请先绑定手机号码。
        </div>
        <div style="padding-left:132px;padding-top:16px;letter-spacing:2px;font-weight:700; font-size:14px;">
            请输入您的手机号：
            <input style="line-height:28px; width:300px;" id="birthsMobile" name="mobile" maxlength="11">
            <span id="births_mobile_error"></span>
            <span id="births_smsSend" class="sendInfo" onclick="Send.smsSend();">免费获取验证码</span>
        </div>
        <div style="padding-left:132px;padding-top:5px;letter-spacing:2px;font-weight:700; font-size:14px;">
            请输入短信验证码：
            <input  id="births_dyzm" name="dyzm"  maxlength="8" style="line-height:28px; width:200px;">
            <span id="births_dyzm_error"></span>
        </div>
        <div style="padding-left:132px;padding-top:10px;font-weight:700;position:relative; z-index:8;">
            <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/user/gifts.png">
            <div class ="getGift" onClick="unlinkGet();" ></div>
            <!--领取金额-->
            <div class="unlinkMoney"></div>
            <div class="giftInfo">
                请在“我的李宁”-“优惠券”中查看生日红包，<br/>
                <span style="font-weight:bold;">使用有效日期：</span><span class="endDate">2015年6月30日。</span><br/>
                <span style="font-weight:bold">使用方法：</span><br/>
                <span class="limit">1.订单金额满100元可使用该红包，部分特殊商品除外</span><br/>
                2.在结算页面直接应用优惠券即可抵用等额金额
            </div>
        </div>
    </div>
    <!--已领取红包-->
    <div class="get">
        <div class="getmoney"></div>
        <div style="padding-left:182px; padding-top:25px;font-weight:700;position:relative;">
            <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/user/get.png">
        </div>
        <div class ="getMoneyImg"></div>
        <div style="bottom: 58px; height: 54px; left: 219px; position: absolute;">
            <span style="margin-right:5px; cursor: pointer;"><img onclick="openPacket()" id="look"></span>
            <span style="cursor: pointer;"><img onclick="returnIndex()" id="return"></span>
        </div>
        <div class="getInfo"></div>
    </div>
    <!--异常加载-->
    <div class="unget">
        <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/user/errorreturn.png">
        抱歉，系统繁忙，请稍后再试！
        <div class="reunget" onclick="hidePack()"><a  style="font-size: 14px; font-weight: bold;">返回</a></div>
    </div>
</div>
<!--/生日红包-->

<!--旧订单换礼品-->
<div id="hideCont" style="display:none;">
    <div class="closeGift" onClick="closeButn();"></div>
    <div class="billGift" onclick="billGift()"></div>
    <input class="noRemind" type='checkbox' name='noRemind' value="1">
</div>
<!--遮罩层加载-->
<div id="hidebg"></div>
<!--指定vip用户-->
<div id="showVipNotice" style="width: 410px;height: 280px;position: fixed;top: 50%;left: 50%;-webkit-transform: translate(-50%, -50%);transform: translate(-50%, -50%);background: #fff;z-index: 888;display: none;">
    <div class="svn-t1" style="text-align: center;font-size: 16px;margin-top: 70px;"></div>
    <div class="svn-t2" style="text-align: center;font-size: 16px;margin-top: 20px;">红包请至<a href="https://store.lining.com/shop/memberCenter.html?operFlg=18" style="font-size: 16px;color: blue;text-decoration:underline;"> 我的李宁-我的红包 </a>查看</div>
    <div class="svn-t3" style="text-align: center;font-size: 16px;margin-top: 20px;">余额请至<a href="https://store.lining.com/shop/memberCenter.html?operFlg=7" style="font-size: 16px;color: blue;text-decoration:underline;"> 我的李宁-我的余额 </a>查看</div>
    <div style="position: absolute;top: 5px;right: 10px;font-size: 22px;cursor: pointer;" onclick="svn_close();">X</div>
</div>
<script>
    function svn_close(){
        $('#showVipNotice').css('display','none');
        location.href='https://store.lining.com';
    }
</script>

<!--公共登陆注册层-->
	<!--公共登陆注册层-->
<div id="login_main" class="comm_pop hide" style="top:48px;">
    <div class="eb_div" style="width:700px;">
        <div class="eb_opencont" style="height:100%;">
            <div id="cust_main" style="border:0px solid #FF3318;">
                <h3 id="h3_open_reglogin">
                    <span class="span_open_login now" onclick="customer.switchover(this, 1);">账户登录</span>
                    <span class="span_open_phone" onclick="customer.switchover(this, 2);">手机登录</span>
                </h3>
                <span class="eb_close" title="关闭" onclick="customer.close_login();">关闭</span>

                <div id="span_open_login" style="border:0px solid #F6EA9C">
                    <div class="blank8"></div>
                    <div id="login_daliy_error" class="notice_error"></div>
                    <p class="p_item">
                        <input type="text" maxlength="60" name="userName" id="login_userName" placeholder="用户名/手机号" autocomplete="off" class="txt" />
                    </p>
                    <p class="p_item">
                        <input type="password" maxlength="30" name="pwd" id="login_pwd" placeholder="密码" autocomplete="off" class="txt" />
                    </p>
                    <p class="p_item">
                        <input type="text" maxlength="4"  name="yzm" id="login_yzm" placeholder="验证码" autocomplete="off" class="txt" />
                        <img onclick="get_yzm_comm(this);" src="https://cdns.lining.com/postsystem/docroot/images/yzmImages/88623c1e858009d8da93691fe5b342f2.jpg" id="yzm_img_pop" title="看不清楚，点击获得新图片" style="position:relative;cursor:pointer;height:41px;width:115px;float:left;;margin:-42px 0 0 364px;" />
                        <input type="hidden" name="mobile" id="mobile" value="">
                    </p>
                    <div class="p_item" style="margin: 2px auto;display:block;width:368px;height:20px;">
                        <a class="c_g"  href="/shop/page/passwordFind.html" style="float:left;">忘记密码？</a>
                        <a class="c_g"  href="javascript:void(0)" onclick="customer.open_register()" style="float:right;">注册新用户</a>
                    </div>
                    <p class="p_item">
                        <button class="eb_btn"  type="button" onclick="customer.login(2);">登 录</button>
                    </p>
                </div>

                <div id="span_open_phone" class="hide">
                    <div class="blank8"></div>
                    <div id="login_phone_error" class="notice_error"></div>
                    <p class="p_item">
                        <input type="text" maxlength="11" id="login_reg_mobile" name="reg_mobile" autocomplete="off" class="txt" placeholder="手机号码" />
                    </p>
                    <p class="p_item">
                        <input type="text" maxlength="4" name="yzm_image" id="login_yzm_image" autocomplete="off" class="txt" placeholder="验证码" />
                        <img onclick="get_yzm_comm(this);" src="https://cdns.lining.com/postsystem/docroot/images/yzmImages/88623c1e858009d8da93691fe5b342f2.jpg" id="yzm_pic" title="看不清楚，点击获得新图片" style="position:relative;cursor:pointer;height:41px;width:115px;float:left;;margin:-42px 0 0 364px;" />
                    </p>
                    <p class="p_item">
                        <input type="text" maxlength="6" name="dxyzm"  id="login_dxyzm" autocomplete="off" class="txt" placeholder="动态密码" />
                        <span id="reg_smsSend" onclick="sms.sendSms(2);">获取动态密码</span>
                    </p>
                    <div class="p_item" style="margin: 2px auto;display:block;width:368px;height:20px;">
                        <a class="c_g" href="javascript:void(0)" onclick="customer.open_register()" style="float:right;">注册新用户</a>
                    </div>
                    <p class="p_item">
                        <button class="eb_btn" type="button" onclick="customer.moblogin(2);">登 录</button>
                    </p>
                </div>

                <div class="h4_otherlogin">其他账户登录</div>
                <div class="union_login">
                    <a href="https://store.lining.com/shop/redirect.php?plat=qq&source=pc" class="union_qq"></a>
                    <a href="https://store.lining.com/shop/redirect.php?plat=alipay&source=pc" class="union_alipay"></a>
                    <a href="https://store.lining.com/shop/redirect.php?plat=weixin&source=pc" class="union_weixin"></a>
                </div>
            </div>
            <div class="blank0"></div>
        </div>
    </div>
</div>
<div id="add_cart_success" class="comm_pop hide">
    <table>
        <thead>
        <tr>
            <th class="white" id="cp_title" style="width: 30%;"></th>
            <th class="tar"><a id="CloseLogin" href="javascript:void(0);" onclick="$('#add_cart_success').hide();">X</a></th>
        </tr>
        </thead>
        <tbody id="success_html">
        </tbody>
    </table>
</div>
<script>
    $(function(){
        //IE浏览器的输入框提示，不是IE浏览器则隐藏
        var platform=navigator.platform;
        var o=navigator.appName;
        if (o.toString().indexOf("Internet") == -1) {
            //$('.oldPwdTip').css('display', 'none');
        }
    });

    //联合登录参数
    var urlStr = window.location.href
    var searchURL = window.location.search;
    var targetUrl = "";
    if(searchURL != ""){
        var urlArr = urlStr.split(searchURL);
        targetUrl = urlArr[0];
    }

    if(targetUrl == ""){
        targetUrl = urlStr;
    }

    //联合跳转地址
    if(targetUrl != ""){
        $(".union_qq").attr("href" , "https://store.lining.com/shop/redirect.php?plat=qq&redirect_url="+targetUrl);
        $(".union_alipay").attr("href" , "https://store.lining.com/shop/redirect.php?plat=alipay&redirect_url="+targetUrl);
        $(".union_weixin").attr("href" , "https://store.lining.com/shop/redirect.php?plat=weixin&redirect_url="+targetUrl);
    }

    function hideOldPwdTip(v) {
        if (!v.value) {
            $(v).prev('.oldPwdTip').css('display', 'block');
        } else {
            $(v).prev('.oldPwdTip').css('display', 'none');
        }
    }
    function toggleOldPwdTip(v) {
        if (!v.value) {
            var o=navigator.appName ;
            $(v).prev('.oldPwdTip').css('display', 'block');
        }
    }
    $('.oldPwdTip').on('click',function(){
        $(this).next('input').focus();
    });
    function get_yzm_comm(obj){
        $.ajax({
            type: 'POST',
            url: JS_G_PAGE_BASEURL_SSL+'/shop/yzm.html',
            dataType: 'JSON',
            data:{"sslFlg": 1},
            success: function( o ) {
                if (o.code == 200) {
                    $(obj).attr("src" , o.message);
                }
            }
        });
    }

    //生日日期变化 start
    function birth_day_reg_change(day){
        var str = "<select name='birthDay_reg' id='birthDay_reg'><option value=''>请选择</option>";
        for(var i=1;i<=day;i++){
            if(i<=9){
                var day_str='0'+i;
            }else{
                var day_str=i;
            }
            str += "<option value='"+day_str+"'>"+day_str+"</option>";
        }
        str+='</select>';
        $("#birthday_reg_span").html(str);
    }

    function month_reg_change(){
        $("#birthMonth_reg").val("");
        $("#birthDay_reg").val("");
    }

    function day_reg_change(){
        $("#birthDay_reg").val("");
        var nowMonth = $("#birthMonth_reg").val();
        if (nowMonth == 2) {
            var nowYear = $("#birthyear_reg").val();
            if ((nowYear % 4) == 0) {
                birth_day_reg_change(29);
            } else {
                birth_day_reg_change(28);
            }
        } else if (nowMonth == 4 || nowMonth == 6 || nowMonth == 9 || nowMonth == 11) {
            birth_day_reg_change(30);
        } else {
            birth_day_reg_change(31);
        }
    }
    //生日日期变化 end

    //阅读官网服务协议
    $('[name=layer_read_rule]').on('click', function(){
        if ($(this).attr('checked') == 'checked') {
            $('.reg_btn').css({'backgroundColor': '#F15135', 'cursor': 'pointer'}).attr('onclick', 'customer.verify_register(2,2);');
        } else {
            $('.reg_btn').css({'backgroundColor': '#dddddd', 'cursor': 'auto'}).attr('onclick', '');
        }
    });

    //检查用户名
    function result_email_error (result_code) {

        $("#reg_userName_error").css({'lineHeight': '17px'});

        if (result_code == 1) {

            $("#reg_userName_error").html('该用户名已被使用，请重新输入。<br/>如果您是该用户，请立即&nbsp;<a href="/shop/login_ssl.php" style="color:#EE2737;font-size:12px;text-decoration:underline;">登录</a>');
            $('#reg_userName_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');
            customer.userNameExist = true;

        } else if (result_code == 2) {

            $("#reg_userName_error").html("");
            $('#reg_userName_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_correct.png" width="15px" height="15px">')
                .css('display', 'inline-block');
        } else if (result_code == 3) {

            $("#reg_userName_error").html('4-40位字符，支持汉字、字母、数字及“－”、“_”、“.”、“@”组合');
            $('#reg_userName_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');
        } else {

            $("#reg_userName_error").html("参数错误，请联系网站客服");
            $("#reg_userName_error").css({'lineHeight': '35px'});
            $('#reg_userName_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');
        }
    }

    var userNameValue = "";
    var reg_mobile_flg = 0;

    //检查用户名，得到焦点
    $("#reg_userName").focus(function() {
        var userName = Utils.trim($(this).val());
        if (userName == '' || userName == null || userName == undefined) {
            $("#reg_userName_error").css({'lineHeight': '17px'});
            $("#reg_userName_error").html('4-40位字符，支持汉字、字母、数字及“－”、“_”、“.”、“@”组合');
            $('#reg_userName_error').next('.reg-newUser-notice').html('').css('display', 'none');
        }
    });
    //检查用户名，失去焦点
    $("#reg_userName").blur(function() {

        $("#reg_userName_error").css({'lineHeight': '17px'});

        var userName = Utils.trim($(this).val());

        if (Utils.isEmpty(userName)) {
            userNameValue = '';
            customer.userNameExist = false;
            $("#reg_userName_error").html('4-40位字符，支持汉字、字母、数字及“－”、“_”、“.”、“@”组合');
            $('#reg_userName_error').next('.reg-newUser-notice').html('').css('display', 'none');

        } else if (!Utils.reg_userName(userName)) {
            userNameValue = '';
            customer.userNameExist = false;
            $("#reg_userName_error").html('4-40位字符，支持汉字、字母、数字及“－”、“_”、“.”、“@”组合');
            $('#reg_userName_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');

        } else if (userName != userNameValue) {

            $("#reg_userName_error").css({'lineHeight': '35px'});
            $("#reg_userName_error").html("检查中...");
            xajax_do_req_user(userName, 1);
            userNameValue = userName;
            customer.userNameExist = false;

        }
    });

    //检查密码
    $("#reg_pwd").focus(function() {
        var pwd = Utils.trim($(this).val());
        if (pwd == '' || pwd == null || pwd == undefined) {
            $("#reg_pwd_error").css({'lineHeight': '17px'});
            $("#reg_pwd_error").text('密码是由6－20位字符组成，建议由字母，数字和符合两种以上组合');
            $('#reg_pwd_error').next('.reg-newUser-notice').html('').css('display', 'none');
        }
    });

    $("#reg_pwd").blur(function() {
        var pwd = Utils.trim($(this).val());
        var reg = /^[A-Za-z0-9]{6,20}$/;

        $("#reg_pwd_error").css({'lineHeight': '17px'});

        if (Utils.isEmpty(pwd)) {
            $("#reg_pwd_error").text('密码是由6－20位字符组成，建议由字母，数字和符合两种以上组合');
            $('#reg_pwd_error').next('.reg-newUser-notice').html('').css('display', 'none');

        } else if (!reg.test(pwd)) {
            $("#reg_pwd_error").text('密码是由6－20位字符组成，建议由字母，数字和符合两种以上组合');
            $('#reg_pwd_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');
        } else {

            $("#reg_pwd_error").html("");
            $('#reg_pwd_error').next('.reg-newUser-notice').html('').css('display', 'none');

            //检查密码强弱
            //1. 弱 小于且等于10个的数字或字母为安全强度为弱级
            //2. 中 大于10小于20个数字为中安全强度为中级、字母＋数字超过6个就为安全强度为中级
            //3. 强 字母＋数字超过10个为安全强度为高级

            var safety_level = 1; //安全级别，默认为弱
            var regex_num = /^[0-9]*$/g;	//全数字
            var regex_match = /^(([a-z]+[0-9]+)|([0-9]+[a-z]+))[a-z0-9]*$/i;

            if (regex_match.test(pwd) && pwd.length > 10) { //强（必须有字母、数字、特殊字符）
                safety_level = 3;
            } else if (regex_match.test(pwd) && pwd.length > 6 && pwd.length <= 10) {	//中
                safety_level = 2;
            } else if (regex_num.test(pwd) && pwd.length > 10) {	//中
                safety_level = 2;
            }

            if (safety_level == 1) {
                $("#reg_pwd_error").text('该密码比较简单，有被盗风险，建议您更改为复杂密码，如字母＋数字组合');
                $('#reg_pwd_error').next('.reg-newUser-notice').html('').css('display', 'none');
            }
        }
    });

    //检查确认密码
    $("#reg_pwd2").blur(function() {
        var pwd = Utils.trim($("#reg_pwd").val());
        var pwd2 = Utils.trim($("#reg_pwd2").val());
        $("#reg_pwd2_error").css({'lineHeight': '17px'});
        if (pwd != pwd2) {
            $("#reg_pwd2_error").addClass("note").text('您两次输入的密码不一致');
            $("#reg_pwd2_error").css({'lineHeight': '35px'});
            $('#reg_pwd2_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');
        } else {
            $("#reg_pwd2_error").html("");
            $('#reg_pwd2_error').next('.reg-newUser-notice').html('').css('display', 'none');
        }
    });

    $("#reg_mobile").focus(function() {
        var mobile = Utils.trim($(this).val());
        if (mobile == '' || mobile == null || mobile == undefined) {
            $("#reg_mobile_error").css({'lineHeight': '17px'});
            $("#reg_mobile_error").text('完成验证后，你可以用该手机号登录或找回密码');
            $('#reg_mobile_error').next('.reg-newUser-notice').html('').css('display', 'none');
        }
    });

    $("#reg_mobile").blur(function() {

        var mobile = Utils.trim($(this).val());
        $("#reg_mobile_error").css({'lineHeight': '17px'});
        if (Utils.isEmpty(mobile)) {
            $("#reg_mobile_error").text('完成验证后，你可以用该手机号登录或找回密码');
            $('#reg_mobile_error').next('.reg-newUser-notice').html('').css('display', 'none');

        } else if (!Utils.isMobile(mobile)) {
            $("#reg_mobile_error").addClass("note").html("请输入正确的手机号码");
            $("#reg_mobile_error").css({'lineHeight': '35px'});
            $('#reg_mobile_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');
        } else {
            //ajax检查手机是否已注册
            $("#reg_mobile_error").addClass("note").html("检查中...");
            $("#reg_mobile_error").css({'lineHeight': '35px'});
            $('#reg_mobile_error').next('.reg-newUser-notice').html('').css('display', 'none');
            xajax_do_req_user(mobile, 13);
        }
    });

    //检查手机是否已绑定
    function result_mobile_error (result_code) {

        //初始化手机绑定标志
        reg_mobile_flg = 0;

        $("#reg_mobile_error").css({'lineHeight': '17px'});

        if (result_code == 1) {	//手机号有误
            $("#reg_mobile_error").html('请输入正确的手机号码');
            $("#reg_mobile_error").css({'lineHeight': '35px'});
            $('#reg_mobile_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');

        } else if (result_code == 2) {	//已绑定

            reg_mobile_flg = 1;	//绑定标志

            $("#reg_mobile_error").html('该手机号已与官网帐号绑定，是否<br/><a href="/shop/login_ssl.php" style="color:#EE2737;font-size:12px;text-decoration:underline;">登录</a>');
            $("#reg_mobile_error").css({'lineHeight': '17px'});
            $('#reg_mobile_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_error.png" width="15px" height="15px">')
                .css('display', 'inline-block');

        } else {	//未绑定(可能存在这个手机号，但未绑定)
            $("#reg_mobile_error").html("");
            $('#reg_mobile_error').next('.reg-newUser-notice')
                .html('<img src="/shop/lining/theme/xth2/images/user/reg_correct.png" width="15px" height="15px">')
                .css('display', 'inline-block');

        }
    }
</script>
<script type="text/javascript">
    if( !('placeholder' in document.createElement('input')) ){

        $('input[placeholder],textarea[placeholder]').each(function(){
            var that = $(this),
                text= that.attr('placeholder');
            if(that.val()===""){
                that.val(text).addClass('placeholder');
            }
            that.focus(function(){
                if(that.val()===text){
                    that.val("").removeClass('placeholder');
                }
            }).blur(function(){
                if(that.val()===""){
                    that.val(text).addClass('placeholder');
                }
            }).closest('form').submit(function(){
                if(that.val() === text){
                    that.val('');
                }
            });
        });
    }
</script>

<!--侧边栏-->
	<div id="sideBar">
    <div id="sideBar_l">
        <!--未登录弹出层-->
        <div id="r_login" class="hide">
            <p>个人信息</p>
            <div class="r-c" onclick="slidebar.login(1);">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/login.png">
            </div>
            <div class="g-c" onclick="redirect_register_page();">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/register.png">
            </div>
            <div></div>
        </div>
        <!--我的李宁-->
        <div class="coupon_message hide" style="top:0px;">
            <a class="close_cha"></a>
            <span class="po_row" style="top:80px;"></span>
            <div style="clear:right;text-align:center"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/member_four.png" ></div>
            <div class="youhui_messasge">恭喜您已升级为<span>四星会员</span>赠送您500积分，可兑换10元优惠券</div>
            <a class="see_quick">立即查看</a>
        </div>
        <!--我的资产-->
        <!--积分-->
        <div class="coupon_message hide">
            <a class="close_cha"></a>
            <span class="po_row"></span>
            <div style="clear:right;text-align:center"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/points_icon.png" ></div>
            <div class="youhui_messasge">您有<span>*****</span>积分到账，可兑换<span>***元优惠券</span></div>
            <a class="see_quick">立即查看</a>
        </div>
        <!--优惠券-->
        <div class="coupon_message hide">
            <a class="close_cha"></a>
            <span class="po_row"></span>
            <div style="clear:right;text-align:center"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/quan.png" ></div>
            <div class="youhui_messasge">尊敬的会员，您的<span>**元优惠券</span>即将到期，请尽快使用。</div>
            <a class="see_quick">立即查看</a>
        </div>
        <!--换礼品-->
        <div class="coupon_message hide">
            <a class="close_cha"></a>
            <span class="po_row"></span>
            <div style="clear:right;text-align:center"><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/gift_box.png" ></div>
            <div class="youhui_messasge">尊敬的会员，您的<span>*积分</span>可兑换相应<span>礼品</span>和<span>优惠券</span></div>
            <a class="see_quick">立即查看</a>
        </div>
        <div id="service_box" class="hide">
            <div class="server-box-img">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/service.png">
            </div>
            <div class="server-box-click">
                <div class="server-pre" onclick="NTKF.im_openInPageChat('kf_9887_1404890803379')">售前咨询</div>
                <div class="server-after" onclick="NTKF.im_openInPageChat('kf_9887_1406170132774')">售后咨询</div>
            </div>
            <div class="layer-clear"></div>
        </div>

        <div id="scan_box" class="hide">
            <div class="scan-box-img">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/scan.png">
            </div>
            <div class="layer-clear"></div>
        </div>

        <div id="user_box" class="hide">
            <div style="margin-top:50px;">
                <div style="float:left;margin-left:11px;">
                    <img class="user-box-img" src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/member_man.png">
                    <div style="text-align:center;margin-top:6px;">
                        <input type="button" value="修改资料" onclick="slidebar.userRepair();" style="cursor:pointer;">
                    </div>
                </div>
                <div style="float:left;height:107px;line-height:107px;width:108px;margin-left:11px;">
                    <div class="user-box-custID"></div>
                    <div class="user-box-rank"></div>
                    <div class="user-box-mobile"></div>
                    <div class="user-box-email"></div>
                </div>
                <div class="layer-clear"></div>
            </div>
            <div class="user-box-member">
                <div style="width:172px;margin:20px auto 0;display:none;" class="rankDiff"></div>
                <div style="margin:10px auto 0 auto;display:none;" class="rankStar">
                    <div style="width:172px;height:10px;margin:0 auto;background:#999999;display:none;">
                        <div class="user-box-progress" style="height:10px;background:#E6181C;"></div>
                    </div>
                    <div style="width:172px;margin:5px auto 0 auto;display:none;">
                        <div style="float:left;width:52px;text-align:center;">三星</div>
                        <div style="float:left;width:52px;text-align:center;">四星</div>
                        <div style="float:left;width:52px;text-align:center;">五星</div>
                        <div class="layer-clear"></div>
                    </div>
                </div>
            </div>
        </div>

        <!--logo-->
        <div id="r_logo">
            <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/logo.png">
        </div>

        <div id="user_box_triangle" class="hide"></div>
        <div class="content">
            <div id="r_show" class="bar" onclick="slidebar.hideBar();"> <!--显示侧边栏-->
                <div style="position:absolute;top:25px;*top:35px;left:12px;width:19px;height:12px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/show_bar_1.png">
                </div>

            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid.png">
            </div>
            <div id="r_lining" class="bar" onmouseover="slidebar.over(1);" onmouseout="slidebar.out(1);" onclick="slidebar.click(1, 0);" style="height:55px;width:42px;cursor:pointer;"> <!--我的李宁-->
                <div  class="bar_img" style="top:25px;*top:35px;left:4px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/my_lining_1.png">
                </div>
                <div class="r_font hide">
                    <p>我的<br>李宁</p>
                </div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid.png">
            </div>
            <div class="bar" id="r_cart" onmouseover="slidebar.over(2);" onmouseout="slidebar.out(2);" onclick="slidebar.click(2, 0);"> <!--购物车-->
                <div class="bar_img" style="top:10px;*top:20px;">
                    <div class="s-icon"></div>
                    <div class="a-icon" id="slide-goods-amount">0</div>
                </div>
                <div class="r_font hide" style="line-height:60px;">购物车</div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid.png">
            </div>
            <div id="r_account" class="bar" onmouseover="slidebar.over(3);" onmouseout="slidebar.out(3);" onclick="slidebar.click(3, 0);" style="height:55px;width:42px;cursor:pointer;"> <!--我的资产-->
                <div  class="bar_img" style="top:20px;*top:32px;left:11px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/account_1.png">
                </div>
                <div class="r_font hide">
                    <p>我的<br>资产</p>
                </div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid_1.png">
            </div>
            <div id="r_collect" class="bar" onmouseover="slidebar.over(4);" onmouseout="slidebar.out(4);" onclick="slidebar.click(4, 0);" style="height:55px;width:42px;cursor:pointer;"> <!--我的收藏-->
                <div  class="bar_img" style="top:20px;*top:32px;left:11px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/collect_1.png">
                </div>
                <div class="r_font hide">
                    <p>我的<br>收藏</p>
                </div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid_1.png">
            </div>
            <div id="r_view" class="bar" onmouseover="slidebar.over(5);" onmouseout="slidebar.out(5);" onclick="slidebar.click(5, 0);" style="height:55px;width:42px;cursor:pointer;"> <!--最近浏览-->
                <div class="bar_img" style="top:22px;*top:35px;left:10px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/view_1.png">
                </div>
                <div class="r_font hide">
                    <p>最近<br>浏览</p>
                </div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid.png">
            </div>
            <div id="r_service" class="bar" onmouseover="slidebar.over(6);" onmouseout="slidebar.out(6);" onclick="CHECK_NTKF_LOGINSTATUS();"  style="height:55px;width:42px;cursor:pointer;"> <!--客服-->
                <div class="bar_img" style="top:17px;*top:27px;left:10px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/service_1.png">
                </div>
                <div class="r_font hide" style="line-height:60px;">客服</div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid.png">
            </div>
            <div id="r_scan" class="bar" onmouseover="slidebar.over(7);" onmouseout="slidebar.out(7);" onclick="slidebar.click(7, 0);"  style="height:55px;width:42px;cursor:pointer;"> <!--二维码扫描-->
                <div  class="bar_img" style="bottom:15px;color:white;left:0;position:absolute;text-align:center;width:42px;">
                    <p><img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/scan_ground_1.png"></p>
                </div>
                <div class="r_font hide">
                    <p style="line-height:15px;">扫码<br>送红包</p>

                </div>
            </div>
            <div class="solid">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/solid.png">
            </div>
            <div id="r_top" class="bar hide" onclick="slidebar.back();" style="height:70px;position:relative;"> <!--回到顶部-->
                <div class="bar_img" style="left:10px;top:10px;*top:20px;">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/top_1.png">
                </div>
                <div class="top" style="color:white;">回到<br/>顶部</div>
            </div>
        </div>
    </div>


    <div id="sideBar_r">
        <div class="user-cart hide">
            <div class="layer-close" onclick="slidebar.cartClose();"></div>
            <div class="layer-clear"></div>
            <div class="layer-name">购物车</div>
            <div class="layer-more">
                <div class="layer-more-s">
                    <input type="checkbox" name="check_slide_all" style="vertical-align:middle;">
                    <span style="color:white;vertical-align:middle;">全选</span>
                </div>
                <div class="layer-more-p">
                    <a href="https://store.lining.com/shop/showcartInfo.html" target="_blank" class="cart-more hide">
                        <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/cart_more.png">
                    </a>
                    <a href="javascript:void(0);" class="no-cart-more" style="cursor:not-allowed;">
                        <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/no_cart_more.png">
                    </a>
                </div>
                <div class="layer-clear"></div>
            </div>
            <div style="text-align:center;margin:14px 0 14px 0;">
                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/cart_line.png">
            </div>
            <div class="user-cart-goods">
                <div style="margin:0 10px 0 8px;"></div>
            </div>
            <div class="c-checkout">
                <div class="c-price">
                    <div style="float:left;height:22px;line-height:22px;margin-left:4px;">
                        已选择<span style="color:#e6181c;" id="cart_goods_amount">0</span>件商品
                    </div>
                    <div style="float:right;color:#e6181c;height:22px;line-height:22px;margin-right:4px;" id="total_price">￥0.00</div>
                    <div class="layer-clear"></div>
                </div>
                <div style="margin-top:10px;text-align:center;">
                    <a href="javascript:void(0);" class="can-checkout hide" onclick="slidebar.go_checkout();">
                        <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/checkout.png">
                    </a>
                    <a href="javascript:void(0);" class="no-checkout" style="cursor:not-allowed;">
                        <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/no_checkout.png">
                    </a>
                </div>
            </div>
        </div>
        <div class="user-account hide">
            <div class="layer-close" onclick="slidebar.cartClose();"></div>
            <div class="layer-clear"></div>
            <div class="layer-special">我的资产</div>
            <div class="user-account-content" style="overflow:visible;">
                <ul>
                    <li class="u-points" style="border-right:1px solid #8a8989;">
                        <div class="u-points-pic" style="width:55px">

                            <div style="text-align:center;margin-top:16px">
                                <a class="u-can-points" href="javascript:void(0);" style="text-align:center;font-size:14px;color:#fff;display:inline-block;">0</a>
                            </div>
                            <div style="text-align:center;font-size:12px;color:#b0b0b0;margin-top:7px;">积分</div>
                            <div style="text-align:center;color:#E6181C;font-size:12px;display:none;">
                                <span class="u-expire-points" style="color:#E6181C;font-size:12px;">0</span>积分即将过期
                            </div>
                        </div>
                        <div class="u-points-btn" style="display:none;">
                            <!--<a style="display:inline-block;" href="/shop/pointsMall.html" target="_blank"></a>-->
                            <a style="display:inline-block;" href="javascript:void(0);"></a>
                        </div>
                    </li>
                    <li class="u-coupon" style="border-right:1px solid #8a8989;">
                        <div class="u-points-pic" style="width:61px">
                            <div style="text-align:center;margin-top:16px;">
								<span style="display:inline-block;">
									<a class="u-can-coupoon" style="vertical-align:middle;font-size:14px;color:#fff;display:inline-block;" href="/shop/memberCenter.html?operFlg=5" target="_blank">0</a>
								</span>
                            </div>
                            <div style="text-align:center;font-size:12px;color:#b0b0b0;margin-top:7px;">优惠券</div>
                        </div>
                        <div class="u-points-btn" style="display:none;">
                            <a style="display:inline-block;" href="/shop/memberCenter.html?operFlg=5" target="_blank"></a>
                        </div>
                    </li>
                    <li class="u-balance">
                        <div class="u-points-pic" style="width:65px">
                            <div style="text-align:center;">
                                <a class="u-can-balance" style="display:inline-block;text-align:center;font-size:14px;color:#fff;margin-top:16px;" href="/shop/memberCenter.html?operFlg=7" target="_blank">¥0</a>
                            </div>
                            <div style="text-align:center;font-size:12px;color:#b0b0b0;margin-top:7px;">账户余额</div>
                        </div>
                    </li>

                </ul>
                <div class="layer-clear"></div>

                <div class="points_coupn" style="display: none;">
                    <div class="change_coupon">
                        <a style="color:#fff;" href="/shop/memberClub.html" target="_blank">
                            积分可兑换专属券
                        </a>
                    </div>
                </div>

                <div class="my_coupons" style="overflow-y:auto;margin-top:10px;">
                    <div class="my_title" id="my_title">我的优惠券（0张）</div>
                    <div style="background:#6f6e6e;width:185px;">
                        <div class="coupon_item money_coupon" id="money_coupon" style="display:none;"></div>

                        <div class="coupon_item goods_coupon" id="goods_coupon" style="display:none;"></div>
                        <div class="coupon_item youfei_coupon" id="youfei_coupon" style="display:none;"></div>
                        <div style="padding:10px 0;text-align:center;">
                            <a style="color:#fff;cursor:pointer;" href="/shop/memberCenter.html?operFlg=5" target="_blank">查看更多>></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="user-collect hide">
            <div class="layer-close" onclick="slidebar.cartClose();"></div>
            <div class="layer-clear"></div>
            <div class="layer-name">我的收藏</div>
            <div class="special-all" style="margin-left:62px;">
                <div class="special-goods">
                    <span onclick="slidebar.reduction_goods(4);" style="cursor:pointer;">降价商品</span>
                    <span class="reduction-goods">0</span>
                </div>
                <div class="special-goods hide" style="margin-left:11px;">
                    <span>促销商品</span>
                    <span class="promo-goods">0</span>
                </div>
                <div class="layer-clear"></div>
            </div>
            <div class="user-collect-list">
                <div class="exist-collect hide" style="text-align:center;color:white;font-size:15px;">您还没收藏过商品哦！</div>
                <div class="goods-record record-today hide">
                    <div class="goods-clock">
						<span class="clock-pic">
							<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/clock.png">
						</span>
                        <span class="record-title">今天</span>
                    </div>
                    <div class="collect-record-today record-goods-list">
                        <ul></ul>
                        <div class="layer-clear"></div>
                    </div>
                </div>
                <div class="goods-record record-before hide">
                    <div class="goods-clock">
						<span class="clock-pic">
							<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/clock.png">
						</span>
                        <span class="record-title">之前</span>
                    </div>
                    <div class="collect-record-before record-goods-list">
                        <ul></ul>
                        <div class="layer-clear"></div>
                    </div>
                </div>

                <div class="goods-record record-redugoods hide">
                    <div class="collect-record-redugoods record-goods-list">
                        <ul></ul>
                        <div class="layer-clear"></div>
                    </div>
                </div>
            </div>
            <div class="recore-more hide" style="text-align:center;">
                <a href="https://store.lining.com/shop/member_favorites.php" target="_blank">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/cart_more.png">
                </a>
            </div>
        </div>

        <div class="user-view hide">
            <div class="layer-close" onclick="slidebar.cartClose();"></div>
            <div class="layer-clear"></div>
            <div class="layer-name">最近浏览</div>
            <div class="special-all" style="margin-left:62px;">
                <div class="special-goods">
                    <span onclick="slidebar.reduction_goods(5);" style="cursor:pointer;">降价商品</span>
                    <span class="reduction-goods">0</span>
                </div>
                <div class="special-goods" style="margin-left:11px;display:none;">
                    <span>促销商品</span>
                    <span class="promo-goods">0</span>
                </div>
                <div class="layer-clear"></div>
            </div>
            <div class="user-view-list">
                <div class="exist-view hide" style="text-align:center;color:white;font-size:15px;">您已经很久没来看过我了哦！</div>
                <div class="goods-record record-today hide"  style="margin-bottom:16px;">
                    <div class="goods-clock hide">
						<span class="clock-pic">
							<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/clock.png">
						</span>
                        <span class="record-title">今天</span>
                    </div>
                    <div class="view-record-today record-goods-list">
                        <ul></ul>
                        <div class="layer-clear"></div>
                    </div>
                </div>
                <div class="goods-record record-before hide">
                    <div class="goods-clock">
						<span class="clock-pic">
							<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/clock.png">
						</span>
                        <span class="record-title">一天前</span>
                    </div>
                    <div class="view-record-before record-goods-list">
                        <ul></ul>
                        <div class="layer-clear"></div>
                    </div>
                </div>
                <div class="goods-record record-week hide">
                    <div class="goods-clock">
						<span class="clock-pic">
							<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/clock.png">
						</span>
                        <span class="record-title">一周前</span>
                    </div>
                    <div class="view-record-week record-goods-list">
                        <ul></ul>
                        <div class="layer-clear"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="layer-clear"></div>
</div>

<div id="hideBar" class="hide" onclick="slidebar.showBar();">
    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/hide_bar_3.png">
</div>
<script>
    //跳转到注册页面
    function redirect_register_page() {
        if (common.userBrowser() == "Safari") {
            location.replace('https://store.lining.com/shop/register.html');
        } else {
            self.location = 'https://store.lining.com/shop/register.html';
        }
    }

    $(".user-account .my_coupons").css("height", $(window).height()-$('.comm_logo_contain').height()-$('.wap_header').height()- 220 + "px");
    $(".close_cha").click(function(){
        $(this).parent().hide();
    });

    //初始化时获取侧边栏高度
    var h = $(window).height();
    var c = (h - 600) / 2 + 'px';
    $('#sideBar').height((h-80) + 'px');
    $('#sideBar_l').height((h-80) + 'px');
    $('#sideBar_r').height((h-80) + 'px');
    $('#sideBar_l .content').css('marginTop', c);

    //初始化显示logo
    var show = $('#r_show').position();
    $('#r_logo').css({top:show.top});

    //显示侧边栏按钮
    var htop = (h - 60) / 2 + 'px';
    $('#hideBar').css('marginTop', htop);

    //购物车商品列表高度
    var list_h = (h - 340) + 'px';
    var account_h = (h - 94) + 'px';
    var collect_h = (h - 200) + 'px';
    var view_h = (h - 138) + 'px';
    $('#sideBar_r .user-cart-goods').height(list_h);
    $('#sideBar_r .user-account-content').height(account_h);
    $('#sideBar_r .user-collect-list').height(collect_h);
    $('#sideBar_r .user-view-list').height(view_h);

    //客服弹出层
    var service = $('#r_service').position();
    $('#service_box').css({top:service.top});

    //用户信息弹出层
    var user = $('#r_lining').position();
    $('#user_box').css({top:user.top});
    $('#user_box_triangle').css({top:user.top+24});

    //二维码扫描弹出层
    var scan = $('#r_scan').position();
    //	alert(scan.top);
    $('#scan_box').css({top:scan.top - 60});


    var slidebar = {

        go_checkout: function(){
            comm_box.loadding();
            if (common.userBrowser() == "Safari"){
                location.replace("https://store.lining.com/shop/showcartInfo.html");
            }else{
                self.location = "https://store.lining.com/shop/showcartInfo.html";
            }
        },

        collect_flg: 1,

        //降价商品
        reduction_goods: function(flg){
            if (flg == 4) {	//收藏降价
                var goods_amount = parseInt($('.user-collect .reduction-goods').html());
            } else {	//浏览降价
                var goods_amount = parseInt($('.user-view .reduction-goods').html());
            }

            if (goods_amount == 0) {
                return false;
            }

            slidebar.click(flg, 1);
        },

        login: function(flg){
            var refid = get_COOKIE_INFO("refid");
            if (refid != undefined && refid != null && refid == 'bankcomm') {
                bankLoginOpen();
            } else {
//	            $(".comm_pop .eb_div").css("width", "620px");
                customer.open_login('slidebar.login_call');
            }

            if (flg == 2) {
                customer.switchover(this, 2);
            }
        },

        login_call: function(){
            $('#r_login').addClass('hide');
            slidebar.user_login();
        },

        user_login: function(){
            var custId = get_COOKIE_INFO("WANSONSHOP_IDENTIFIER");
            var refid = get_COOKIE_INFO("refid");
            if (custId == null && refid == null) {
                this.is_login = 0;
            } else {
                this.is_login = 1;
            }
        },

        //回到顶部
        back: function(){
            $(window).scrollTop(0);
        },

        //展示侧边栏
        showBar: function(){
            $('#hideBar').fadeOut('fast');
            $('#sideBar_l').fadeIn('fast');
            set_COOKIE_INFO("ISOPEN_SIDEBAR",0,0); //cookie值为0 购物车侧边栏‘展开’ cookie值为1 购物车侧边栏‘收缩’
        },
        cartClose: function(){
            $('#r_cart').attr('onmouseout','slidebar.out(2);');
            $('#r_cart .r_font').addClass('hide');
            $('#sideBar').animate({right:'-209px'},'fast');
        },

        //隐藏侧边栏
        hideBar: function(){
            $('#hideBar').fadeIn('fast');
            $('#sideBar_l').fadeOut('fast');
            set_COOKIE_INFO("ISOPEN_SIDEBAR",1,0);
        },


        over: function(flg){
            if (flg == 1) {	//我的李宁
                $('#r_lining .r_font').removeClass('hide');
            } else if (flg == 2) {	//购物车
                $('#r_cart .r_font').removeClass('hide');
            } else if (flg == 3) {	//我的资产
                $('#r_account .r_font').removeClass('hide');
            } else if (flg == 4) { //我的收藏
                $('#r_collect .r_font').removeClass('hide');
            } else if (flg == 5) { //最近浏览
                $('#r_view .r_font').removeClass('hide');
            } else if (flg == 6) { //客服
                $('#r_service .r_font').removeClass('hide');
            } else if (flg == 7) { //二维码扫描
                $('#r_scan .r_font').removeClass('hide');

                //鼠标经过时出现二维码
                /*
                slidebar.select = flg;

                $('#r_login').css({top:'0px'}).addClass('hide');

                $('#r_lining').attr('onmouseout','slidebar.out(1);');
                $('#r_lining .r_font').addClass('hide');
                $('#user_box').addClass('hide');
                $('#user_box_triangle').addClass('hide');

                $('#r_cart').attr('onmouseout','slidebar.out(2);');
                $('#sideBar').animate({right:'-209px'},'fast');
                $('#r_cart .r_font').addClass('hide');

                $('#r_account').attr('onmouseout','slidebar.out(3);');
                $('#r_account .r_font').addClass('hide');

                $('#r_collect').attr('onmouseout','slidebar.out(4);');
                $('#r_collect .r_font').addClass('hide');

                $('#r_view').attr('onmouseout','slidebar.out(5);');
                $('#r_view .r_font').addClass('hide');

                $('#r_service').attr('onmouseout','slidebar.out(6);');
                $('#r_service .r_font').addClass('hide');
                $('#service_box').addClass('hide');

                $('#r_scan').attr('onmouseout','');
                $('#scan_box').removeClass('hide');
                */
            }
        },

        out: function(flg){
            if (flg == 1) { //我的李宁
                $('#r_lining .r_font').addClass('hide');
            } else if (flg == 2) { //购物车
                $('#r_cart .r_font').addClass('hide');
            } else if (flg == 3) { //我的资产
                $('#r_account .r_font').addClass('hide');
            } else if (flg == 4) { //我的收藏
                $('#r_collect .r_font').addClass('hide');
            } else if (flg == 5) { //最近浏览
                $('#r_view .r_font').addClass('hide');
            } else if (flg == 6) { //客服
                $('#r_service .r_font').addClass('hide');
            } else if (flg == 7) { //二维码扫描
                $('#r_scan .r_font').addClass('hide');
            }
        },

        //type:1 降价商品 2:促销商品
        click: function(flg, type){
            //记录当前选中信息
            slidebar.select = flg;
            switch (parseInt(flg)) {
                case 1:
                    $('#r_lining').attr('onmouseout','');

                    $('#r_cart').attr('onmouseout','slidebar.out(2);');
                    $('#sideBar').animate({right:'-209px'},'fast');
                    $('#r_cart .r_font').addClass('hide');

                    $('#r_account').attr('onmouseout','slidebar.out(3);');
                    $('#r_account .r_font').addClass('hide');

                    $('#r_collect').attr('onmouseout','slidebar.out(4);');
                    $('#r_collect .r_font').addClass('hide');

                    $('#r_view').attr('onmouseout','slidebar.out(5);');
                    $('#r_view .r_font').addClass('hide');

                    $('#r_service').attr('onmouseout','slidebar.out(6);');
                    $('#r_service .r_font').addClass('hide');

                    $('#r_scan').attr('onmouseout','slidebar.out(7);');
                    $('#r_scan .r_font').addClass('hide');
                    $('#scan_box').addClass('hide');
                    $('#service_box').addClass('hide');

                    var p = $('#r_lining').position();
                    if (slidebar.is_login == 0) { //未登录
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    } else {	//已登录
                        $.ajax({
                            type: "POST",
                            url: JS_G_PAGE_BASEURL_SSL+"/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=1",
                            success: function(o){
                                o = eval("(" + o + ")");
                                if (o.code == 200) {
                                    var d = o.data;
                                    if (d.sexy == 2) {
                                        var src = 'https://cdns.lining.com/shop/lining/theme/xth2/images/sidebar/member_woman.png';
                                        $('#user_box .user-box-img').attr('src', src);
                                    }

                                    var name = '';
                                    var custID_len = d.custID;
                                    if (custID_len.length >= 11) {
                                        name = custID_len.substr(0, 12);
                                        name += '...';
                                    } else {
                                        name = custID_len;
                                    }
                                    var name_href = '<a class="user-name-href" href="https://store.lining.com/shop/memberCenter.html" target="_blank">' + name + '</a>';
                                    $('#user_box .user-box-custID').html(name_href);
                                    $('#user_box .user-box-rank').html(d.rankName);

                                    if (d.mobileVer != '手机未验证') {
                                        $('#user_box .user-box-mobile').css('color', 'blue');
                                    } else {
                                        d.mobileVer = '<a style="color:#EE2E23;" href="https://store.lining.com/shop/memberCenter.html?operFlg=8" target="_blank">' + d.mobileVer + '</a>';
                                    }
                                    if (d.emailVer != '邮箱未验证') {
                                        $('#user_box .user-box-email').css('color', 'blue');
                                    } else {
                                        d.emailVer = '<a style="color:#EE2E23;" href="https://store.lining.com/shop/memberCenter.html?operFlg=8" target="_blank">' + d.emailVer + '</a>';
                                    }
                                    $('#user_box .user-box-mobile').html(d.mobileVer);
                                    $('#user_box .user-box-email').html(d.emailVer);

                                    $('#user_box').removeClass('hide');
                                    $('#user_box_triangle').removeClass('hide');

                                    //只有3星4星会员能够升级会员等级
                                    if (d.rankID == 8 || d.rankID == 9 || d.rankID == 17 || d.rankID == 18 || d.rankID == 19 || d.rankID == 20) {
                                        var rankDiff = '还差' + d.nextRankDiff + '元，升级为' + d.nextRankName;
                                        $('#user_box .rankDiff').html(rankDiff);
                                        $('#user_box .rankDiff').css('display', 'block');
                                    }

                                    //只有3星4星5星会员显示等级进度条
                                    switch(parseInt(d.rankID)) {
                                        case 8:
                                            $('#user_box .user-box-progress').width('57px');
                                            $('#user_box .rankStar').css('display', 'block');
                                            break;
                                        case 9:
                                            $('#user_box .user-box-progress').width('115px');
                                            $('#user_box .rankStar').css('display', 'block');
                                            break;
                                        case 10:
                                            $('#user_box .user-box-progress').width('172px');
                                            $('#user_box .rankStar').css('display', 'block');
                                            break;
                                    }

                                } else {
                                    comm_alert(o.message);
                                }
                            }
                        });
                    }
                    break;
                case 2:

                    cart.goods_amount();

                    $('#r_lining').attr('onmouseout','slidebar.out(1);');
                    $('#r_lining .r_font').addClass('hide');
                    $('#user_box').addClass('hide');
                    $('#user_box_triangle').addClass('hide');

                    $('#r_cart').attr('onmouseout','');
                    $('#r_login').addClass('hide');

                    $('#r_account').attr('onmouseout','slidebar.out(3);');
                    $('#r_account .r_font').addClass('hide');

                    $('#r_collect').attr('onmouseout','slidebar.out(4);');
                    $('#r_collect .r_font').addClass('hide');

                    $('#r_view').attr('onmouseout','slidebar.out(5);');
                    $('#r_view .r_font').addClass('hide');

                    $('#r_service').attr('onmouseout','slidebar.out(6);');
                    $('#r_service .r_font').addClass('hide');

                    $('#r_scan').attr('onmouseout','slidebar.out(7);');
                    $('#r_scan .r_font').addClass('hide');
                    $('#scan_box').addClass('hide');
                    $('#service_box').addClass('hide');

                    //展开购物车商品列表
                    $('#sideBar').animate({right:0},'fast');
                    $('#sideBar_r .user-cart').removeClass('hide').siblings('div').addClass('hide');

                    //ajax获取购物车数据并加载
                    $.ajax({
                        type: "POST",
                        url: 'https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=5&refresh=1',
                        success: function(o){
                            o = eval("(" + o + ")");
                            if (o.code == 200) {
                                var d = o.data;
                                $('.user-cart-goods div').html(d.list);
                                if (parseFloat(d.totalPaid) <= 0) {
                                    $('#total_price').html('￥0.00');
                                } else {
                                    $('#total_price').html('￥' + Number(d.totalPaid).toFixed(2));
                                }


                                //总金额或总积分是不是大于0
                                if (d.totalPaid > 0 || d.totalAddPoints > 0) {
                                    $('.no-cart-more').addClass('hide');
                                    $('.cart-more').removeClass('hide');

                                    $('.no-checkout').addClass('hide');
                                    $('.can-checkout').removeClass('hide');
                                }

                                //判断是否全部选中
                                var check_goods = $('[name=check_slide_goods]:checked').length;
                                var check_goods_all = $('[name=check_slide_goods]').length;
                                $('#cart_goods_amount').html(check_goods);
                                if ((parseInt(check_goods) == parseInt(check_goods_all)) && check_goods > 0) {
                                    $('[name=check_slide_all]').attr('checked', 'true');
                                }
                            } else {
                                var notice = '<div style="text-align:center;color:white;font-size:15px;margin-top:38px;">您还没有购物车商品哦！</div>';
                                $('.user-cart-goods div').html(notice);
                            }
                        }
                    });

                    break;
                case 3:
                    $('#r_lining').attr('onmouseout','slidebar.out(1);');
                    $('#r_lining .r_font').addClass('hide');
                    $('#user_box').addClass('hide');
                    $('#user_box_triangle').addClass('hide');

                    $('#r_cart').attr('onmouseout','slidebar.out(2);');
                    $('#r_cart .r_font').addClass('hide');

                    $('#r_account').attr('onmouseout','');
                    $('#r_collect').attr('onmouseout','slidebar.out(4);');
                    $('#r_collect .r_font').addClass('hide');

                    $('#r_view').attr('onmouseout','slidebar.out(5);');
                    $('#r_view .r_font').addClass('hide');

                    $('#r_service').attr('onmouseout','slidebar.out(6);');
                    $('#r_service .r_font').addClass('hide');

                    $('#r_scan').attr('onmouseout','slidebar.out(7);');
                    $('#r_scan .r_font').addClass('hide');
                    $('#scan_box').addClass('hide');
                    $('#service_box').addClass('hide');

                    var p = $('#r_account').position();
                    if (slidebar.is_login == 0) { //未登录
                        $('#sideBar').animate({right:'-209px'},'fast');
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    } else {
                        //展开购物车商品列表
                        $('#sideBar').animate({right:0},'fast');
                        $('#sideBar_r .user-account').removeClass('hide').siblings('div').addClass('hide');

                        $.ajax({
                            type: "POST",
                            url: "https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=2",
                            data: {},
                            success: function(o){
                                o = eval("(" + o + ")");
                                if (o.code == 200) {
                                    var d = o.data;
                                    if (!d.balanceAmount) {
                                        d.balanceAmount = 0;
                                    }
                                    $('.user-account .u-can-points').html(d.pointsAccount);
                                    $('.user-account .u-expire-points').html(d.pointsExpire);
                                    $('.user-account .u-can-coupoon').html(d.couponAmount);
                                    $('.user-account .u-can-balance').html('￥' + d.balanceAmount);
                                    $('.user-account .u-can-consume').html('￥' + d.latestYearTotal);
                                    $("#my_title").html("我的优惠券（"+d.couponAmount+"张）");
                                    $("#goods_coupon").css("display","none");
                                    $("#youfei_coupon").css("display","none");
                                    $("#money_coupon").css("display","none");
                                    if(d.couponList1){
                                        if(d.couponList1.couponType==2){
                                            lvStr = '<div class="co_left" style="margin-left:15px;margin-bottom:5px">'+
                                                '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/goods_box.png" >'+
                                                '</div>'+
                                                '<div class="co_right" style="margin-right:20px;">'+
                                                '<div style="font-size:20px;font-weight:bold;">礼品券</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList1.couponName+'</span>'+
                                                '</div>';

                                            $("#goods_coupon").html(lvStr);
                                            $("#goods_coupon").css("display","");
                                        }else if(d.couponList1.couponType==4 || d.couponList1.couponType==5){
                                            lvStr = '<div class="co_left" style="margin-left:15px;margin-bottom:5px">'+
                                                '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/mianyou_card.png" >'+
                                                '</div>'+
                                                '<div class="co_right" style="margin-right:20px;">'+
                                                '<div style="font-size:20px;font-weight:bold;">免邮卡</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList1.couponName+'</span>'+
                                                '</div>';

                                            $("#youfei_coupon").html(lvStr);
                                            $("#youfei_coupon").css("display","");
                                        }else{
                                            lvStr = '<div class="co_left">'+
                                                '<span style="margin-top:5px;font-size:14px;">¥</span>'+
                                                '<span style="font-size:30px;margin-left:15px;">'+d.couponList1.amount+'</span>'+
                                                '</div>'+
                                                '<div class="co_right">'+
                                                '<div style="font-size:20px;font-weight:bold;">现金券</div>'+
                                                '<div style="font-size:12px;">李宁官方网站</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList1.couponName+'</span>'+
                                                '</div>';

                                            $("#money_coupon").html(lvStr);
                                            $("#money_coupon").css("display","");
                                        }

                                    }

                                    if(d.couponList2){
                                        if(d.couponList2.couponType==2){
                                            lvStr = '<div class="co_left" style="margin-left:15px;margin-bottom:5px">'+
                                                '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/goods_box.png" >'+
                                                '</div>'+
                                                '<div class="co_right" style="margin-right:20px;">'+
                                                '<div style="font-size:20px;font-weight:bold;">礼品券</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList2.couponName+'</span>'+
                                                '</div>';

                                            $("#goods_coupon").html(lvStr);
                                            $("#goods_coupon").css("display","");
                                        }else if(d.couponList2.couponType==4 || d.couponList2.couponType==5){
                                            lvStr = '<div class="co_left" style="margin-left:15px;margin-bottom:5px">'+
                                                '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/mianyou_card.png" >'+
                                                '</div>'+
                                                '<div class="co_right" style="margin-right:20px;">'+
                                                '<div style="font-size:20px;font-weight:bold;">免邮卡</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList1.couponName+'</span>'+
                                                '</div>';

                                            $("#youfei_coupon").html(lvStr);
                                            $("#youfei_coupon").css("display","");
                                        }else{
                                            lvStr = '<div class="co_left">'+
                                                '<span style="margin-top:5px;font-size:14px;">¥</span>'+
                                                '<span style="font-size:30px;margin-left:15px;">'+d.couponList2.amount+'</span>'+
                                                '</div>'+
                                                '<div class="co_right">'+
                                                '<div style="font-size:20px;font-weight:bold;">现金券</div>'+
                                                '<div style="font-size:12px;">李宁官方网站</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList2.couponName+'</span>'+
                                                '</div>';

                                            $("#money_coupon").html(lvStr);
                                            $("#money_coupon").css("display","");
                                        }
                                    }

                                    if(d.couponList3){
                                        if(d.couponList3.couponType==2){
                                            lvStr = '<div class="co_left" style="margin-left:15px;margin-bottom:5px">'+
                                                '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/goods_box.png" >'+
                                                '</div>'+
                                                '<div class="co_right" style="margin-right:20px;">'+
                                                '<div style="font-size:20px;font-weight:bold;">礼品券</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList3.couponName+'</span>'+
                                                '</div>';

                                            $("#goods_coupon").html(lvStr);
                                            $("#goods_coupon").css("display","");
                                        }else if(d.couponList3.couponType==4 || d.couponList3.couponType==5){
                                            lvStr = '<div class="co_left" style="margin-left:15px;margin-bottom:5px">'+
                                                '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1/mianyou_card.png" >'+
                                                '</div>'+
                                                '<div class="co_right" style="margin-right:20px;">'+
                                                '<div style="font-size:20px;font-weight:bold;">免邮卡</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList3.couponName+'</span>'+
                                                '</div>';

                                            $("#youfei_coupon").html(lvStr);
                                            $("#youfei_coupon").css("display","");
                                        }else{
                                            lvStr = '<div class="co_left">'+
                                                '<span style="margin-top:5px;font-size:14px;">¥</span>'+
                                                '<span style="font-size:30px;margin-left:15px;">'+d.couponList3.amount+'</span>'+
                                                '</div>'+
                                                '<div class="co_right">'+
                                                '<div style="font-size:20px;font-weight:bold;">现金券</div>'+
                                                '<div style="font-size:12px;">李宁官方网站</div>'+
                                                '</div>'+
                                                '<div class="co_bottom layer-clear">'+
                                                '<span style="font-size:11px;color:#af7708;padding-left:5px;">全国通用</span>'+
                                                '<span style="color:#333;font-size:11px;padding-left:8px;width:93px;">'+d.couponList3.couponName+'</span>'+
                                                '</div>';

                                            $("#money_coupon").html(lvStr);
                                            $("#money_coupon").css("display","");
                                        }
                                    }
                                } else {
                                    comm_alert(o.message);
                                }
                            }
                        });
                    }
                    break
                case 4:
                    $('#r_lining').attr('onmouseout','slidebar.out(1);');
                    $('#r_lining .r_font').addClass('hide');
                    $('#user_box').addClass('hide');
                    $('#user_box_triangle').addClass('hide');

                    $('#r_cart').attr('onmouseout','slidebar.out(2);');
                    $('#r_cart .r_font').addClass('hide');

                    $('#r_account').attr('onmouseout','slidebar.out(3);');
                    $('#r_account .r_font').addClass('hide');

                    $('#r_collect').attr('onmouseout','');

                    $('#r_view').attr('onmouseout','slidebar.out(5);');
                    $('#r_view .r_font').addClass('hide');

                    $('#r_service').attr('onmouseout','slidebar.out(6);');
                    $('#r_service .r_font').addClass('hide');

                    $('#r_scan').attr('onmouseout','slidebar.out(7);');
                    $('#r_scan .r_font').addClass('hide');
                    $('#scan_box').addClass('hide');
                    $('#service_box').addClass('hide');

                    $('.user-collect-list .collect-record-today ul').html('');
                    $('.user-collect-list .record-today').addClass('hide');

                    $('.user-collect-list .collect-record-before ul').html('');
                    $('.user-collect-list .record-before').addClass('hide');

                    $('.user-collect-list .collect-record-redugoods ul').html('');
                    $('.user-collect-list .record-redugoods').addClass('hide');

                    $('.user-collect .special-all').addClass('hide');
                    $('.user-collect .recore-more').addClass('hide');

                    var p = $('#r_collect').position();
                    if (slidebar.is_login == 0) { //未登录
                        $('#sideBar').animate({right:'-209px'},'fast');
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    } else {
                        $('#sideBar').animate({right:0},'fast');
                        $('#sideBar_r .user-collect').removeClass('hide').siblings('div').addClass('hide');
                        if (!type || slidebar.collect_flg == 2) {
                            slidebar.collect_flg = 1;
                            var request_url = "https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=3";
                        } else {
                            slidebar.collect_flg = 2;
                            var request_url = "https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=3&type=" + type;
                        }
                        $.ajax({
                            type: "POST",
                            url: request_url,
                            data: {},
                            success: function(o) {
                                o = eval("(" + o + ")");
                                if (o.code == 200) {
                                    var d = o.data;
                                    if (!d.exist_collect) {
                                        $('.user-collect-list .collect-record-today ul').html('');
                                        $('.user-collect-list .record-today').addClass('hide');

                                        $('.user-collect-list .collect-record-before ul').html('');
                                        $('.user-collect-list .record-before').addClass('hide');

                                        $('.user-collect-list .collect-record-redugoods ul').html('');
                                        $('.user-collect-list .record-redugoods').addClass('hide');

                                        $('.user-collect .special-all').addClass('hide');
                                        $('.user-collect .recore-more').addClass('hide');

                                        $('.user-collect .exist-collect').html('您还没收藏过商品哦！').removeClass('hide');
                                        return false;
                                    }
                                    $('.user-collect .special-all').removeClass('hide');
                                    $('.user-collect .exist-collect').addClass('hide');
                                    $('.user-collect .reduction-goods').html(d.reduction);
                                    $('.user-collect .promo-goods').html(d.promotion);
                                    if (d.today) {
                                        var today_html = '';
                                        $.each(d.today, function(k, v){
                                            today_html += '<li>';
                                            today_html += '<div style="width:80px;height:80px;">';
                                            today_html += '<a href=' + v.urlLink + ' target="_blank">';
                                            today_html += '<img width="80" height="80" src=' + v.goodsMainPic + '>';
                                            today_html += '</a>';
                                            today_html += '</div>';
                                            today_html += '<div class="record-goods-price">￥' + v.new_salePrice + '</div>';
                                            today_html += '</li>';
                                        });
                                        if (today_html != '') {
                                            $('.user-collect-list .collect-record-today ul').html(today_html);
                                            $('.user-collect-list .record-today').removeClass('hide');
                                        }
                                    }

                                    if (d.before) {
                                        var before_html = '';
                                        $.each(d.before, function(k, v){
                                            before_html += '<li>';
                                            before_html += '<div style="width:80px;height:80px;">';
                                            before_html += '<a href=' + v.urlLink + ' target="_blank">';
                                            before_html += '<img width="80" height="80" src=' + v.goodsMainPic + '>';
                                            before_html += '</a>';
                                            before_html += '</div>';
                                            before_html += '<div class="record-goods-price">￥' + v.new_salePrice + '</div>';
                                            before_html += '</li>';
                                        });
                                        if (before_html != '') {
                                            $('.user-collect-list .collect-record-before ul').html(before_html);
                                            $('.user-collect-list .record-before').removeClass('hide');
                                        }
                                    }

                                    if (d.redugoods) {
                                        var redugoods_html = '';
                                        $.each(d.redugoods, function(k, v){
                                            redugoods_html += '<li>';
                                            redugoods_html += '<div style="width:80px;height:80px;">';
                                            redugoods_html += '<a href=' + v.urlLink + ' target="_blank">';
                                            redugoods_html += '<img width="80" height="80" src=' + v.goodsMainPic + '>';
                                            redugoods_html += '</a>';
                                            redugoods_html += '</div>';
                                            redugoods_html += '<div class="record-goods-price">￥' + v.new_salePrice + '</div>';
                                            redugoods_html += '</li>';
                                        });
                                        if (redugoods_html != '') {
                                            $('.user-collect-list .collect-record-redugoods ul').html(redugoods_html);
                                            $('.user-collect-list .record-redugoods').removeClass('hide');
                                        }
                                    }

                                    $('.user-collect .recore-more').removeClass('hide');
                                } else {
                                    comm_alert(o.message);
                                }
                            }
                        });
                    }
                    break;
                case 5:
                    $('#r_lining').attr('onmouseout','slidebar.out(1);');
                    $('#r_lining .r_font').addClass('hide');
                    $('#user_box').addClass('hide');
                    $('#user_box_triangle').addClass('hide');

                    $('#r_cart').attr('onmouseout','slidebar.out(2);');
                    $('#r_cart .r_font').addClass('hide');

                    $('#r_account').attr('onmouseout','slidebar.out(3);');
                    $('#r_account .r_font').addClass('hide');

                    $('#r_collect').attr('onmouseout','slidebar.out(4);');
                    $('#r_collect .r_font').addClass('hide');

                    $('#r_view').attr('onmouseout','');

                    $('#r_service').attr('onmouseout','slidebar.out(6);');
                    $('#r_service .r_font').addClass('hide');

                    $('#r_scan').attr('onmouseout','slidebar.out(7);');
                    $('#r_scan .r_font').addClass('hide');
                    $('#scan_box').addClass('hide');
                    $('#service_box').addClass('hide');

                    var p = $('#r_view').position();
                    var num_one = 1;
                    //if (slidebar.is_login == 0) { //未登录
                    if (num_one != 1) {
                        $('#sideBar').animate({right:'-209px'},'fast');
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    } else {
                        $('#sideBar').animate({right:0},'fast');
                        $('#sideBar_r .user-view').removeClass('hide').siblings('div').addClass('hide');
                        $('#r_login').css({top:p.top + 'px'}).addClass('hide');
                        if (!type) {
                            var request_url = "https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=4";
                        } else {
                            var request_url = "https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=4&type=" + type;
                        }
                        $.ajax({
                            type: "POST",
                            url: request_url,
                            data: {},
                            success: function(o) {
                                o = eval("(" + o + ")");
                                if (o.code == 200) {
                                    var d = o.data;
                                    if (!d.exist_view) {
                                        $('.user-view-list .view-record-today ul').html('');
                                        $('.user-view-list .record-today').addClass('hide');

                                        $('.user-view-list .view-record-before ul').html('');
                                        $('.user-view-list .record-before').addClass('hide');

                                        $('.user-view-list .view-record-week ul').html('');
                                        $('.user-view-list .record-week').addClass('hide');

                                        $('.user-view .special-all').addClass('hide');
                                        $('.user-view .exist-view').html('您已经很久没来看过我了哦！').removeClass('hide');
                                        return false;
                                    }

                                    $('.user-view .special-all').removeClass('hide');
                                    $('.user-view .exist-view').addClass('hide');
                                    $('.user-view .reduction-goods').html(d.reduction);
                                    $('.user-view .promo-goods').html(d.promotion);
                                    if (d.today) {
                                        var today_html = '';
                                        $.each(d.today, function(k, v){
                                            today_html += '<li>';
                                            today_html += '<div style="width:80px;height:80px;">';
                                            today_html += '<a href=' + v.urlLink + ' target="_blank">';
                                            today_html += '<img width="80" height="80" src=' + v.goodsMainPic + '>';
                                            today_html += '</a>';
                                            today_html += '</div>';
                                            today_html += '<div class="record-goods-price">￥' + v.new_salePrice + '</div>';
                                            today_html += '</li>';
                                        });
                                        if (today_html != '') {
                                            $('.user-view-list .view-record-today ul').html(today_html);
                                            $('.user-view-list .record-today').removeClass('hide');
                                        }
                                    }

                                    if (d.before) {
                                        var before_html = '';
                                        $.each(d.before, function(k, v){
                                            before_html += '<li>';
                                            before_html += '<div style="width:80px;height:80px;">';
                                            before_html += '<a href=' + v.urlLink + ' target="_blank">';
                                            before_html += '<img width="80" height="80" src=' + v.goodsMainPic + '>';
                                            before_html += '</a>';
                                            before_html += '</div>';
                                            before_html += '<div class="record-goods-price">￥' + v.new_salePrice + '</div>';
                                            before_html += '</li>';
                                        });
                                        if (before_html != '') {
                                            $('.user-view-list .view-record-before ul').html(before_html);
                                            $('.user-view-list .record-before').removeClass('hide');
                                        }
                                    }

                                    if (d.week) {
                                        var week_html = '';
                                        $.each(d.week, function(k, v){
                                            week_html += '<li>';
                                            week_html += '<div style="width:80px;height:80px;">';
                                            week_html += '<a href=' + v.urlLink + ' target="_blank">';
                                            week_html += '<img width="80" height="80" src=' + v.goodsMainPic + '>';
                                            week_html += '</a>';
                                            week_html += '</div>';
                                            week_html += '<div class="record-goods-price">￥' + v.new_salePrice + '</div>';
                                            week_html += '</li>';
                                        });
                                        if (week_html != '') {
                                            $('.user-view-list .view-record-week ul').html(week_html);
                                            $('.user-view-list .record-week').removeClass('hide');
                                        }
                                    }

                                } else {
                                    comm_alert(o.message);
                                }
                            }
                        });
                    }
                    break;
                case 6:
                    $('#r_login').css({top:'0px'}).addClass('hide');

                    $('#r_lining').attr('onmouseout','slidebar.out(1);');
                    $('#r_lining .r_font').addClass('hide');
                    $('#user_box').addClass('hide');
                    $('#user_box_triangle').addClass('hide');

                    $('#r_cart').attr('onmouseout','slidebar.out(2);');
                    $('#sideBar').animate({right:'-209px'},'fast');
                    $('#r_cart .r_font').addClass('hide');

                    $('#r_account').attr('onmouseout','slidebar.out(3);');
                    $('#r_account .r_font').addClass('hide');

                    $('#r_collect').attr('onmouseout','slidebar.out(4);');
                    $('#r_collect .r_font').addClass('hide');

                    $('#r_view').attr('onmouseout','slidebar.out(5);');
                    $('#r_view .r_font').addClass('hide');

                    $('#r_service').attr('onmouseout','');

                    $('#r_scan').attr('onmouseout','slidebar.out(7);');
                    $('#r_scan .r_font').addClass('hide');
                    $('#scan_box').addClass('hide');
                    $('#service_box').removeClass('hide');
                    break;
//				鼠标点击出现二维码
                case 7:
                    $('#r_login').css({top:'0px'}).addClass('hide');

                    $('#r_lining').attr('onmouseout','slidebar.out(1);');
                    $('#r_lining .r_font').addClass('hide');
                    $('#user_box').addClass('hide');
                    $('#user_box_triangle').addClass('hide');

                    $('#r_cart').attr('onmouseout','slidebar.out(2);');
                    $('#sideBar').animate({right:'-209px'},'fast');
                    $('#r_cart .r_font').addClass('hide');

                    $('#r_account').attr('onmouseout','slidebar.out(3);');
                    $('#r_account .r_font').addClass('hide');

                    $('#r_collect').attr('onmouseout','slidebar.out(4);');
                    $('#r_collect .r_font').addClass('hide');

                    $('#r_view').attr('onmouseout','slidebar.out(5);');
                    $('#r_view .r_font').addClass('hide');

                    $('#r_service').attr('onmouseout','slidebar.out(6);');
                    $('#r_service .r_font').addClass('hide');
                    $('#service_box').addClass('hide');

                    $('#r_scan').attr('onmouseout','');

                    $.ajax({
                        type: 'GET',
                        url: '/ajax/show_daily_r.html?v=1',
                        dataType: 'json',
                        timeout: 15000,
                        success: function (result_obj){
                            if (result_obj.code == 200) {
                                if (result_obj.data.redGift_flg == 1) {
                                    $('#scan_box').css({top:scan.top - 90,left:'-283px'});
                                    $('#scan_box img').attr('src', result_obj.data.pc_scan_code);
                                } else {
                                    $('#scan_box').css({top:scan.top - 90,left:'-283px'});
                                    $('#scan_box img').attr('src', 'https://cdns.lining.com/shop/page/images/wxCoupon/scan_default.png');
                                }
                                $('#scan_box').removeClass('hide');
                            }
                        },
                        error: function( XMLHttpRequest, textStatus, errorThrown ) {

                        }
                    });


                    break;
            }
        },

        userRepair: function(){
            window.open('https://store.lining.com/shop/memberCenter.html?operFlg=2');
        },

        //选中所有商品
        check_all: function(){
            var params = [];
            $('[name=check_slide_goods]').each(function(){
                var chk_goods = $(this).attr('checked');
                var flg = $(this).attr('flg');
                var postID = $(this).attr('pid');

                if (chk_goods == 'checked') {
                    params.push([flg, postID, 1]);
                } else {
                    params.push([flg, postID, 0]);
                }
            });

            $.ajax({
                type: 'POST',
                url: 'https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=6',
                data: {
                    params: params
                },
                success: function(o){
                    o = eval("(" + o + ")");
                    if (o.code == 200) {
                        slidebar.check_goods_success();
                    }
                }
            });
        },

        //选择后刷新商品数据
        check_goods_success: function(){
            $.ajax({
                type: "POST",
                url: 'https://store.lining.com/shop/comm_tplfun/ajax_slidebar_ssl.php?operFlg=5&refresh=2',
                data: {},
                success: function(o){
                    o = eval("(" + o + ")");
                    if (o.code == 200) {
                        var d = o.data;
                        $('.user-cart-goods div').html(d.list);
                        $('#total_price').html('￥' + d.totalPaid.toFixed(2));

                        //总金额或总积分是不是大于0
                        if (d.totalPaid > 0 || d.totalAddPoints > 0) {
                            $('.no-cart-more').addClass('hide');
                            $('.cart-more').removeClass('hide');

                            $('.no-checkout').addClass('hide');
                            $('.can-checkout').removeClass('hide');
                        } else {
                            $('.no-cart-more').removeClass('hide');
                            $('.cart-more').addClass('hide');

                            $('.no-checkout').removeClass('hide');
                            $('.can-checkout').addClass('hide');
                        }

                        //判断是否全部选中
                        var check_goods = $('[name=check_slide_goods]:checked').length;
                        var check_goods_all = $('[name=check_slide_goods]').length;
                        $('#cart_goods_amount').html(check_goods);
                        if ((parseInt(check_goods) == parseInt(check_goods_all)) && check_goods > 0) {
                            $('[name=check_slide_all]').attr('checked', 'true');
                        } else {
                            $('[name=check_slide_all]').removeAttr('checked');
                        }

                    } else {
                        var notice = '<div>您还没有购物车商品哦！</div>';
                        $('.user-cart-goods div').html(notice);
                    }
                }
            });
        }
    }
    slidebar.user_login();

    //jquery
    $(function(){

        //单个商品选中
        $('[name=check_slide_goods]').live('click', function(){
            slidebar.check_all();
        });

        //侧边栏购物车选择全选框
        $('[name=check_slide_all]').on('click', function(){
            var chk = $(this).attr('checked');
            if (chk == 'checked') {
                $('[name=check_slide_goods]').attr('checked', 'true');
            } else {
                $('[name=check_slide_goods]').removeAttr('checked');
            }
            slidebar.check_all();
        });

        //改版浏览器窗口大小事触发此事件
        $(window).resize(function(){
            //侧边栏高度、侧边栏内容距离顶部距离
            var h = $(window).height();
            var c = (h - 600) / 2 + 'px';
            $('#sideBar').height((h-80) + 'px');
            $('#sideBar_l').height((h-80) + 'px');
            $('#sideBar_r').height((h-80) + 'px');
            $('#sideBar_l .content').css('margin-top', c);

            //侧边栏左边的李宁logo
            var show = $('#r_show').position();
            $('#r_logo').css({top:show.top});

            //侧边栏右边展示内容区域
            var htop = (h - 60) / 2 + 'px';
            $('#hideBar').css('marginTop', htop);

            //购物车商品列表高度
            var list_h = (h - 340) + 'px';
            var account_h = (h - 94) + 'px';
            var collect_h = (h - 200) + 'px';
            var view_h = (h - 138) + 'px';
            $('#sideBar_r .user-cart-goods').height(list_h);
            $('#sideBar_r .user-account-content').height(account_h);
            $('#sideBar_r .user-collect-list').height(collect_h);
            $('#sideBar_r .user-view-list').height(view_h);

            //客服弹出层
            var service = $('#r_service').position();
            $('#service_box').css({top:service.top});

            //用户信息弹出层
            var user = $('#r_lining').position();
            $('#user_box').css({top:user.top});
            $('#user_box_triangle').css({top:user.top+24});

            //二维码扫描
            var scan = $('#r_scan').position();
            $('#scan_box').css({top:scan.top});

            //每个按钮对应的层改变位置
            switch (parseInt(slidebar.select)) {
                case 1:
                    var p = $('#r_lining').position();
                    if (slidebar.is_login == 0) { //未登录
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    }
                    break;
                case 3:
                    var p = $('#r_account').position();
                    if (slidebar.is_login == 0) { //未登录
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    }
                    break;
                case 4:
                    var p = $('#r_collect').position();
                    if (slidebar.is_login == 0) { //未登录
                        $('#r_login').css({top:p.top + 'px'}).removeClass('hide');
                    }
                    break;
                case 5:
                    break;
            }
        });

        //滚动时触发此事件，显示or隐藏‘回到顶部’
        $(window).scroll(function(){
            var t = $(window).scrollTop();
            if (t > 200) {
                $('#sideBar_l #r_top').fadeIn('slow');
            } else {
                $('#sideBar_l #r_top').fadeOut('slow');
            }
        });

        $(document).click(function(e){
            var f = slidebar.select;
            var o = $(e.target);
            if (f) {
                switch (f){
                    case 1:
                        if(o.closest('#r_lining').length == 0 && o.closest('#r_login').length == 0 && o.closest('#user_box').length == 0) {
                            $('#r_lining').attr('onmouseout','slidebar.out(1);');
                            $('#r_lining .r_font').addClass('hide');
                            $('#r_login').addClass('hide');
                            $('#user_box').addClass('hide');
                            $('#user_box_triangle').addClass('hide');
                        }
                        break;
                    case 2:
                        if (o.closest('#r_cart').length == 0 && o.closest('#sideBar_r').length == 0 && o.closest('#slide-number1').length == 0 && o.closest('#slide-number2').length == 0) {
                            $('#r_cart').attr('onmouseout','slidebar.out(2);');
                            $('#r_cart .r_font').addClass('hide');
                            $('#sideBar').animate({right:'-209px'},'fast');
                        }
                        break;
                    case 3:
                        if(o.closest('#r_account').length == 0 && o.closest('#r_login').length == 0 && o.closest('#sideBar_r').length == 0 && o.closest('#slide-number1').length == 0 && o.closest('#slide-number2').length == 0) {
                            $('#r_account').attr('onmouseout','slidebar.out(3);');
                            $('#r_account .r_font').addClass('hide');
                            $('#r_login').addClass('hide');
                            $('#sideBar').animate({right:'-209px'},'fast');
                        }
                        break;
                    case 4:
                        if(o.closest('#r_collect').length == 0 && o.closest('#r_login').length == 0 && o.closest('#sideBar_r').length == 0 && o.closest('#slide-number1').length == 0 && o.closest('#slide-number2').length == 0) {
                            $('#r_collect').attr('onmouseout','slidebar.out(4);');
                            $('#r_collect .r_font').addClass('hide');
                            $('#r_login').addClass('hide');
                            $('#sideBar').animate({right:'-209px'},'fast');
                        }
                        break;
                    case 5:
                        if(o.closest('#r_view').length == 0 && o.closest('#r_login').length == 0 && o.closest('#sideBar_r').length == 0 && o.closest('#slide-number1').length == 0 && o.closest('#slide-number2').length == 0) {
                            $('#r_view').attr('onmouseout','slidebar.out(5);');
                            $('#r_view .r_font').addClass('hide');
                            $('#r_login').addClass('hide');
                            $('#sideBar').animate({right:'-209px'},'fast');
                        }
                        break;
                    case 6:
                        if(o.closest('#r_service').length == 0 && o.closest('#service_box').length == 0) {
                            $('#r_service').attr('onmouseout','slidebar.out(6);');
                            $('#r_service .r_font').addClass('hide');
                            $('#service_box').addClass('hide');
                        }
                        break;
                    case 7:
                        if(o.closest('#r_scan').length == 0 && o.closest('#scan_box').length == 0) {
                            $('#r_scan').attr('onmouseout','slidebar.out(7);');
                            $('#r_scan .r_font').addClass('hide');
                            $('#scan_box').addClass('hide');
                        }
                        break;
                }
            }
        });
    });
</script>

<!--购物车侧边栏记录用户‘收缩’、‘展开’，默认“展开”-->
<script>
    $(document).ready(function() {

        var sidebar_status = get_COOKIE_INFO("ISOPEN_SIDEBAR");

        if( sidebar_status == 1){ //隐藏侧边栏
            $('#hideBar').fadeIn('fast');
            $('#sideBar_l').fadeOut('fast');
        }else{ //显示侧边栏
            $('#hideBar').fadeOut('fast');
            $('#sideBar_l').fadeIn('fast');
        }
    });
</script>

<div class="mask hide" id="mask"></div>
<div class="mask hide" id="pop_mask" style="z-index:997;"></div>
<div id="comm_alert" class="comm_alert hide comm_layer">
    <table>
        <tbody>
        <tr>
            <td class="top_l"></td>
            <td class="top_c"></td>
            <td class="top_r"></td>
        </tr>
        <tr>
            <td class="mid_l"></td>
            <td class="mid_c">
                <div class="pb-b-box">
                    <a title="关闭" class="close-popup" onclick="come_bcak_href();" id="aClose_dialog" href="javascript:void(0)">关闭</a>
                    <div class="pb-titleg">
                        <strong>提示信息</strong>
                    </div>
                    <div class="pb-content">
                        <table width="100%">
                            <tbody>
                            <tr>
                                <td class="alert_img" style="width: 37px;"></td>
                                <td id="comm_error"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="linkbox" id="linkbox">
                        <a onclick="come_bcak_href();" class="link-button" id="btnClose_dialog" href="javascript:void(0)"><span>确定</span></a>
                    </div>
                </div>
            </td>
            <td class="mid_r"></td>
        </tr>
        <tr>
            <td class="bottom_l"></td>
            <td class="bottom_c"></td>
            <td class="bottom_r"></td>
        </tr>
        </tbody>
    </table>
</div>

<div id="comm_confirm" class="comm_alert comm_layer hide">
    <table>
        <tbody>
        <tr>
            <td class="top_l"></td>
            <td class="top_c"></td>
            <td class="top_r"></td>
        </tr>
        <tr>
            <td class="mid_l"></td>
            <td class="mid_c">
                <div class="pb-b-box">
                    <a title="关闭" class="close-popup" onclick="comm_box.confirm_close(0);" id="aClose_dialog" href="javascript:void(0)">关闭</a>
                    <div class="pb-titleg">
                        <strong>提示信息</strong>
                    </div>
                    <div class="pb-content">
                        <table width="100%">
                            <tbody>
                            <tr>
                                <td class="confirm_img"></td>
                                <td id="confirm_msg"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="linkbox">
                        <a onclick="comm_box.confirm_close(1);" class="link-button-green" href="javascript:void(0)"><span>确定</span></a>
                        <a onclick="comm_box.confirm_close(0);" class="link-button" href="javascript:void(0)"><span>取消</span></a>
                    </div>
                </div>
            </td>
            <td class="mid_r"></td>
        </tr>
        <tr>
            <td class="bottom_l"></td>
            <td class="bottom_c"></td>
            <td class="bottom_r"></td>
        </tr>
        </tbody>
    </table>
</div>

<div id="popLayer" class="popLayer comm_layer hide">
    <table>
        <tbody>
        <tr>
            <td class="top_l"></td>
            <td class="top_c"></td>
            <td class="top_r"></td>
        </tr>
        <tr>
            <td class="mid_l"></td>
            <td class="mid_c">
                <div class="layerBox">
                    <div class="layerArrow"></div>
                    <div style="padding: 10px;" id="layer_text"></div>
                </div>
            </td>
            <td class="mid_r"></td>
        </tr>
        <tr>
            <td class="bottom_l"></td>
            <td class="bottom_c"></td>
            <td class="bottom_r"></td>
        </tr>
        </tbody>
    </table>
</div>

<div id="loadding" class="comm_loadding hide">
    <div>
        <em></em>
        <span class="loadding_str"></span>
    </div>
</div>


<!--小能客服-->
<script type="text/javascript">
    NTKF_PARAM = {
        siteid: "kf_9887",
        settingid: "kf_9887_1404890803379",
        uid: get_COOKIE_INFO("WANSONSHOP_CS_PCUSTID"),
        uname: get_COOKIE_INFO("WANSONSHOP_IDENTIFIER"),
        isvip: "1",
        userlevel: get_COOKIE_INFO("WANSONSHOP_CS_RANKNAME"),
        erpparam: "",
        ntalkerparam: {
            items: []
        }
    }

    /**
     * 使用小能检查登录状态
     * @constructor
     */
    function CHECK_NTKF_LOGINSTATUS() {
        var cust_id = get_COOKIE_INFO('WANSONSHOP_IDENTIFIER');
        if (cust_id == null) {
            customer.open_login("NTKF.im_openInPageChat('kf_9887_1404890803379')");
        } else {
            NTKF.im_openInPageChat('kf_9887_1404890803379');
        }
    }
</script>
<script type="text/javascript" src="https://dl.ntalker.com/js/xn6/ntkfstat.js?siteid=kf_9887"></script>

<script>

    //修改字体
    $('a,p,li,div,span,input,select,td').css('fontFamily','微软雅黑');

    //购物车商品数量
    cart.goods_amount();
    if (document.getElementById("searchTemp")) {
        init_search_suggestion(document.getElementById("searchTemp"),1,1);
    }

    init_lazy();

    //删除omniturecookie
    omniture_cookie_del();

    var url = document.location.href;

	//显示客户登录状态
	customer.show_IDENTIFIER();

function bankLoginClose() {
	$("#mask").addClass("hide");
	$("#bcm_login").addClass("hide");

}

function bankLoginOpen(){
	var plaintext = get_COOKIE_INFO('plaintext_json') ;
	var targetUrl = window.location.href;

	document.cookie = "targetUrl=" + targetUrl + ";path=/";

	var bankUrl   = "https://club.bankcomm.com/customer/thirdparty/ajaxLogin.html?format=JSON&plaintext=" + plaintext;
	window.location.href = bankUrl;
}

//价格动态加载 start
var goods_obj = {
	postID: '',
	flg: 1
};

//价格动态加载调用jquery ajax
if (goods_obj.postID) {
	$.ajax({
		url: "https://store.lining.com/shop/comm_tplfun/ajax_category.php",
		type: "POST",
		data: goods_obj,
		success: function(result) {
			result = eval("(" + result + ")");
			$.each(result, function (k,v) {
				$('.goods_price_' + k).html('￥' + v);
			});
		},
		error: function(error){
		    //alert('Error loading XML document!');
		}
	});
}
//价格动态加载 end

</script>

<!--omniture start-->
<script>
 function addOM_live(){
    var s=s_gi('lining-prd');
    s.linkTrackVars='eVar28,events';
    s.linkTrackEvents='event12';
    s.eVar28='live800';
    s.events='event12';
    s.tl(this,'o','live800');
}

$(".list_order_way").find("li").mouseenter(function() {
     var index = $(this).index();
     var uid = $(this).attr("uid");
     $(".list_order_way").find("li").removeClass("hover").eq(index).addClass("hover");
     init_lazy();
});
</script>
<!--omniture end-->

<!--百度PV,UV统计代码开始-->
<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?e21fe362fe7ca664eb5fd89ed45ed835";
	  var s = document.getElementsByTagName("script")[0];
	  s.parentNode.insertBefore(hm, s);
	})();
</script>
<!--百度PV,UV统计代码结束-->
<script type="text/javascript">
	function serviceShow(){
		$("#buttonShow").removeClass("hide");
		$("#mask").removeClass("hide");
		$(".instructions").show();
	}
	function showClose(){
		$("#buttonShow").addClass("hide");
		$("#mask").addClass("hide");
		$(".instructions").hide();
	}
</script>
<script>
navBindFunc();
customer.show_IDENTIFIER();

//购物车动态加载(同步)
var client_w = 0;
var client_h = 0;
var cart_load = {
	
	notice: function(){
		var str = '';
		str += '<div style="position:relative;">';
			str += '<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/load_cart.gif" width="100px">';
		str += '</div>';
		return str;
	},

	load: function(){
		
		var n = cart_load.notice();
	
		$('#cartNotice').html(n);

		showcartLoad();
	}
};

//初始化加载购物车
cart_load.load();

var overall = '';

//购物车初始化加载
function showcartLoad() {
	$.ajax({
		type: 'POST',
		//url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_showcartInfo.php?operFlg=1',
		url: JS_G_PAGE_BASEURL_SSL+'/ajax/cart_load.html',
		dataType: 'JSON',
		timeout: 15000,
		success: function( o ) {
			comm_box.loadding_close();
			if (o.code == 200) {
				var laytpl = layui.laytpl;
				
				var bodyTpl= cartGoods.innerHTML
				var delTpl = cartDel.innerHTML
				
				//获取购物车内容的html
				laytpl(bodyTpl).render(o.data.data.goodsList, function(bodyContent){
					$('#container').html(bodyContent);
				});
				
				//获取购物车过期内容的html
				if(o.data.data.cart_delete_flg && o.data.data.cart_delete_flg == 1){
					laytpl(delTpl).render(o.data.data.goodsList, function(delContent){
						$('#container_del_cart').html(delContent);
					});
				}

				//日常红包
				if (o.data.data.goodsList && o.data.data.goodsList.redGift_code) {
                    $('#showBigCode').attr('src',o.data.data.goodsList.redGift_code);
                }
				
				statistics(o.data.data);
				showGift(o.data.showGift);
				custom_cart.chkCensor();

				//计算body高度和宽度
				client_w = document.documentElement.clientWidth;
				client_h = document.documentElement.clientHeight;

				//获取遮盖层高度
				getsize();

				//设置新加钱换购窗口高度
				$('#persentBuy').css('maxHeight', client_h);
				$('#persentBuy_main').css('maxHeight', client_h-36-46);

				cart.goods_amount();

				//var kefucount = eval("("+o.data.data.kefucount+")");
				//客服接口JS
				NTKF_PARAM = {
					siteid: "kf_9887",
					settingid: "kf_9887_1404890803379",
					uid: get_COOKIE_INFO("WANSONSHOP_CS_PCUSTID"),
					uname: get_COOKIE_INFO("WANSONSHOP_IDENTIFIER"),
					isvip: "1",
					userlevel: "1",
					erpparam: "",
					ntalkerparam: {
						items: [o.data.data.kefucount]
					}
				}
				$.getScript("https://dl.ntalker.com/js/xn6/ntkfstat.js?siteid=kf_9887");

			} else if (o.code == 404) {
				var msgTpl= cartMsg.innerHTML;
				$('#container').html(msgTpl);
				$('#container_calcu').addClass('hide');
				$('#container_del_cart').addClass('hide');
			} else {
				$('#cartNotice').html('<p>可能由于您的网络不太给力，页面加载出现异常，点击<a href="javascript:void(0);" onclick="cart_load.load();"> 确定 </a>后重新加载！</p>');
			}
		},
		error: function( XMLHttpRequest, textStatus, errorThrown ) {
			comm_box.loadding_close();
			//$('#cartNotice').html('<p>可能由于您的网络不太给力，页面加载出现异常，点击<a href="javascript:void(0);" onclick="cart_load.load();"> 确定 </a>后重新加载！</p>');
            $('#cartNotice').html('<p>亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！</p>');
		}
	});
}

//加载xajax后回调此函数
function statistics(params) {

	overall = params;

	//购物车商品金额
	$('#totalOffer').html('-¥'+Number(params['totalSpread']).toFixed(2));
	$('#totalSum').html('¥'+Number(params['totalPaid']).toFixed(2));
	if (params.totalPaid > 0 || params.totalAddPoints > 0 || params.totalSpread > 0) {
		$('.c-r-right').css({'backgroundColor': '#EE2737', 'cursor': 'pointer'}).attr('onclick', 'giftCart.checkStore();');
	} else {
		$('.c-r-right').css({'backgroundColor': '#DDDDDD', 'cursor': 'not-allowed'}).removeAttr('onclick');
	}

	//删除的购物车商品
	if (typeof params != 'number') {
		$('#container_calcu').removeClass('hide');
		if (params.cart_delete_flg == 1) {
			$('#container_del_cart').removeClass('hide');
		} else {
			$('#container_del_cart').addClass('hide');
		}
	} else {
		$('#container_calcu').addClass('hide');
	}

	var container_height = $('#container_list').height();
	var total_height = container_height + 70;
	var client_height = $(window).height() - 80;
	if (container_height > client_height) {
		$(window).scroll(function(){
			var float_height = client_height + $(window).scrollTop();
			if (float_height > total_height) {
				$('#container_calcu').css({'position': 'static'});
			} else {
				$('#container_calcu').css({'position': 'fixed', 'left': '0', 'bottom': '0'});
			}
		});
	}

	$.getScript("https://cdns.lining.com/shop/lining/theme/xth2/comm_js/s_code.js?v=20170426002", function(){
		//omniture统计
		var goods_info_omniture = overall.omniture;
		s.pageName="购物车:查看";
		s.prop4="购物车";
		s.prop9=overall.userType;
		var gust=overall.isGuest;
		if (customer.cust_id && (gust=="1")) {
			s.eVar21=customer.cust_id;
		}
		if (goods_info_omniture) {
			s.products=goods_info_omniture.substring(1);
		} else {
			s.products = '';
		}
		s.channel="购物车";
		s.events="scView";
		var s_code=s.t();
		if (s_code) {
			document.write(s_code);
		}
		if (navigator.appVersion.indexOf('MSIE')>=0) {
			//document.write(unescape('%3C')+'\!-'+'-');
		}
	});

}

//回调选择礼品码尺码
function selectGiftCodeSize(data){

	comm_box.loadding_close();
	
	//颜色
	var color = '';
	var select_color = '';
	for (ck in data.color) {
		color += '<li cname=' + ck + '>';
			if (data.color[ck]['select'] == 1) {
				select_color = ck;
				color += '<div class="g-goods-img g-color-red">';
			} else {
				color += '<div class="g-goods-img g-color-gray">';
			}
				color += '<img width="60px" height="60px" src=' + data.color[ck]['img'] + '>';
			color += '</div>';
		color += '</li>';
	}

	//尺码
	var size = '';
	for (sk in data.size) {
		if (sk != select_color) {
			size += '<ul class="hide" sname=' + sk + '>';
		} else {
			size += '<ul sname=' + sk + '>';
		}
		
		for (mk in data.size[sk]) {
			size += '<li class="" gid=' + mk + '>' + data.size[sk][mk] + '</li>';
		}	
			
		size += '</ul>';
	}

	$('#mask').removeClass('hide');
	$('#giftcode_goods .g-color-list ul').html(color);
	$('#giftcode_goods .g-size-list .g-container').html(size);
	$('#giftcode_goods .g-goods-name').html(data.goodsName);
	$('#giftcode_goods').removeClass('hide');
}

$(function(){
	
	$('#giftcode_goods .g-close').on('click', function(){
		$('#mask').addClass('hide');
		$('#giftcode_goods').addClass('hide');
	});
	
	$('#giftcode_goods .g-color-list li').live('click', function(){
		
		var cname = $(this).attr('cname');
		
		$(this).find('div').removeClass('g-color-gray').addClass('g-color-red')
		       .end().siblings('li').find('div').removeClass('g-color-red').addClass('g-color-gray');

		$('#giftcode_goods .g-size-list .g-container').find('ul').addClass('hide');
		$('#giftcode_goods .g-size-list .g-container').find('[sname='+cname+']').removeClass('hide'); 
		$('#giftcode_goods .g-size-list .g-container ul li').removeClass('g-color-red');
		
	});
	
	$('#giftcode_goods .g-size-list .g-container ul li').live('click', function(){
		$(this).addClass('g-color-red').siblings('li').removeClass('g-color-red');
	});
	
	$('#giftcode_goods .g-confirm').on('click', function(){
		
		var gid = $('.g-size-list .g-container ul').find('.g-color-red').attr('gid');
		if (gid == undefined || gid == null || gid == '') {
			comm_alert('请选择商品尺码');
			return false;
		}
		
		var giftCode = $.trim($('[name=giftCode]').val());	
		if (giftCode == '' || giftCode == 0) {
			comm_alert('请选择礼品码');
			return false;
		}
		$('#giftcode_goods').addClass('hide');
		var params = [giftCode, gid];
		comm_box.loadding();
		$.ajax({
			type: 'POST',
			url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_showcartInfo.php?operFlg=9',
			dataType: 'JSON',
			data: {
				params: params
			},
			timeout: 15000,
			success: function( o ) {
				if (o.code == 200) {
					cart.goods_amount();
					showcartLoad();
				} else if (o.code == 201) {
					selectGiftCodeSize(o.data);
				} else {
					comm_box.loadding_close();
					comm_alert(o.message);
				}
			},
			error: function( XMLHttpRequest, textStatus, errorThrown ) {
				comm_box.loadding_close();
				comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
			}
		});
	});
});

//新加钱换购
//var client_w = document.documentElement.clientWidth;
//var client_h = document.documentElement.clientHeight;
//$('#persentBuy').css('maxHeight', client_h);
//$('#persentBuy_main').css('maxHeight', client_h-36-46);

var persentBuy = {
	
	centerID: 0,

	addBuyPrice: 0,
	
	//换购商品
	buy: function(centerID, totalPaid) {
		comm_box.loadding();
        $.ajax({
            type: 'POST',
            url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_showcartInfo.php?operFlg=13',
            dataType:'JSON',
            data: {
            	centerID: centerID,
            	totalPaid: totalPaid
            },
            timeout: 15000,
            success: function (result_obj){
				console.log(result_obj);
            	comm_box.loadding_close();
				if (result_obj.code == 200) {
					persentBuy.centerID = result_obj.data.centerID;
					var tr_html = '';
					var gift_realprice = 0;
					$.each(result_obj.data.goods, function(k, v){
						var showColor = v.color[0].postID;
						gift_realprice = v.addPrice;
						persentBuy.addBuyPrice = v.addPrice;
						tr_html += '<tr>';
							tr_html += '<td colspan="3" style="padding:10px 14px;">';
							if (v.addPrice > 0) {
								tr_html += '<p>购买活动商品满<span style="color:#ee2737;font-size:14px;vertical-align:middle;">¥' + v.minPrice + '</span>元，即可加<span style="color:#ee2737;font-size:14px;vertical-align:middle;">¥' + v.addPrice + '</span>元换购' + v.goodsName + v.goodsCount + '件</p>';
							} else {
								tr_html += '<p>购买活动商品满<span style="color:#ee2737;font-size:14px;vertical-align:middle;">¥' + v.minPrice + '</span>元，即可获赠' + v.goodsName + v.goodsCount + '件</p>';
							}
								if (v.canCheck == 0) {

									if (v.addPrice > 0) {
										$diffStr = '换购';
									} else {
										$diffStr = '获得赠品';
									}
									if (!v.href) {
										tr_html += '<p style="margin-top:4px;">还差<span style="color:red;font-size:14px;vertical-align:middle;">¥'+v.diffPrice+'</span>元，即可'+$diffStr+'</p>';
									} else {
										tr_html += '<p style="margin-top:4px;">';
											tr_html += '还差<span style="color:#ee2737;font-size:14px;vertical-align:middle;">¥'+v.diffPrice+'</span>元，即可'+$diffStr;
											tr_html += '&nbsp;&nbsp;&nbsp;<a href='+v.href+' style="display:inline-block;color:white;background-color:#EE2737;text-align:center;width:80px;border-radius:0 13px 13px 0;height:26px;line-height:26px;vertical-align:middle;">去凑单 > </a>';
										tr_html += '</p>';
									}
								} else {
									if (v.addPrice > 0) {
										tr_html += '<p style="margin-top:4px;">现已购满，可换购以下商品</p>';
									} else {
										tr_html += '<p style="margin-top:4px;">现已购满，请选择以下商品</p>';
									}
								}
							tr_html += '</td>';
						tr_html += '</tr>';

						tr_html += '<tr>';
							tr_html += '<td style="padding:12px 14px;">';
								if (v.canCheck == 1) {
									tr_html += '<input type="checkbox" name=persentBuyMutibox_'+v.product_mainID+' value="0" tit='+v.goodsName+'>';
								} else {
									tr_html += '<input type="checkbox" value='+v.diffPrice+' disabled>';
								}
							tr_html += '</td>';
							tr_html += '<td style="padding:12px 14px;" class=persentBuy-bigPic-'+v.product_mainID+'>';
								tr_html += '<img src='+v.color[0].imgLink+' width="100px" style="border:1px solid #ccc;">';
							tr_html += '</td>';
							tr_html += '<td style="padding:12px 14px;vertical-align:top;">';
								tr_html += '<p>'+v.goodsName+'</p>';
								tr_html += '<p style="margin-top:6px;">';
									if (v.addPrice > 0) {
										tr_html += '<span>换购价格</span>';
										tr_html += '<span style="color:#EE2737;margin-left:8px;font-weight:bold;">¥'+v.addPrice+'</span>';
									}
								tr_html += '</p>';
								tr_html += '<p style="margin-top:6px;">';
									tr_html += '<span>选择尺码</span>';
									
									$.each(v.color, function(ck, cv){
										if (cv.size) {
											if (cv.postID != showColor) {
												tr_html += '<span style="margin-left:8px;display:none;" class=persentBuy-color-'+cv.postID+'>';
											} else {
												tr_html += '<span style="margin-left:8px;display:inline-block;" class=persentBuy-color-'+cv.postID+'>';
											}
											
											$.each(cv.size, function(sk, sv){
												tr_html += '<input type="button" value='+sv.specName+' pid='+sv.postID+' mid='+v.product_mainID+' style="background-color:#fff;border:1px solid #ccc;cursor:pointer;padding:3px;margin-left:3px;outline:none;">';
											});
											tr_html += '</span>';
										} else {
											if (cv.postID != showColor) {
												tr_html += '<span style="color:#EE2737;font-size:13px;font-weight:bold;margin-left:8px;display:none;" class=persentBuy-color-'+cv.postID+'>暂无库存</span>';
											} else {
												tr_html += '<span style="color:#EE2737;font-size:13px;font-weight:bold;margin-left:8px;" class=persentBuy-color-'+cv.postID+'>暂无库存</span>';
											}
										}
									});
									
								tr_html += '</p>';
								tr_html += '<p style="margin-top:6px;">';
									tr_html += '<span>选择颜色</span>';
									tr_html += '<span style="margin-left:8px;display:inline-block;" class="persentBuy-select-color">';
										$.each(v.color, function(ck2, cv2){
											if (cv2.postID == showColor) {
												tr_html += '<img alt="'+cv2.specName+'" src='+cv2.imgLink+' pid='+cv2.postID+' mid='+v.product_mainID+' width="30px" style="border:1px solid #EE2737;vertical-align:middle;cursor:pointer;margin-left:3px;">';
											} else {
												tr_html += '<img alt="'+cv2.specName+'" src='+cv2.imgLink+' pid='+cv2.postID+' mid='+v.product_mainID+' width="30px" style="border:1px solid #ccc;vertical-align:middle;cursor:pointer;margin-left:3px;">';
											}
										});
									tr_html += '</span>';
								tr_html += '</p>';
							tr_html += '</td>';
						tr_html += '</tr>';
					});

					if (gift_realprice > 0) {
						$('#persentBuy .persentBuy-muti').html('可换购最多<span style="font-size:14px;color:#EE2737;">'+result_obj.data.mostBuy+'</span>件');
					} else {
						$('#persentBuy .persentBuy-muti').html('最多可获得<span style="font-size:14px;color:#EE2737;">'+result_obj.data.mostBuy+'</span>件赠品');
					}
					$('#persentBuy_main table tbody').html(tr_html);
					var persentBuy_top = (parseInt(client_h) - parseInt($('#persentBuy').height())) / 2;
					if (persentBuy_top > 0) {
                        $('#persentBuy').css('top', '0');
						//$('#persentBuy').css('top', persentBuy_top);
					} else {
						$('#persentBuy').css('top', '0');
					}
					$('#persentBuy').css('display', 'block');
					$('#mask').css('height', document.documentElement.scrollHeight).removeClass('hide');
					
				} else {
					comm_alert(result_obj.message);
				}
            },
            error: function( XMLHttpRequest, textStatus, errorThrown ) {
                comm_box.loadding_close();
                switch (params) {
                    case 'timeout':
                    case 'error':
                        comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
                    break;
                    default:
                        comm_alert('换购商品失败');
                    break;
                }
            }
        });
	},
	
	//确定
	confirm: function() {

		//先检查是否都不满足换购条件
		var disabled_count = 0;
		var disabled_msg = '';
		$.each($('#persentBuy_main input[type=checkbox]'), function(){
			if ($(this).attr('disabled') == 'disabled') {
				disabled_count += 1;
				if (!disabled_msg) {
					if (persentBuy.addBuyPrice > 0) {
						disabled_msg = '换购此商品还差'+$(this).val()+'元，请去凑单！';
					} else {
						disabled_msg = '获取此赠品还差'+$(this).val()+'元，请去凑单！';
					}
				}
			}
		});
		if (disabled_count == $('#persentBuy_main input[type=checkbox]').length) {
			comm_alert(disabled_msg);
			return false;
		}

		//检查是否有选中的换购商品
		var l = $('#persentBuy [name*=persentBuyMutibox_]:checked').length;
		if (l <= 0) {
			if (persentBuy.addBuyPrice > 0) {
				comm_alert('请选择换购商品');
			} else {
				comm_alert('请选择满赠商品');
			}
			return false;
		}
		var params = [];
		var error_flg = 0;
		var error_msg = '';
		$.each($('#persentBuy [name*=persentBuyMutibox_]:checked'), function(k, v){
			if (parseInt($(this).val()) != 0) {
				params.push($(this).val());
			} else {
				error_flg = 1;
				if (persentBuy.addBuyPrice > 0) {
					error_msg = '换购商品【'+$(this).attr('tit')+'】未选择尺码';
				} else {
					error_msg = '满赠商品【'+$(this).attr('tit')+'】未选择尺码';
				}
				return false;
			}
		});
		
		if (error_flg == 1) {
			comm_alert(error_msg);
			return false;
		}

		if (params.length == 0) {
			if (persentBuy.addBuyPrice > 0) {
				comm_alert('请选择换购商品尺码');
			} else {
				comm_alert('请选择满赠商品尺码');
			}
			return false;
		}
		
		//ajax
		$('#mask').css('height', document.documentElement.scrollHeight).removeClass('hide');
		$('#persentBuy .persentBuy-foot').html('<span style="color:#EE2737;font-size:14px;font-weight:bold;height:46px;line-height:46px;display:inline-block;">努力加载中……</span>');
		$.ajax({
            type: 'POST',
            url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_commCart.php?openFlg=3&plat=1',
            dataType:'JSON',
            data: {
            	centerID: persentBuy.centerID,
            	postID: params
            },
            timeout: 15000,
            success: function (result_obj){
				if (result_obj.code == 200) {
					showcartLoad();
					$('#persentBuy').css('display', 'none');
					var foot_html = '';
					foot_html += '<span style="display:inline-block;font-size:13px;color:#FFFFFF;background-color:#EE2737;cursor:pointer;width:71px;height:28px;line-height:28px;margin-top:9px;" onclick="persentBuy.confirm();">确定</span>';
					foot_html += '<span style="display:inline-block;font-size:13px;background-color:#CCCCCC;cursor:pointer;width:71px;height:28px;line-height:28px;color:#fff;margin-left: 38px;" onclick="persentBuy.close();">取消</span>';
	            	$('#persentBuy .persentBuy-foot').html(foot_html);
				} else {
					comm_alert(result_obj.message);
					var foot_html = '';
					foot_html += '<span style="display:inline-block;font-size:13px;color:#FFFFFF;background-color:#EE2737;cursor:pointer;width:71px;height:28px;line-height:28px;margin-top:9px;" onclick="persentBuy.confirm();">确定</span>';
					foot_html += '<span style="display:inline-block;font-size:13px;background-color:#CCCCCC;cursor:pointer;width:71px;height:28px;line-height:28px;color:#fff;margin-left: 38px;" onclick="persentBuy.close();">取消</span>';
	            	$('#persentBuy .persentBuy-foot').html(foot_html);
				}
            },
            error: function( XMLHttpRequest, textStatus, errorThrown ) {
                var foot_html = '';
				foot_html += '<span style="display:inline-block;font-size:13px;color:#FFFFFF;background-color:#EE2737;cursor:pointer;width:71px;height:28px;line-height:28px;margin-top:9px;" onclick="persentBuy.confirm();">确定</span>';
				foot_html += '<span style="display:inline-block;font-size:13px;background-color:#CCCCCC;cursor:pointer;width:71px;height:28px;line-height:28px;color:#fff;margin-left: 38px;" onclick="persentBuy.close();">取消</span>';
            	$('#persentBuy .persentBuy-foot').html(foot_html);
                switch (params) {
                    case 'timeout':
                    case 'error':
                        comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
                    break;
                    default:
						comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
                    break;
                }
            }
        });
	},
	
	//关闭
	close: function() {
		$('#persentBuy').css('display', 'none');
		$('#mask').addClass('hide');
	},
	
	//删除换购商品
	update: function(centerID, postID) {
		comm_box.loadding();
		$.ajax({
            type: 'POST',
            url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_commCart.php?openFlg=4',
            dataType:'JSON',
            data: {
            	centerID: centerID,
            	postID: postID
            },
            timeout: 15000,
            success: function (result_obj){
            	comm_box.loadding_close();
				if (result_obj.code == 200) {
					showcartLoad();
				} else {
					comm_alert(result_obj.message);
				}
            },
            error: function( XMLHttpRequest, textStatus, errorThrown ) {
            	comm_box.loadding_close();
                switch (params) {
                    case 'timeout':
                    case 'error':
                        comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
                    break;
                    default:
                        comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
                    break;
                }
            }
        });
	}
};

$('#persentBuy .persentBuy-select-color img').live('click', function(){
	$(this).css('border', '1px solid #EE2737').siblings('img').css('border', '1px solid #ccc');
	var pid = $(this).attr('pid');
	var mid = $(this).attr('mid');
	var src = $(this).attr('src');
	$('[name=persentBuyMutibox_'+mid+']').val('0').removeAttr('checked');
	var l = $('#persentBuy [name*=persentBuyMutibox_]:checked').length;
	$('.persentBuy-alcheck').html(l);
	$('.persentBuy-color-' + pid).css('display', 'inline-block')
	                             .siblings('[class*=persentBuy-color-]')
	                             .css('display', 'none')
	                             .find('input')
	                             .css('border', '1px solid #ccc');
	$('.persentBuy-color-' + pid).find('input').css('border', '1px solid #ccc');
	$('[class=persentBuy-bigPic-'+mid+'] img').attr('src', src);                      
});

$('#persentBuy [class*=persentBuy-color-] input').live('click', function(){
	var pid = $(this).attr('pid');
	var mid = $(this).attr('mid');
	$('[name=persentBuyMutibox_'+mid+']').val(pid).attr('checked', true);
	var l = $('#persentBuy [name*=persentBuyMutibox_]:checked').length;
	$('.persentBuy-alcheck').html(l);
	$(this).css('border', '1px solid #EE2737').siblings('input').css('border', '1px solid #ccc');
});

$('#persentBuy [name*=persentBuyMutibox_]').live('click', function(){
	var l = $('#persentBuy [name*=persentBuyMutibox_]:checked').length;
	$('.persentBuy-alcheck').html(l);
	$(this).val('0');
	$(this).closest('td').nextAll('td')
	       .find('[class*=persentBuy-color-] input')
	       .css('border', '1px solid #ccc');
});

/**
**商品买赠
*@showGiftArr 所有赠品信息
*
**/
var showGiftArr = {};
function showGift(showGiftStr){
    if (showGiftStr) {
        showGiftArr = eval("("+showGiftStr+")");
    }
}

var giftCart = {
    checkStore:function(noNeedGift){
    	
        /**
        * 检验用户是否需要赠品
        **/
		var chestr="";
		var stopFlg = 0;

		$('.checkboxSpan').each(function() {
			if( $(this).hasClass("alCheck") && $(this).attr("name") == 'checkgift'){
				var checkgiftID = $(this).attr('value');
				var reg = /_/;
				if(reg.exec(checkgiftID)){
					input_val_arr = checkgiftID.split('_');
					if(!input_val_arr[2] || input_val_arr[2]==0){
						if( noNeedGift != 1 ){
							$('.link-button-green span').text('继续结算');
							comm_box.confirm_open("您有商品赠品还未选择！是否继续结算？", "giftCart.checkGift","giftCart.unCheckGift");
							stopFlg = 1;
						}
					}
					chestr += checkgiftID+",";
				}
			}
		});

		if (stopFlg != 0){
			return false;
		}

        //检验是否登录
		comm_box.loadding();
		$.ajax({
			type: 'POST',
			url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_showcartInfo.php?operFlg=14',
			dataType: 'JSON',
			data: {
				params: chestr
			},
			timeout: 15000,
			success: function( o ) {
				comm_box.loadding_close();
				if (o.code == 200) {
					customer.checkout(o.data);
				} else {
					comm_alert(o.message);
				}
			},
			error: function( XMLHttpRequest, textStatus, errorThrown ) {
				comm_box.loadding_close();
				comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
			}
		});
    },
	checkGift: function(){
		$('.link-button-green span').text('确定');
		giftCart.checkStore(1);
	},
	unCheckGift:function(){
		$('.link-button-green span').text('确定');
	},
	//使用礼品码
	giftCodeUse: function(){
		
		var giftCode = $.trim($('[name=giftCode]').val());	
		if (giftCode == '' || giftCode == 0 || giftCode == '请输入礼品码') {
			comm_alert('请选择礼品码');
			return false;
		}
		var pcode = $('[name='+giftCode+']').attr('pcode');
		var params = [giftCode, pcode];

		comm_box.loadding();
		$.ajax({
			type: 'POST',
			url: JS_G_PAGE_BASEURL_SSL+'/shop/comm_tplfun/ajax_showcartInfo.php?operFlg=9',
			dataType: 'JSON',
			data: {
				params: params
			},
			timeout: 15000,
			success: function( o ) {
				if (o.code == 200) {
					cart.goods_amount();
					showcartLoad();
				} else if (o.code == 201) {
					selectGiftCodeSize(o.data);
				} else {
					comm_box.loadding_close();
					comm_alert(o.message);
				}
			},
			error: function( XMLHttpRequest, textStatus, errorThrown ) {
				comm_box.loadding_close();
				comm_alert('亲爱的宁盟，由于当前购买人数较多系统繁忙，抱歉，请您稍后重试！');
			}
		});
	},

	//礼品码input框获取焦点
	giftCodeFocus: function() {
		var giftCodeVal = $.trim($('#giftCode').val());
		if (giftCodeVal == '请输入礼品码') {
			$('#giftCode').val('');
		}
	},

	//礼品码input框失去焦点
	giftCodeBlur: function() {
		var giftCodeVal = $.trim($('#giftCode').val());
		if (giftCodeVal == '') {
			$('#giftCode').val('请输入礼品码');
		}
	}

}

//礼品码弹出层
var giftcode_open_flg = 0;
$('[class=g-c-click]').live('click', function() {
	if (giftcode_open_flg == 0) {
		giftcode_open_flg = 1;
		$('#goodsgift_layer').css('display', 'block');
	} else {
		giftcode_open_flg = 0;
		$('#goodsgift_layer').css('display', 'none');
	}
});

$(document).click(function(e){
	var ele = $(e.target);
	if (ele.closest('.g-c-click').length == 0 && ele.closest('.g-c-click').length == 0) {
		giftcode_open_flg = 0;
		$('#goodsgift_layer').css('display', 'none');
	}
});

/**
*商品买赠
*赠品二级商品下拉菜单选择
**/
var colorPost ='';
var	inputValue='';
var inputObj ='';
var reg = '';
var input_val_arr='';
function checkSelect(obj){

	//当前选中商品图片值
	colorPost=$(obj).attr('value');
	idArr=colorPost.split('_');

	//input选中框
	inputObj = $(obj).closest('.cartGiftGoodsSelect').prev().find('span[name=checkgift]');
    inputValue = inputObj.attr('value');

    reg = /_/;
	if(reg.exec(inputValue)){
		input_val_arr = inputValue.split('_');
		input_val_arr[1] = idArr[1]; //改变颜色选择的id值
		input_val_arr[2] = 0;		//将尺码id置空
		inputValue = input_val_arr.join('_');
		inputObj.attr('value',inputValue);
	}
	$(obj).closest('.cartGiftAllColor').find('div>span').removeClass('cartGiftselectColor').addClass('cartGiftNoselectColor');
	$(obj).attr('class', 'cartGiftselectColor');
	$(obj).closest('.cartGiftGoodsSelect').prev('.cartGiftGoodsName').find('.giftgoods-spec>p').html('&nbsp;');
	$.each(showGiftArr, function(k, values){	
		if(idArr[0]==values.postID){
			$.each(values.giftCount,function(kg,value) {
				if(value.color){
					$.each(value.color,function(k,vg) {
						//替换html			
						if(idArr[1]==vg.postID){
							var html_str = '';
							$.each(vg.size,function(k,v){
								html_str += '<span onclick="checkSelects(this);" name="size" value='+v.postID+' class="cartGiftNoselectColor" style="padding: 4px;text-align: center;display:inline-block;margin: 0 4px 4px 0;cursor: pointer;">'+v.goods_size+'</span>';
								$("#img_"+values.postID+'_'+vg.product_mainID).attr("src",v.imgLink);
								$('#name_'+values.postID+'_'+vg.product_mainID).find('span').eq(1).html('<span>'+v.goodsName+'</span>');
							});
							$('#size_'+values.postID+'_'+vg.product_mainID).html(html_str);
						}						
					});
				}
			});				
		}
	});	
}
//三级商品下拉菜单选择	 
function checkSelects(obj){
	var sizePost=$(obj).attr('value');
	inputObj = $(obj).closest('.cartGiftGoodsSelect').prev().find('span[name=checkgift]');
    inputValue = inputObj.attr('value');
    reg = /_/;
	if(reg.exec(inputValue)){
		input_val_arr = inputValue.split('_');
		input_val_arr[2] = sizePost;
		inputValue = input_val_arr.join('_');
		inputObj.attr('value',inputValue);
	}
	$(obj).closest('.cartGiftAllSize').find('div>span').removeClass('cartGiftselectColor').addClass('cartGiftNoselectColor');
	$(obj).attr('class', 'cartGiftselectColor');
}

//确认选择赠品
function goodsGiftSelectConfirm(obj) {

	var color = $(obj).parent('div').siblings('.cartGiftAllColor').find('span[class=cartGiftselectColor]').find('img').attr('title');
	var size = $(obj).parent('div').siblings('.cartGiftAllSize').find('span[class=cartGiftselectColor]').html();

	if (!color || !size) {
		comm_alert('请选择赠品尺码');
		return false;
	}

	$(obj).closest('.cartGiftGoodsSelect').prev('.cartGiftGoodsName').find('.g-s-color').html(color);
	$(obj).closest('.cartGiftGoodsSelect').prev('.cartGiftGoodsName').find('.g-s-size').html('尺码：' + size);
	$(obj).closest('.cartGiftGoodsSelect').slideUp('400');
}

//选择赠品颜色、尺码
function goodsGiftShow(obj) {
	$(obj).closest('.cartGiftGoodsName').next('.cartGiftGoodsSelect').slideDown('400');
}

$('#goodsgift_layer li').live('click', function(){
	var giftCodeName = $(this).attr('name');
	$('[name=giftCode]').val(giftCodeName);
});

//Js获取对方长度
function jsonLength(obj){
    var size = 0, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
    }
    return size;
}

</script>

<script type="text/javascript" src="https://cdns.lining.com/shop/lining/theme/xth2/js/showcartInfo.js?v=20171115"></script>
<script id="cartMsg" type="text/html">
	<div class="items clearfix" id="cartShow">
		<table cellspacing="0" class="grid">
			<thead>
				<tr>
					<td width="46">
						<span class="checkboxSpan unCheck" name=""></span>
					</td>
					<td width="76" class="textLeft">全选</td>
					<td width="*" class="textLeft" style="padding-left: 56px;">商品信息</td>
					<td width="110">规格</td>
					<td width="110">单价</td>
					<td width="110">数量</td>
					<td width="110">优惠</td>
					<td width="110">小计</td>
					<td width="60">操作</td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td colspan="11" id="cartNotice" style="height:210px;color:red;font-size:15px;font-weight:bold;" >
						您还没有添加商品到购物车
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</script>
<script id="cartDel" type="text/html">
{{# if (d.del_cart) { }}
    <div id="cart_del_general" class="items clearfix">
        <div class="cart-del-title">已删除商品，您可以重新购买</div>
        <table cellspacing="0" class="grid" style="border:0px;">
            {{# var range_goods=1 }}
            {{# if (d.del_cart.general){ }}
	            <tbody>
		            {{# layui.each(d.del_cart.general , function(k , list){ }}
			            {{# if (range_goods <= 5){ }}
				            <tr>
								<td width="96">
									<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank">
										<img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" />
									</a>
								</td>
								<td class="cartGoodsName" width="*">
									{{# if (list.extend.type == 4){ }}
										<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
											<font class="red">[积分商品]</font>&nbsp;&nbsp;{{list.goodsName}}
										</a>
									{{# }else{ }}
										<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
											{{list.goodsName}}
										</a>
									{{# } }}
									
									{{# if (list.gift){ }}
										{{# layui.each(list.gift , function(gk , gift_list){ }}
											<div>
												<font class="red">[赠品]</font>
												&nbsp;{{gift_list.goodsName}}&nbsp;<font class="red">×{{gift_list.goodsAmount*list.goodsAmount}}</font>
											</div>
									   {{#  }) }}
									{{# } }}
								</td>
								
								<td width="110">
									<div class="goodsSpec">{{list.goods_color}}</div>
									<div class="goodsSpec">尺码：{{list.goods_size}}</div>
								</td>
								
								<td width="110">
									<div class="cartMarketPrice">￥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{ fn() }}</div>
									<div><del>￥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{ fn() }}</del></div>
								</td>
								
								<td width="110">
									<div class="quantity_num">{{list.goodsAmount}}</div>
								</td>
						
								<td width="110" class="goodsDiscount">
									<div>
										{{# if ((list.salePrice-list.specPrice) > 0) { }}
											￥{{# var fn=function(){ return Number(list.salePrice-list.specPrice).toFixed(2) } }} {{ fn() }}
										{{# }else{ }}
											￥0.00
										{{# } }}
									</div>
								</td>
								<td width="110">
									{{# var specPriceAmount=Number(list.specPrice*list.goodsAmount).toFixed(2) }}
									<div class="goodsPrice">￥{{specPriceAmount}}</div>
								</td>
								<td width="110" class="cart-goods-buy">
									<a href="javascript:void(0);" onclick="general_cart.again_buy('general', '{{k}}');">重新购买</a>
								</td>
								
							</tr>
			            {{# } }}
			            {{# range_goods=range_goods+1 }}
		            {{# }) }}
	            </tbody>
             {{# } }}
        </table>
    </div>
{{#}}}
</script>

<script id="cartGoods" type="text/html">
<div class="items clearfix">
	<table cellspacing="0" class="grid">
		<thead>
            <tr>
                <td width="46">
                    <span class="checkboxSpan unCheck" name="chkAll"></span>
                </td>
                <td width="76" class="textLeft">全选</td>
                <td width="*" class="textLeft" style="padding-left: 56px;">商品信息</td>
                <td width="110">规格</td>
                <td width="110">单价</td>
                <td width="110">数量</td>
                <td width="110">优惠</td>
                <td width="110">小计</td>
                <td width="60">操作</td>
            </tr>
		</thead>
		<tbody>
			<tr>
				<td colspan="9" style="height: 50px; line-height: 50px; padding: 0; text-align: left; padding-left: 19px;">
                    <span style="color: #EE2737; font-size: 12px;">温馨提示</span>
                    <span style="color:#666; font-size: 12px;margin-left: 6px;">
                    	{{#if (d.is_single > 1) { }}
                           	 您的订单中包含预售商品，我们将拆单为您发货，优先发送非预售商品
                        {{# }else{ }}
                          	  选购清单中的商品无法保留库存，请您及时结算
                        {{# } }}
                    </span>
                    {{#if (d.redGift_flg == 1) { }}
						<div style="margin-bottom: 15px;cursor: pointer;" onclick="customer_38_layer_open();">
							<img src="{{d.redGift_icon}}" style="width: 60px;vertical-align: middle;">
							<span style="font-size: 15px;font-weight: bold;color: #EE2737;vertical-align: middle;">{{d.redGift_t1}}</span>
							<span style="font-size: 14px;color:#666;vertical-align: middle;">{{d.redGift_t2}}</span>
						</div>
                    {{# } }}
				</td>
			</tr>
		</tbody>

        <!--随意搭-->
        {{# if (d.cart.packagegoods) { }}
			<tbody>
		 	{{#  layui.each(d.cart.packagegoods, function(k , m_list){ }}
		        <tr>
		            <td>
		                {{# if (m_list.chkFlg==1){ }}
		                    <span class="checkboxSpan alCheck" name="chkGoods" flg="9" pid="{{k}}"></span>
		                {{# }else{ }}
		                    <span class="checkboxSpan unCheck" name="chkGoods" flg="9" pid="{{k}}"></span>
		                {{# } }}
		            </td>
		            <td class="textLeft">
		                <a href="javascript:void(0);" title="{{m_list.goodsName}}">
		                    <img src="{{m_list.imgLink}}" alt="{{m_list.goodsName}}" class="item" />
		                </a>
		            </td>
		            <td class="cartGoodsName">
		                <a href="javascript:void(0);">
		                	 {{# var tmpGoodsName = m_list.goodsName.replace(/虚拟【随意搭】/,"") }}
		                    <font class="new-bgcolor">【随意搭】</font>&nbsp;&nbsp; {{tmpGoodsName}}
		                </a>
		            </td>
		            <td>{{m_list.spec}}</td>
		            <td>&nbsp;</td>
		            <td>&nbsp;</td>
		            <td>&nbsp;</td>
		            <td></td>
		            <td class="cart-goods-operation">
		                <div class="relative">
		                    <a href="javascript:void(0);" class="line" onclick="delete_pop(this,'请确认是否要删除此随意搭？');">删除</a>
		                    <div class="absolute hide" >
		                        <p></p>
		                        <a onclick="packagegoods_cart.delConfirm('{{k}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
		                        <a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
		                    </div>
		                </div>
		            </td>
		        </tr>

		        {{# layui.each(m_list.slave , function(k , s_list){ }}
	                <tr>
	                    <td style="border-top:none;">&nbsp;</td>
	                    <td style="border-top:none;position:relative;text-align:left;">
	                        <div style="border-left:1px solid #EA7B5A;position:absolute;left:31px;top:-30px;height:58px;">&nbsp;</div>
	                        <div>
	                            <a href="{{s_list.link}}?intcmp=cartproduct" title="{{s_list.goodsName}}" target="_blank">
	                                <img src="{{s_list.imgLink}}" alt="{{s_list.goodsName}}" class="item" />
	                            </a>
	                        </div>
	                    </td>
	                    <td class="cartGoodsName" style="border-top:none;">
	                        <span>
	                            <div>
	                                <a href="{{s_list.link}}?intcmp=cartproduct" target="_blank">
	                                    <font class="new-bgcolor">【搭配商品】</font>&nbsp;&nbsp;{{s_list.goodsName}}
	                                </a>
	                            </div>
	                            <div style="margin-top:8px;">
	                                	规格：{{s_list.goods_color}}
	                                	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	                                	尺码：{{s_list.goods_size}}
	                            </div>
	                        </span>
	                    </td>
	                    <td style="border-top:none;">&nbsp;</td>
	                    <td style="border-top:none;">
	                        <div class="cartMarketPrice">¥{{# var fn=function(){ return Number(s_list.salePrice).toFixed(2) } }} {{ fn() }}</div>
	                        <div><del>¥{{# var fn=function(){ return Number(s_list.marketPrice).toFixed(2) } }} {{ fn() }}</del></div>
	                    </td>
	                    <td style="border-top:none;" class="new-fontcolor">
	                        {{s_list.goodsAmount}}
	                    </td>
	                    <td class="goodsDiscount" style="border-top:none;">
	                        <div>
	                            {{# var goodsDiscountAmount = Number(s_list.salePrice - s_list.specPrice).toFixed(2) }}
	                           	 ￥{{goodsDiscountAmount}}
	                        </div>
	                    </td>
	                    <td style="border-top:none;">
	                        {{# var specPriceAmount = Number(s_list.specPrice * s_list.goodsAmount).toFixed(2) }}
	                        <div class="goodsPrice">￥{{specPriceAmount}}</div>
	                    </td>
	                    <td style="border-top:none;">
	                        &nbsp;
	                    </td>
	                </tr>
                {{#  }) }}
		        
		     {{#  }) }}
		     </tbody>
        {{# } }}

		<!--定制商品-->
		{{# if(d.cart.custom) { }}
			<tbody>
				{{# layui.each(d.cart.custom, function(k , m_list){ }}
					<tr>
						<td>
							{{# if (m_list.chkFlg == 1){ }}
                                <span class="checkboxSpan alCheck" name="chkGoods" flg="2" pid="{{k}}"></span>
							{{# }else{ }}
                                <span class="checkboxSpan unCheck" name="chkGoods" flg="2" pid="{{k}}"></span>
							{{# } }}
						</td>
						<td class="textLeft">
							<a href="{{m_list.link}}?intcmp=cartproduct" title="{{m_list.goodsName}}" target="_blank">
								<img src="{{m_list.imgLink}}" alt="{{m_list.goodsName}}" class="item" />
							</a>
						</td>
						<td class="cartGoodsName">
                            <a href="{{m_list.link}}?intcmp=cartproduct" target="_blank">
                                <font class="new-bgcolor">【可定制】</font>&nbsp;&nbsp;{{m_list.goodsName}}
                            </a>
						</td>
                        <td>
                            <div class="goodsSpec">{{m_list.goods_color}}</div>
                            <div class="goodsSpec">尺码：{{m_list.goods_size}}</div>
                        </td>
						<td>
							<p class="cartMarketPrice">¥{{#var tmp_listPrice=Number(m_list.salePrice).toFixed(2)}}{{tmp_listPrice}}</p>
							<p><del>¥{{#var tmp_marketPrice=Number(m_list.marketPrice).toFixed(2)}}{{tmp_marketPrice}}</del></p>
						</td>
						<td>
							<p class="quantity" style="line-height:24px;padding-right:3px;">{{m_list.goodsAmount}}</p>
						</td>
                        <td class="goodsDiscount">
                            <div>
                                {{# var goodsDiscountAmount=Number(m_list.salePrice-m_list.specPrice).toFixed(2)}}
                              	  ￥{{goodsDiscountAmount}}
                            </div>
                        </td>
                        <td>
                            {{# specPriceAmount=Number(m_list.specPrice*m_list.goodsAmount).toFixed(2)}}
                            <div class="goodsPrice">￥{{specPriceAmount}}</div>
                        </td>
                        <td class="cart-goods-operation">
                            <div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.postID}});" style="text-decoration:none;">收藏</a>
							</div>
							<div class="relative">
								<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'请确认是否要删除定制商品？');" style="text-decoration:none;">删除</a>
								<div class="absolute hide">
									<p></p>
									<a onclick="custom_cart.delConfirm('{{m_list.postID}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
									<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
								</div>
							</div>
						</td>
					</tr>
					
					{{# layui.each(m_list.slave , function(slave_k, s_list){ }}
						<tr>
							<td style="border-top:none;">&nbsp;</td>
							<td style="border-top:none;position:relative;text-align:left;">
								<div style="border-left:1px solid #EA7B5A;position:absolute;left:31px;top:-30px;height:58px;">&nbsp;</div>
								<div>
                                    <img src="{{s_list.imgLink}}" alt="{{s_list.goodsName}}" class="item" />
								</div>
							</td>
							<td class="cartGoodsName" style="border-top:none;">
								<span>
									<div>
										<font class="new-bgcolor">【定制服务费】</font>&nbsp;&nbsp;{{s_list.goodsName}}
									</div>
									<div style="margin-top:8px;">
										定制号码：{{s_list.extend.number}}
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
										{{# if (s_list.extend.type == 1){ }}
											明星：{{s_list.extend.name}}
										{{# }else{ }}
											定制姓名：{{s_list.extend.name}}
										{{# } }}
									</div>
								</span>
							</td>
							<td style="border-top:none;">&nbsp;</td>
							<td style="border-top:none;">
								<p class="cartMarketPrice">¥{{# var tmp_s_price= Number(s_list.salePrice).toFixed(2)}} {{tmp_s_price}}</p>
								<p><del>¥{{# var tmp_sm_price =Number(s_list.marketPrice).toFixed(2)}}{{tmp_sm_price}}</del></p>
							</td>
							<td style="border-top:none;">
								<p class="quantity">
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="custom_cart.update({{m_list.postID}}, -1, '{{s_list.extend.name}}', '{{s_list.extend.number}}', {{s_list.extend.type}}, '{{slave_k}}');">-</a>
									<input type="text" id="customBuy_{{slave_k}}" pid="{{m_list.postID}}" star="{{s_list.extend.name}}" num="{{s_list.extend.number}}" genre="{{s_list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{s_list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="custom_cart.update({{m_list.postID}}, 1, '{{s_list.extend.name}}', '{{s_list.extend.number}}', {{s_list.extend.type}}, '{{slave_k}}');">+</a>
								</p>
							</td>
                            <td class="goodsDiscount" style="border-top:none;">
                                <div>
                                    {{# var goodsDiscountAmount = Number(s_list.salePrice-s_list.specPrice).toFixed(2)}}
                                   	 ￥{{goodsDiscountAmount}}
                                </div>
                            </td>
                            <td style="border-top:none;">
                                {{# var specPriceAmount = Number(s_list.specPrice * s_list.goodsAmount).toFixed(2) }}
                                <div class="goodsPrice">￥{{specPriceAmount}}</div>
                            </td>
							<td class="cart-goods-operation" style="border-top:none;">
                                <div class="collect">
									<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{s_list.postID}});" style="text-decoration:none;">收藏</a>
								</div>
								<div class="relative">
									<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'请确认是否要删除定制服务？');" style="text-decoration:none;">删除</a>
									<div class="absolute hide" >
										<p></p>
										<a onclick="custom_cart.del({{m_list.postID}}, {{s_list.goodsAmount}}, '{{s_list.extend.name}}', '{{s_list.extend.number}}', {{s_list.extend.type}}, {{s_list.postID}});" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
										<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
									</div>
								</div>
							</td>
						</tr>
					{{#  }) }}
				{{#  }) }}
                <tr>
                    <td colspan="9" style="height: 50px; line-height: 50px; text-align: left; position: relative;">
                        <span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
                            <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
                        </span>
                        <span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">定制</span>
                        <span style="margin-left:6px; font-size:13px; color: #EE2737;">以上为定制商品</span>
                    </td>
                </tr>
			</tbody>
		{{# } }}


        <!--复古套装-->
        {{# if (d.cart.retroGroup || d.cart.retrogeneralGroup ){ }}
        	{{# if (d.cart.retroGroup){ }}
		    	{{#	layui.each(d.cart.retroGroup , function(k , m_list){ }}
					<tr>
						<td>
							{{# if(m_list.chkFlg == 1){ }}
								<span class="checkboxSpan alCheck" name="chkGoods" flg="3" pid="{{k}}"></span>
							{{# }else { }}
								<span class="checkboxSpan unCheck" name="chkGoods" flg="3" pid="{{k}}"></span>
							{{# } }}
						</td>
						<td class="textLeft">
							<a href="{{m_list.link}}?intcmp=cartproduct" title="{{m_list.goodsName}}" target="_blank">
								<img src="{{m_list.imgLink}}" alt="{{m_list.goodsName}}" class="item" />
							</a>
						</td>
						<td class="cartGoodsName">
							<a href="{{m_list.link}}?intcmp=cartproduct" target="_blank">
								<font class="new-bgcolor">【复古套装】</font>{{m_list.goodsName}}
							</a>
						</td>
						<td>
							<div class="goodsSpec">{{m_list.goods_color}}</div>
							<div class="goodsSpec">尺码：{{m_list.goods_size}}</div>
						</td>
						<td>
							<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(m_list.specPrice).toFixed(2) } }} {{ fn() }} </p>
							<p><del>¥{{# var fn=function(){ return Number(m_list.marketPrice).toFixed(2) } }} {{ fn() }} </del></p>
						</td>
						<td>
							<p class="quantity">
								<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="retro_cart.update({{m_list.postID}}, '-', '{{m_list.custom.name}}', '{{m_list.custom.number}}');">-</a>
								<input type="text" id="retroBuy_{{m_list.postID}}" pid="{{m_list.postID}}" star="{{m_list.custom.name}}" num="{{m_list.custom.number}}" name="buy_quantity" class="input_quantity" value="{{m_list.goodsAmount}}" />
								<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="retro_cart.update({{m_list.postID}}, '+', '{{m_list.custom.name}}', '{{m_list.custom.number}}');">+</a>
							</p>
						</td>
						<td class="goodsDiscount">
							<div>
									￥{{# var fn=function(){ return Number(m_list.spreadPrice).toFixed(2) } }} {{ fn() }} 
							</div>
						</td>
						<td>
							{{#var specPriceAmount = Number(m_list.specPrice*m_list.goodsAmount).toFixed(2)}}
							<div class="goodsPrice">￥{{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation">
							<div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.postID}});" style="text-decoration:none;">收藏</a>
							</div>
							<div class="relative">
								<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'请确认是否要删除此复古套装？');" style="text-decoration:none;">删除</a>
								<div class="absolute hide">
									<p></p>
									<a onclick="retro_cart.delConfirm('{{m_list.postID}}','{{m_list.virtualPostID}}','custom');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
									<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
								</div>
							</div>
						</td>
					</tr>
			
					<tr>
						<td style="border-top:none;">&nbsp;</td>
						<td style="border-top:none;position:relative;text-align:left;">
							<div style="border-left:1px solid #EA7B5A;position:absolute;left:31px;top:-30px;height:58px;">&nbsp;</div>
							<div>
								<a href="{{m_list.custom.link}}?intcmp=cartproduct" title="{{m_list.custom.goodsName}}" target="_blank"><img src="{{m_list.custom.imgLink}}" alt="{{m_list.custom.goodsName}}" class="item" /></a>
							</div>
						</td>
						<td class="cartGoodsName" style="border-top:none;">
						<span>
							<div>
								<a href="{{m_list.custom.link}}?intcmp=cartproduct" target="_blank">
									<font class="new-bgcolor">【复古套装】</font>{{m_list.custom.goodsName}}
								</a>
							</div>
							<div style="margin-top:8px;">
									定制号码：{{m_list.custom.number}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;定制姓名：{{m_list.custom.name}}
							</div>
						</span>
						</td>
						<td style="border-top:none;">
							<div class="goodsSpec">{{m_list.custom.goods_color}}</div>
							<div class="goodsSpec">尺码：{{m_list.custom.goods_size}}</div>
						</td>
						<td style="border-top:none;">
							<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(m_list.custom.specPrice).toFixed(2) } }} {{ fn() }}</p>
							<p><del>¥ {{# var fn=function(){ return Number(m_list.custom.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
						</td>
						<td style="border-top:none;">
							<!-- <div class="quantity" style="line-height:24px;padding-right:3px;">{{m_list.custom.goodsAmount}}</div> -->
						</td>
						<td class="goodsDiscount" style="border-top:none;">
							<div>
								 ￥{{# var fn=function(){ return Number(m_list.custom.spreadPrice).toFixed(2) } }} {{ fn() }}
							</div>
						</td>
						<td style="border-top:none;">
							{{# var specPriceAmount = Number(m_list.custom.specPrice*m_list.goodsAmount).toFixed(2)}}
							<div class="goodsPrice">￥{{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation" style="border-top:none;">
							<div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.custom.postID}});" style="text-decoration:none;">收藏</a>
							</div>
						</td>
					</tr>
			
					<tr>
						<td style="border-top:none;">&nbsp;</td>
						<td style="border-top:none;position:relative;text-align:left;">
							<div style="border-left:1px solid #EA7B5A;position:absolute;left:31px;top:-30px;height:58px;">&nbsp;</div>
							<div>
								<a href="{{m_list.gift.link}}?intcmp=cartproduct" title="{{m_list.gift.goodsName}}" target="_blank"><img src="{{m_list.gift.imgLink}}" alt="{{m_list.gift.goodsName}}" class="item" /></a>
							</div>
						</td>
						<td class="cartGoodsName" style="border-top:none;">
						<span>
							<div>
								<a href="{{m_list.gift.link}}?intcmp=cartproduct" target="_blank">
									<font class="new-bgcolor">【复古套装】</font>{{m_list.gift.goodsName}}
								</a>
							</div>
						</span>
						</td>
						<td style="border-top:none;">
							<div class="goodsSpec">{{m_list.gift.goods_color}}</div>
							<div class="goodsSpec">尺码：{{m_list.gift.goods_size}}</div>
						</td>
						<td style="border-top:none;">
							<p class="cartMarketPrice">¥ {{# var fn=function(){ return Number(m_list.gift.specPrice).toFixed(2) } }} {{ fn() }}</p>
							<p><del>¥ {{# var fn=function(){ return Number(m_list.gift.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
						</td>
						<td style="border-top:none;">
							<!-- <div class="quantity" style="line-height:24px;padding-right:3px;">{{m_list.goodsAmount}}</div> -->
						</td>
						<td class="goodsDiscount" style="border-top:none;">
							<div>
								   ￥{{# var fn=function(){ return Number(m_list.gift.spreadPrice).toFixed(2) } }} {{ fn() }}
							</div>
						</td>
						<td style="border-top:none;">
							{{# var specPriceAmount= Number(m_list.gift.specPrice*m_list.goodsAmount).toFixed(2) }}
							<div class="goodsPrice">￥{{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation" style="border-top:none;">
							<div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.gift.postID}});" style="text-decoration:none;">收藏</a>
							</div>
						</td>
					</tr>
				{{# }) }}
			{{# } }}
			
			<!--复古套装普通商品-->
			{{# if (d.cart.retrogeneralGroup && $.isEmptyObject(d.cart.retrogeneralGroup) != true ) { }}
				{{# layui.each(d.cart.retrogeneralGroup, function(k , m_list){ }}
					<tr>
						<td>
							{{# if(m_list.chkFlg == 1) { }}
								<span class="checkboxSpan alCheck" name="chkGoods" flg="4" pid="{{k}}"></span>
							{{# }else { }}
								<span class="checkboxSpan unCheck" name="chkGoods" flg="4" pid="{{k}}"></span>
							{{# } }}
						</td>
						<td class="textLeft">
							<a href="{{m_list.link}}?intcmp=cartproduct" title="{{m_list.goodsName}}" target="_blank">
								<img src="{{m_list.imgLink}}" alt="{{m_list.goodsName}}" class="item" />
							</a>
						</td>
						<td class="cartGoodsName">
							<a href="{{m_list.link}}?intcmp=cartproduct" target="_blank">
								<font class="new-bgcolor">【复古套装】</font>{{m_list.goodsName}}
							</a>
						</td>
						<td>
							<div class="goodsSpec">{{m_list.goods_color}}</div>
							<div class="goodsSpec">尺码：{{m_list.goods_size}}</div>
						</td>
						<td>
							<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(m_list.specPrice).toFixed(2) } }} {{ fn() }}</p>
							<p><del>¥{{# var fn=function(){ return Number(m_list.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
						</td>
						<td>
							<p class="quantity">
								<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="retro_cart2.update({{m_list.postID}}, '-', '{{m_list.custom.name}}', '{{m_list.custom.number}}');">-</a>
								<input type="text" id="retroBuy2_{{m_list.postID}}" pid="{{m_list.postID}}" star="{{m_list.custom.name}}" num="{{m_list.custom.number}}" name="buy_quantity" class="input_quantity" value="{{m_list.goodsAmount}}" />
								<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="retro_cart2.update({{m_list.postID}}, '+', '{{m_list.custom.name}}', '{{m_list.custom.number}}');">+</a>
							</p>
						</td>
						<td class="goodsDiscount">
							<div>
								  ￥{{# var fn=function(){ return Number(m_list.spreadPrice).toFixed(2) } }} {{ fn() }}
							</div>
						</td>
						<td>
							{{# var specPriceAmount=Number(m_list.specPrice*m_list.goodsAmount).toFixed(2) }}
							<div class="goodsPrice">￥ {{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation">
							<div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.postID}});" style="text-decoration:none;">收藏</a>
							</div>
							<div class="relative">
								<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'请确认是否要删除此复古套装？');" style="text-decoration:none;">删除</a>
								<div class="absolute hide">
									<p></p>
									<a onclick="retro_cart2.delConfirm('{{m_list.postID}}','{{m_list.virtualPostID}}','general');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
									<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
								</div>
							</div>
						</td>
					</tr>
			
					<tr>
						<td style="border-top:none;">&nbsp;</td>
						<td style="border-top:none;position:relative;text-align:left;">
							<div style="border-left:1px solid #EA7B5A;position:absolute;left:31px;top:-30px;height:58px;">&nbsp;</div>
							<div>
								<a href="{{m_list.custom.link}}?intcmp=cartproduct" title="{{m_list.custom.goodsName}}" target="_blank"><img src="{{m_list.custom.imgLink}}" alt="{{m_list.custom.goodsName}}" class="item" /></a>
							</div>
						</td>
						<td class="cartGoodsName" style="border-top:none;">
						<span>
							<div>
								<a href="{{m_list.custom.link}}?intcmp=cartproduct" target="_blank">
									<font class="new-bgcolor">【复古套装】</font>{{m_list.custom.goodsName}}
								</a>
							</div>
						</span>
						</td>
						<td style="border-top:none;">
							<div class="goodsSpec">{{m_list.custom.goods_color}}</div>
							<div class="goodsSpec">尺码：{{m_list.custom.goods_size}}</div>
						</td>
						<td style="border-top:none;">
							<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(m_list.custom.specPrice).toFixed(2) } }} {{ fn() }}</p>
							<p><del>¥{{# var fn=function(){ return Number(m_list.custom.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
						</td>
						<td style="border-top:none;">
							<!-- <div class="quantity" style="line-height:24px;padding-right:3px;">{{m_list.custom.goodsAmount}}</div> -->
						</td>
						<td class="goodsDiscount" style="border-top:none;">
							<div>
								  ￥{{# var fn=function(){ return Number(m_list.custom.spreadPrice).toFixed(2) } }} {{ fn() }}
							</div>
						</td>
						<td style="border-top:none;">
							{{# var specPriceAmount = Number(m_list.custom.specPrice*m_list.goodsAmount).toFixed(2) }}
							<div class="goodsPrice">￥{{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation" style="border-top:none;">
							<div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.custom.postID}});" style="text-decoration:none;">收藏</a>
							</div>
						</td>
					</tr>
			
					<tr>
						<td style="border-top:none;">&nbsp;</td>
						<td style="border-top:none;position:relative;text-align:left;">
							<div style="border-left:1px solid #EA7B5A;position:absolute;left:31px;top:-30px;height:58px;">&nbsp;</div>
							<div>
								<a href="{{m_list.gift.link}}?intcmp=cartproduct" title="{{m_list.gift.goodsName}}" target="_blank"><img src="{{m_list.gift.imgLink}}" alt="{{m_list.gift.goodsName}}" class="item" /></a>
							</div>
						</td>
						<td class="cartGoodsName" style="border-top:none;">
						<span>
							<div>
								<a href="{{m_list.gift.link}}?intcmp=cartproduct" target="_blank">
									<font class="new-bgcolor">【复古套装】</font>{{m_list.gift.goodsName}}
								</a>
							</div>
						</span>
						</td>
						<td style="border-top:none;">
							<div class="goodsSpec">{{m_list.gift.goods_color}}</div>
							<div class="goodsSpec">尺码：{{m_list.gift.goods_size}}</div>
						</td>
						<td style="border-top:none;">
							<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(m_list.gift.specPrice).toFixed(2) } }} {{ fn() }} </p>
							<p><del>¥{{# var fn=function(){ return Number(m_list.gift.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
						</td>
						<td style="border-top:none;">
							<!-- <div class="quantity" style="line-height:24px;padding-right:3px;">{{m_list.goodsAmount}}</div> -->
						</td>
						<td class="goodsDiscount" style="border-top:none;">
							<div>
									￥{{# var fn=function(){ return Number(m_list.gift.spreadPrice).toFixed(2) } }} {{ fn() }}
							</div>
						</td>
						<td style="border-top:none;">
							{{# var specPriceAmount= Number(m_list.gift.specPrice * m_list.goodsAmount).toFixed(2) }}
							<div class="goodsPrice">￥{{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation" style="border-top:none;">
							<div class="collect">
								<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{m_list.gift.postID}});" style="text-decoration:none;">收藏</a>
							</div>
						</td>
					</tr>
				{{# }) }}
			{{# } }}
			<tr>
				<td colspan="9" style="height: 50px; line-height: 50px; text-align: left; position: relative;">
					<span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
						<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
					</span>
					<span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">套装</span>
					<span style="margin-left:6px; font-size:13px; color: #EE2737;">以上为复古套装商品</span>
				</td>
			</tr>
		</tbody>
			
        {{# } }}

		<!--普通商品的买赠商品-->
		{{# if (d.goodsGift) { }}
			<tbody>
				{{# layui.each(d.goodsGift , function(k , list){ }}
					<tr>
						<td>
							{{# if (list.chkFlg == 1) { }}
                                <span class="checkboxSpan alCheck" name="chkGoods" flg="1" pid="{{list.postID}}"></span>
							{{# } else { }}
                                <span class="checkboxSpan unCheck" name="chkGoods" flg="1" pid="{{list.postID}}"></span>
							{{# } }}
						</td>
						<td class="textLeft">
							<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank"><img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" /></a>
						</td>
						<td class="cartGoodsName">
                            {{# if (list.extend.type == 4){ }}
                                <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                    <font class="new-bgcolor">【积分商品】</font>&nbsp;&nbsp;{{list.goodsName}}
                                </a>
                            {{# } else { }}
                                <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                    {{list.goodsName}}
                                </a>
                            {{# } }}
						</td>
                        <td>
                            <div class="goodsSpec">{{list.goods_color}}</div>
                            <div class="goodsSpec">尺码：{{list.goods_size}}</div>
                        </td>
						<td>
							<div class="cartMarketPrice">¥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{fn()}}</div>
							<p><del>¥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{fn()}}</del></p>
						</td>
						<td>
							<p class="quantity">
								{{# if (list.extend.type == 4) { }}
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
									<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
								{{# }else if (list.extend.type == 3){ }}
									<!--2012-07-13康加上虚拟商品购物-->
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
									<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
								{{# } else if (list.extend.type == 5){ }}
									<p class="quantity" style="line-height:24px;padding-right:3px;">{{list.goodsAmount}}</p>
								{{# } else { }}
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}',-1,1);return false;">-</a>
									<input type="text" id="buy_{{list.postID}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}',1,1);return false;">+</a>
								{{# } }}
							</p>
						</td>
                        <td class="goodsDiscount">
                            <div>
                                {{# var goodsDiscountAmount= Number(list.salePrice-list.specPrice).toFixed(2)}}
                              	  ￥{{#goodsDiscountAmount}}
                            </div>
                        </td>
                        <td>
                            {{# var specPriceAmount=Number(list.specPrice*list.goodsAmount).toFixed(2)}}
                            <div class="goodsPrice">￥{{specPriceAmount}}</div>
                        </td>
                        <td class="cart-goods-operation">
							{{# if (list.extend.type != 3) { }}
                                <div class="collect">
									<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{list.postID}});" style="text-decoration:none;">收藏</a>
								</div>
							{{# } }}
							<div class="relative">
								<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该商品？');" style="text-decoration:none;">删除</a>
								<div class="absolute hide" >
									<p></p>
									<a onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-{{list.goodsAmount}},0);addOmniture('{{list.product_code}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
									<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
								</div>
							</div>
						</td>
					</tr>
					
                    <tr>
                        <td colspan="9" style="height: auto;position: relative;text-align: left;padding-bottom: 12px;border-top:none;">
                            {{# if (list.giftCount) { }}
								{{# layui.each(list.giftCount , function(k , gift_list){ }}
                                    <!--1级赠品-->
                                    {{# if (gift_list.flg == 1) { }}
                                        <div class="giftinfo_{{list.postID}}" style="position: relative;">
                                            <div class="cartGiftGoodsName" style="margin: 10px 0 0 62px;padding:0;">
                                            	{{# var arrs = ""}}
												{{# layui.each(gift_list.color , function(k , tmpArrs){ }}  
													{{# arrs = tmpArrs}}
												{{# }) }}
												
												{{# var arrys = ""}}
												{{# layui.each(arrs.size , function(k , tmpArrys){ }} 
													{{# arrys = tmpArrys}}
												{{# }) }}
												
                                                {{# if (list.chkFlg == 1) { }}
                                                    <span class="checkboxSpan alCheck" name="checkgift" flg="2" value="{{list.postID}}_{{arrs.postID}}_" id="{{list.postID}}" style="display:none;"></span>
                                                {{# } else { }}
                                                    <span class="checkboxSpan unCheck" name="checkgift" flg="2" value="{{list.postID}}_{{arrs.postID}}_" id="{{list.postID}}" style="display:none;"></span>
                                                {{# } }}
                                                <span style="display:inline-block;">
                                                    <img id ="img_{{list.postID}}_{{arrs.product_mainID}}" src="{{arrs.imgLink}}" style="width:35px;height:35px;vertical-align:middle;">
                                                </span>
                                                <span id = "name_{{list.postID}}_{{arrs.product_mainID}}" class="{{list.postID}}_{{arrs.postID}}" style="display:inline-block;width:290px;word-break:break-all;word-wrap:break-word;line-height:14px;margin-left:14px;">
                                                    <span class="new-bgcolor">【赠品】</span>
                                                    <span>{{arrys.goodsName}}</span>
                                                    <span class="new-bgcolor" style="padding-left:5px;">×{{arrys.goodsAmount*list.goodsAmount}}</span>
                                                </span>
                                                <span class="giftgoods-spec" style="display: inline-block;margin-left: 62px;min-width: 110px;text-overflow:ellipsis;">
                                                    <p class="g-s-color">&nbsp;</p>
                                                    <p class="g-s-size" style="margin-top:2px;">&nbsp;</p>
                                                </span>
                                                <span class="giftspec-select" onclick="goodsGiftShow(this);">规格选择</span>
                                            </div>
                                            <div class="cartGiftGoodsSelect" style="margin: 22px 0 0 66px;display: none;">
                                                <div class="cartGiftAllColor">
                                                    <span>选择颜色</span>
                                                    <div style="width: 230px;word-break:break-all;word-wrap:break-word;margin-top: 10px;">
                                                    	{{# var tmpLines=""}}
                                                    	{{# var two_product_code =""}}
                                                    	{{# layui.each(gift_list.color , function(k , lines){ }}
                                                    		{{# tmpLines=lines}}
                                                    		{{# two_product_code = k}}
                                                            {{# if (lines.postID == arrs.postID) { }}
                                                                <span onclick="checkSelect(this);" value="{{list.postID}}_{{lines.postID}}" name="color" class="cartGiftselectColor" style="cursor: pointer;display:inline-block;">
                                                            {{# } else { }}
                                                                <span onclick="checkSelect(this);" value="{{list.postID}}_{{lines.postID}}" name="color" class="cartGiftNoselectColor" style="cursor: pointer;display:inline-block;">
                                                            {{# } }}
                                                            <img src="{{lines.imgLink}}" width="40px" height="40px" title="{{lines.spec}}">
                                                            </span>
                                                   	 	{{# }); }}
                                                    </div>
                                                </div>
                                                <div class="cartGiftAllSize">
                                                    <span>选择尺码</span>
                                                    <div id="size_{{list.postID}}_{{tmpLines.product_mainID}}" style="width: 230px;word-break:break-all;word-wrap:break-word;margin-top: 10px;">
                                                        {{# layui.each(tmpLines.size , function(tk , line){ }}
	                                                        {{# if (line.two_product_code==two_product_code) { }}
	                                                        	<span onclick="checkSelects(this);" name="size" value="{{line.postID}}" class="cartGiftNoselectColor" style="padding: 4px;text-align: center;display:inline-block;margin: 0 1px 4px 0;cursor: pointer;">{{line.goods_size}}</span>
	                                                        {{# } }}
                                                        {{# }) }}
                                                    </div>
                                                </div>
                                                <div style="margin-top: 24px; margin-left: 12px;">
                                                    <a href="javascript:void(0);" style="width: 71px;height: 28px;line-height: 28px;color: #fff;background: #EE2737;text-align: center;display: inline-block;" onclick="goodsGiftSelectConfirm(this);">确定</a>
                                                </div>
                                            </div>
                                        </div>
                                    {{# } }}

                                    <!--2级赠品-->
                                    {{# if (gift_list.flg==2) { }}
                                        <div class="giftinfo_{{list.postID}}" style="position: relative;">
                                            <div class="cartGiftGoodsName" style="margin: 10px 0 0 62px;padding:0;">
                                            	{{# var arr=""}}
												{{# layui.each(gift_list.size , function(k , tmpArr){ }} 
													{{# arr=tmpArr}}
												{{# }) }}
												
                                                {{# if (list.chkFlg == 1) { }}
                                                    <span class="checkboxSpan alCheck" name="checkgift" flg="2" value="{{list.postID}}_{{arr.twoPostID}}_" id="{{list.postID}}" style="display:none;"></span>
                                                {{# } else { }}
                                                    <span class="checkboxSpan unCheck" name="checkgift" flg="2" value="{{list.postID}}_{{arr.twoPostID}}_" id="{{list.postID}}" style="display:none;"></span>
                                                {{# } }}
                                                <span style="display:inline-block;">
                                                    <img src="{{arr.imgLink}}" style="width:35px;height:35px;vertical-align:middle;">
                                                </span>
                                                <span class="{{list.postID}}_{{arr.twoPostID}}" style="display:inline-block;width:290px;word-break:break-all;word-wrap:break-word;line-height:14px;margin-left:14px;">
                                                    <span class="new-bgcolor">【赠品】</span>
                                                    <span>{{arr.goodsName}}</span>
                                                    <span class="new-bgcolor" style="padding-left:5px;">×{{arr.goodsAmount * list.goodsAmount}}</span>
                                                </span>
                                                <span class="giftgoods-spec" style="display: inline-block;margin-left: 62px;min-width: 110px;text-overflow:ellipsis;">
                                                    <p class="g-s-color">&nbsp;</p>
                                                    <p class="g-s-size" style="margin-top:2px;">&nbsp;</p>
                                                </span>
                                                <span class="giftspec-select" onclick="goodsGiftShow(this);">规格选择</span>
                                            </div>

                                            <div class="cartGiftGoodsSelect" style="margin: 22px 0 0 66px;display: none;">
                                                <div class="cartGiftAllColor">
                                                    <span>选择颜色</span>
                                                    <div style="width: 230px;word-break:break-all;word-wrap:break-word;margin-top: 10px;">
                                                        <span name="color" class="cartGiftselectColor" style="display:inline-block;">
                                                            <img src="{{arr.imgLink}}" width="40px" height="40px" title="{{arr.goods_color}}">
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="cartGiftAllSize">
                                                    <span>选择尺码</span>
                                                    <div id="parent_category" name="parent_category" style="width: 230px;word-break:break-all;word-wrap:break-word;margin-top: 10px;">
                                                        {{# layui.each(gift_list.size , function(k , line){ }}
                                                        	<span onclick="checkSelects(this);" name="size" value="{{line.postID}}" class="cartGiftNoselectColor" style="padding: 4px;text-align: center;display:inline-block;margin: 0 1px 4px 0;cursor: pointer;">{{line.goods_size}}</span>
                                                        {{# }); }}
                                                    </div>
                                                </div>
                                                <div style="margin-top: 24px; margin-left: 12px;">
                                                    <a href="javascript:void(0);" style="width: 71px;height: 28px;line-height: 28px;color: #fff;background: #EE2737;text-align: center;display: inline-block;" onclick="goodsGiftSelectConfirm(this);">确定</a>
                                                </div>
                                            </div>
                                        </div>
                                    {{# } }}

                                    <!--3级赠品-->
                                    {{# if (gift_list.flg==3) { }}
                                        <div class="giftinfo_{{list.postID}}" style="position: relative;">
                                            <div class="cartGiftGoodsName" style="margin: 10px 0 0 62px;padding:0;">
                                                {{# if (list.chkFlg == 1) { }}
                                                    <span class="checkboxSpan alCheck" name="checkgift" flg="2" value="{{list.postID}}_{{gift_list.twoPostID}}_{{gift_list.postID}}" id="{{list.postID}}" style="display:none;"></span>
                                                {{# } else { }}
                                                    <span class="checkboxSpan unCheck" name="checkgift" flg="2" value="{{list.postID}}_{{gift_list.twoPostID}}_{{gift_list.postID}}" id="{{list.postID}}" style="display:none;"></span>
                                                {{# } }}
                                                <span style="display:inline-block;">
                                                    <img src="{{gift_list.imgLink}}" style="width:35px;height:35px;vertical-align:middle;">
                                                </span>
                                                <span style="display:inline-block;width:290px;word-break:break-all;word-wrap:break-word;line-height:14px;margin-left:14px;">
                                                    <span class="new-bgcolor">【赠品】</span>
                                                    <span>{{gift_list.goodsName}}</span>
                                                    <span class="new-bgcolor" style="padding-left:5px;">×{{gift_list.goodsAmount * list.goodsAmount}}</span>
                                                </span>
                                                <span class="giftgoods-spec" style="display: inline-block;margin-left: 62px;min-width: 110px;text-overflow:ellipsis;">
                                                    <p class="g-s-color">{{gift_list.goods_color}}</p>
                                                    <p class="g-s-size" style="margin-top:2px;">尺码：{{gift_list.goods_size}}</p>
                                                </span>
                                            </div>
                                        </div>
                                    {{# } }}
                               {{# }); }}
                            {{# } }}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="9" style="height: auto;position: relative;text-align: left;">
                            <div style="height: 50px;line-height: 50px;text-align:left;">
                                <span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
                                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
                                </span>
                                <span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">买赠</span>
                                <span style="margin-left:6px; font-size:13px; color: #EE2737;">以上商品参加买赠活动，数量有限，赠完为止(已获得赠品)</span>
                            </div>
                        </td>
                    </tr>
				{{# }); }}
			</tbody>
		{{# } }}
		
		<!--新加钱换购-->
		{{#if (d.cart.persentBuy || jsonLength(d.cart.persentBuy)> 0) { }}
            {{# var giftSpecPrice=0 }}
			<tbody>
				{{# layui.each(d.cart.persentBuy, function(k_1 , list_1){ }}
                    {{# var giftSpecPrice=list_1.rule.goods[0].addPrice}}
					{{# layui.each(list_1.master , function(k , list){ }}
						<tr>
							<td>
								{{# if(list.chkFlg == 1) { }}
                                    <span class="checkboxSpan alCheck" name="chkGoods" flg="1" pid="{{k}}"></span>
								{{# }else{ }}
                                    <span class="checkboxSpan unCheck" name="chkGoods" flg="1" pid="{{k}}"></span>
								{{# } }}
							</td>
							<td class="textLeft">
								<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank"><img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" /></a>
							</td>
							<td class="cartGoodsName">
                                <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                    {{list.goodsName}}
                                </a>
							</td>
							<td>
                                <div class="goodsSpec">{{list.goods_color}}</div>
                                <div class="goodsSpec">尺码：{{list.goods_size}}</div>
                            </td>
							<td>
								<p>¥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{ fn() }}</p>
								<p><del>¥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
							</td>
							<td>
                                <div class="quantity">
                                    <a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}',-1,1);return false;">-</a>
                                    <input type="text" id="buy_{{list.postID}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
                                    <a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}',1,1);return false;">+</a>
                                </div>
							</td>
                            <td class="goodsDiscount">
                                <div>
                                	{{# var goodsDiscountAmount=Number(list.salePrice * list.goodsAmount - list.specPrice * list.goodsAmount).toFixed(2)}}
                                    ¥{{goodsDiscountAmount}}
                                </div>
							</td>
							<td>
                                {{# var specPriceAmount = Number(list.specPrice * list.goodsAmount).toFixed(2)}}
                                <div class="goodsPrice">¥{{specPriceAmount}}</div>
                            </td>
							<td>
								{{# if( list.extend.type != 3) { }}
									<div style="margin-bottom:4px;">
										<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{list.postID}});" style="text-decoration:none;">收藏</a>
									</div>
								{{# } }}
								<div class="relative">
									<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该商品？');" style="text-decoration:none;">删除</a>
									<div class="absolute hide" >
										<p></p>
										<a onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-{{list.goodsAmount}},0);addOmniture('{{list.product_code}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
										<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
									</div>
								</div>
							</td>
						</tr>
					{{# }) }}
					
					{{# if(list_1.slave && jsonLength(list_1.slave) > 0) { }}					
						{{# layui.each(list_1.slave , function(k , list){ }}
                            {{# var giftSpecPrice=list.specPrice}}
							{{# if(list_1.rule.persentTotalPrice >= list.persentMinPrice) { }}
								<tr>
									<td>&nbsp;</td>
							{{# }else{ }}
								<tr style="background-color:#EFEFEF;">
									<td>
										<div style="width:40px;height:20px;line-height:20px;background:#bab8b8;border-radius:4px;font-size:12px;">不满足</div>
									</td>
							{{# } }}
								
								<td class="textLeft">
									<img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" />
								</td>
								<td class="cartGoodsName">
									<a href="javascript:void(0);">
										<font class="new-bgcolor">{{# if( list.specPrice > 0) { }}【加钱换购】{{# }else{ }}【满赠】{{# } }}</font> {{list.goodsName}}
									</a>
								</td>
                                <td>
                                    <div class="goodsSpec">{{list.goods_color}}</div>
                                    <div class="goodsSpec">尺码：{{list.goods_size}}</div>
                                </td>
								<td>
									<p>¥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{ fn() }}</p>
									<p><del>¥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
								</td>
								<td>
									<p style="padding-right:3px;">{{list.goodsAmount}}</p>
								</td>
                                <td class="goodsDiscount">
                                    <div>
                                        {{# var goodsDiscountAmount=Number(list.salePrice - list.specPrice).toFixed(2) }}
                                        ¥{{goodsDiscountAmount}}
                                    </div>
                                </td>
								<td>
                                    <div class="goodsPrice">¥{{# var fn=function(){ return Number(list.specPrice).toFixed(2) } }} {{ fn() }}</div>
                                </td>
								<td>
									<div class="relative">
										<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该换购商品？');" style="text-decoration:none;">删除</a>
										<div class="absolute hide" >
											<p></p>
											<a onclick="persentBuy.update('{{list_1.rule.centerID}}','{{k}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
											<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
										</div>
									</div>
								</td>
							</tr>
						{{#  }) }}
					{{# } }}
	        		<tr>
						<td colspan="9" style="height: 50px; line-height: 50px; text-align: left; position: relative;">
                            <span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
                                <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
                            </span>
                            {{# if( giftSpecPrice > 0) { }}
                                <span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">加钱换购</span>
                                <span style="margin-left:6px; font-size:13px; color: #EE2737;">以上商品参加加钱换购活动</span>
                                <span style="border-radius: 0 15px 15px 0;display:inline-block;background-color:#EE2737;color:#fff;cursor:pointer;margin-left:12px;font-size:13px;width: 84px; height: 28px; line-height: 28px; text-align: center;" onclick="persentBuy.buy('{{list_1.rule.centerID}}', '{{list_1.rule.persentTotalPrice}}');">换购商品 ></span>
                            {{# }else{ }}
                                <span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">满赠</span>
                                <span style="margin-left:6px; font-size:13px; color: #EE2737;">以上商品参加满赠活动</span>
                                <span style="border-radius: 0 15px 15px 0;display:inline-block;background-color:#EE2737;color:#fff;cursor:pointer;margin-left:12px;font-size:13px;width: 84px; height: 28px; line-height: 28px; text-align: center;" onclick="persentBuy.buy('{{list_1.rule.centerID}}', '{{list_1.rule.persentTotalPrice}}');">选择赠品 ></span>
                            {{# } }}
						</td>
					</tr>

				{{#  }) }}
			</tbody>
		{{# } }}

		<!--普通商品的多买多折-->
		{{# if(d.foldUltimate && jsonLength(d.foldUltimate) > 0) { }}
			<tbody>
				{{# layui.each(d.foldUltimate , function(k_1 , list_1){ }}
					{{# layui.each(list_1.show , function(k , list){ }}
						<tr>
							<td>
								{{# if(list.chkFlg == 1){ }}
                                    <span class="checkboxSpan alCheck" name="chkGoods" flg="1" pid="{{k}}"></span>
								{{# } else{ }}
                                    <span class="checkboxSpan unCheck" name="chkGoods" flg="1" pid="{{k}}"></span>
								{{# } }}
							</td>
							<td class="textLeft">
								<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank"><img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" /></a>
							</td>
							<td class="cartGoodsName">
                                {{# if(list.extend.type == 4) { }}
                                    <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                        <font class="new-bgcolor"【积分商品】</font>&nbsp;&nbsp;{{list.goodsName}}
                                    </a>
                                {{# } else{ }}
                                    <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                        {{list.goodsName}}
                                    </a>
                                {{# } }}
							</td>
                            <td>
                                <div class="goodsSpec">{{list.goods_color}}</div>
                                <div class="goodsSpec">尺码：{{list.goods_size}}</div>
                            </td>
							<td>
								<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{ fn() }}</p>
								<p><del>¥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
							</td>
							<td>
								<p class="quantity">
									{{# if(list.extend.type == 4) { }}
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
									{{# } else if (list.extend.type == 3) { }}
										<!--2012-07-13康加上虚拟商品购物-->
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
									{{# } else if (list.extend.type == 5) { }}
										<p class="quantity" style="line-height:24px;padding-right:3px;">{{list.goodsAmount}}</p>
									{{# } else{ }}
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}',1,1);return false;">+</a>
									{{# } }}
								</p>
							</td>
                            <td class="goodsDiscount" style="position:relative;">
                                <div>
                                	{{# var goodsDiscountAmount=Number(list.salePrice * list.goodsAmount - list.specPrice * list.goodsAmount).toFixed(2) }}
                                   	 ￥{{goodsDiscountAmount}}
                                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u222.png" width="41px" height="22px" style="position:absolute;left:30px;top:26px;">
                                </div>
                            </td>
                            <td>
                                {{# var specPriceAmount=Number(list.specPrice * list.goodsAmount).toFixed(2) }}
                                <div class="goodsPrice">￥{{specPriceAmount}}</div>
                            </td>
                            <td class="cart-goods-operation">
								{{# if(list.extend.type != 3) {}}
                                <div class="collect">
										<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{list.postID}});" style="text-decoration:none;">收藏</a>
									</div>
								{{# } }}
								<div class="relative">
									<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该商品？');" style="text-decoration:none;">删除</a>
									<div class="absolute hide" >
										<p></p>
										<a onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-{{list.goodsAmount}},0);addOmniture('{{list.product_code}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
										<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
									</div>
								</div>
							</td>
						</tr>
					{{# }) }}
					
					{{# if(list_1.notice && d.totalPaid > 0) { }}
                        <tr>
                            <td colspan="9" style="height: 50px; line-height: 50px; text-align: left; position: relative;">
                                <span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
                                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
                                </span>
                                <span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">满折</span>
                                <span style="margin-left:6px; font-size:13px; color: #EE2737;">{{list_1.notice}}</span>
                                {{# if(list_1.actUrl) { }}
                                    <a href="{{list_1.actUrl}}" style="border-radius: 0 15px 15px 0;display:inline-block;background-color:#EE2737;color:#fff;cursor:pointer;margin-left:12px;font-size:13px;width: 84px; height: 28px; line-height: 28px; text-align: center;">查看活动 ></a>
                                {{# } }}
                            </td>
                        </tr>
	        		{{# } }}
				{{# }) }}
			</tbody>
		{{# } }}	
		
		<!--新订单立减-->
		{{# if(d.billSubstract && jsonLength(d.billSubstract) > 0) { }}
			<tbody>
				{{# layui.each(d.billSubstract , function(k_1 , list_1){ }}
					{{# layui.each(list_1.validGoods , function(k , list){ }}
						<tr>
							<td>
								{{# if (list.chkFlg == 1) { }}
                                    <span class="checkboxSpan alCheck" name="chkGoods" flg="1" pid="{{list.postID}}"></span>
								{{# }else{ }}
                                    <span class="checkboxSpan unCheck" name="chkGoods" flg="1" pid="{{list.postID}}"></span>
								{{# } }}
							</td>
							<td class="textLeft">
								<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank"><img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" /></a>
							</td>
							<td class="cartGoodsName">
                                {{# if (list.extend.type == 4) { }}
                                    <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                        <font class="new-bgcolor">【积分商品】</font>&nbsp;&nbsp;{{list.goodsName}}
                                    </a>
                                {{# }else{ }}
                                    <a href="{{list.link}}?intcmp=cartproduct" target="_blank">
                                        {{list.goodsName}}
                                    </a>
                                {{# } }}
							</td>
                            <td>
                                <div class="goodsSpec">{{list.goods_color}}</div>
                                <div class="goodsSpec">尺码：{{list.goods_size}}</div>
                            </td>
							<td>
								<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{ fn() }}</p>
								<p><del>¥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
							</td>
							<td>
								<p class="quantity">
									{{# if (list.extend.type == 4) { }}
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
									{{# }else if(list.extend.type == 3) { }}
										<!--2012-07-13康加上虚拟商品购物-->
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
									{{# }else if(list.extend.type == 5) { }}
										<p class="quantity" style="line-height:24px;padding-right:3px;">{{list.goodsAmount}}</p>
									{{# }else{ }}
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}',1,1);return false;">+</a>
									{{# } }}
								</p>
							</td>
                            <td class="goodsDiscount">
                                <div>
                                    {{# var goodsDiscountAmount=Number(list.salePrice-list.specPrice).toFixed(2)}}
                                  	  ￥{{goodsDiscountAmount}}
                                </div>
                            </td>
                            <td>
                                {{# var specPriceAmount= Number(list.specPrice * list.goodsAmount).toFixed(2) }}
                                <div class="goodsPrice">￥{{specPriceAmount}}</div>
                            </td>
                            <td class="cart-goods-operation">
								{{# if (list.extend.type != 3) { }}
                                <div class="collect">
										<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{list.postID}});" style="text-decoration:none;">收藏</a>
									</div>
								{{# } }}
								<div class="relative">
									<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该商品？');" style="text-decoration:none;">删除</a>
									<div class="absolute hide" >
										<p></p>
										<a onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-{{list.goodsAmount}},0);addOmniture('{{list.product_code}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
										<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
									</div>
								</div>
							</td>
						</tr>
					{{# }) }}
					{{# if (list_1.prompt && jsonLength(list_1.validGoods) > 0) { }}
                        <tr>
                            <td colspan="9" style="height: 50px; line-height: 50px; text-align: left; position: relative;">
                                <span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
                                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
                                </span>
                                <span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">立减</span>
                                <span style="margin-left:6px; font-size:13px; color: #EE2737;">{{list_1.prompt}}</span>
                                {{# if (list_1.nextDiffMoney > 0 && list_1.link) { }}
                                    <a href="{{list_1.link}}" style="border-radius: 0 15px 15px 0;display:inline-block;background-color:#EE2737;color:#fff;cursor:pointer;margin-left:12px;font-size:13px;width: 84px; height: 28px; line-height: 28px; text-align: center;">去凑单 ></a>
                                {{# } }}
                            </td>
                        </tr>
	        		{{# } }}
				{{# }) }}
			</tbody>
		{{# } }}
		
		<!--普通商品的预售商品-->
		{{# if(d.advance) { }}
			<tbody>
				{{# layui.each(d.advance , function(k , list){ }}
					{{# if(list.deliver_time && list.giftCount) { }}
					<tr>
						<td>
							{{# if(list.chkFlg == 1) { }}
								<span class="checkboxSpan alCheck" name="chkGoods" flg="1" pid="{{list.postID}}"></span>
							{{# }else{ }}
								<span class="checkboxSpan unCheck" name="chkGoods" flg="1" pid="{{list.postID}}"></span>
							{{# } }}
						</td>
						<td class="textLeft">
							<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank"><img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" /></a>
						</td>
						<td class="cartGoodsName">
							{{# if(list.extend.type == 4) { }}
								<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
									<font class="new-bgcolor">【积分商品】</font>&nbsp;&nbsp;{{list.goodsName}}
								</a>
							{{# }else{ }}
								<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
									{{list.goodsName}}
								</a>
							{{# } }}
						</td>
						<td>
							<div class="goodsSpec">{{list.goods_color}}</div>
							<div class="goodsSpec">尺码：{{list.goods_size}}</div>
						</td>
						<td>
							<p class="cartMarketPrice">¥{{# var fn=function(){ return Number(list.salePrice).toFixed(2) } }} {{ fn() }}</p>
							<p><del>¥{{# var fn=function(){ return Number(list.marketPrice).toFixed(2) } }} {{ fn() }}</del></p>
						</td>
						<td>
							<p class="quantity">
								{{# if(list.extend.type == 4) { }}
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
									<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
								{{# }else if(list.extend.type == 3) { }}
									<!--2012-07-13康加上虚拟商品购物-->
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
									<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
								{{# }else if(list.extend.type == 5) { }}
									<p class="quantity" style="line-height:24px;padding-right:3px;">{{list.goodsAmount}}</p>
								{{# }else{ }}
									<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}',-1,1);return false;">-</a>
									<input type="text" id="buy_{{list.postID}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
									<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}',1,1);return false;">+</a>
								{{# } }}
							</p>
						</td>
						<td class="goodsDiscount">
							<div>
								{{# var goodsDiscountAmount= Number(list.salePrice-list.specPrice).toFixed(2) }} ￥{{goodsDiscountAmount}}
							</div>
						</td>
						<td>
							{{# var specPriceAmount= Number(list.specPrice * list.goodsAmount).toFixed(2) }}
							<div class="goodsPrice">￥{{specPriceAmount}}</div>
						</td>
						<td class="cart-goods-operation">
							{{# if(list.extend.type != 3) { }}
								<div class="collect">
									<a href="javascript:void(0);" class="line" onclick="custom_cart.favorites({{list.postID}});" style="text-decoration:none;">收藏</a>
								</div>
							{{# } }}
							<div class="relative">
								<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该商品？');" style="text-decoration:none;">删除</a>
								<div class="absolute hide" >
									<p></p>
									<a onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-{{list.goodsAmount}},0);addOmniture('{{list.product_code}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
									<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
								</div>
							</div>
						</td>
					</tr>
					{{# } }}
				{{# }) }}
				<tr>
					<td colspan="9" style="height: 50px; line-height: 50px; text-align: left; position: relative;">
						<span style="position: absolute; left: -4px; top: 7px; display: inline-block;">
							<img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u100.png" width="4px" height="4px">
						</span>
						<span style="margin-left: -4px;display:inline-block;height:28px;line-height:28px;width:70px;color:#fff;font-size:13px;text-align:center;background:#EE2737;">预售</span>
						<span style="margin-left:6px; font-size:13px; color: #EE2737;">以上为预售商品</span>
					</td>
				</tr>
			</tbody>
		{{# } }}
		
		
		<!--普通商品-->
		{{#if (d.cart.general) { }}
			<tbody>
				{{# layui.each(d.cart.general , function(k , list){ }}

					{{# if (!list.giftCount && list.buyMoreFlg != 1  && list.extend != 3 && list.line_server != 1  && !list.deliver_time && list.persentFlg != 1 && list.minusFlg != 1) { }}

						<tr id="goods_unique_{{list.postID}}">
							<td>
								{{# if (list.chkFlg == 1) { }}
									<span class="checkboxSpan alCheck" name="chkGoods" flg="1" pid="{{k}}"></span>
								{{# } else { }}
									<span class="checkboxSpan unCheck" name="chkGoods" flg="1" pid="{{k}}"></span>
								{{# } }}
							</td>
							<td class="textLeft">
								<a href="{{list.link}}?intcmp=cartproduct" title="{{list.goodsName}}" target="_blank"><img src="{{list.imgLink}}" alt="{{list.goodsName}}" class="item" /></a>
							</td>
							<td class="cartGoodsName">
								{{# if (list.extend.type == 4) { }}
									<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
										<font class="new-bgcolor">【积分商品】</font>&nbsp;&nbsp;{{list.goodsName}}
									</a>
								{{# } else if (list.extend.type == 5) { }}
									<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
										<font class="new-bgcolor">【礼品码】</font>&nbsp;&nbsp;{{list.goodsName}}
									</a>
								{{# }else{ }}
									<a href="{{list.link}}?intcmp=cartproduct" target="_blank">
										{{list.goodsName}}
									</a>
								{{# } }}
							</td>
							<td>
								<div class="goodsSpec">{{list.goods_color}}</div>
								<div class="goodsSpec">尺码：{{list.goods_size}}</div>
							</td>
							<td>
								<div class="cartMarketPrice">¥{{# var tmp_salePrice=Number(list.salePrice).toFixed(2)}}{{tmp_salePrice}}</div>
								<div><del>¥ {{# var tmp_marketPrice=Number(list.marketPrice).toFixed(2)}}{{tmp_marketPrice}}</del></div>
							</td>
							<td>
								{{# if (list.extend.type == 4) { }}
									<div class="quantity">
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
									</div>
								{{# }else if (list.extend.type == 3){ }}
									<!--2012-07-13康加上虚拟商品购物-->
									<div class="quantity">
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}_{{list.extend.type}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',1,1);return false;">+</a>
									</div>
								{{# }else if (list.extend.type == 5){ }}
									<div class="quantity_num">{{list.goodsAmount}}</div>
								{{# }else{ }}
									<div class="quantity">
										<a href="javascript:void(0);" class="reduce sprite icon_reduce" onclick="general_cart.update('{{list.postID}}',-1,1);return false;">-</a>
										<input type="text" id="buy_{{list.postID}}" name="buy_quantity" class="input_quantity" value="{{list.goodsAmount}}" />
										<a href="javascript:void(0);" class="subjoin sprite icon_subjoin" onclick="general_cart.update('{{list.postID}}',1,1);return false;">+</a>
									</div>
								{{# } }}
								{{# if(list.goodsStock <= 2) { }}
									<div class="stock-warnning">库存紧张</div>
								{{# } }}
							</td>
							<td class="goodsDiscount">
								<div>
									{{# var goodsDiscountAmount = Number(list.salePrice-list.specPrice).toFixed(2)}}
									¥{{goodsDiscountAmount}}
								</div>
							</td>
							<td>
								{{# var specPriceAmount=Number(list.specPrice*list.goodsAmount).toFixed(2)}}
								<div class="goodsPrice">¥ {{specPriceAmount}}</div>
							</td>
							<td class="cart-goods-operation">
								<div class="relative">
									<a href="javascript:void(0);" class="line" onclick="delete_pop(this,'您确认不购买该商品？');">删除</a>
									<div class="absolute hide" >
										<p></p>
										<a onclick="general_cart.update('{{list.postID}}_{{list.extend.type}}',-{{list.goodsAmount}},0);addOmniture('{{list.product_code}}');" href="javascript:void(0);" class="cart-goods-confirm">确认</a>
										<a onclick="cancal_delete_pop();" href="javascript:void(0);" class="cart-goods-cancel">取消</a>
									</div>
								</div>
							</td>
						</tr>
					{{# } }}
				{{#  }) }}
			</tbody>
		{{# } }}
	</table>

	{{# if(d.isSplit > 1) { }}
		<div style="height:38px;line-height:38px;background-color:#f0ddc0;margin-top:12px;">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<!--如果有预售商品必须拆单-->
			{{# if(d.preSale > 0) { }}
				<span>
					<input type="radio" name="split_order" value="1" checked style="vertical-align:middle;">
					<span>
						<span style="font-size:14px;color:#EE2737;font-weight:bold;display:inline-block;vertical-align:middle;">【拆单】</span>
						<span style="font-size:14px;color:black;font-weight:bold;display:inline-block;vertical-align:middle;">常规商品优先发货</span>
					</span>
				</span>
			{{# }else{ }}
				<span>
					<input type="radio" name="split_order" value="1" style="vertical-align:middle;">
					<span>
						<span style="font-size:14px;color:#EE2737;font-weight:bold;display:inline-block;vertical-align:middle;">【拆单】</span>
						<span style="font-size:14px;color:black;font-weight:bold;display:inline-block;vertical-align:middle;">常规商品优先发货</span>
					</span>
				</span>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<span>
					<input type="radio" name="split_order" value="2" checked="checked" style="vertical-align:middle;">
					<span>
						<span style="font-size:14px;color:#EE2737;font-weight:bold;display:inline-block;vertical-align:middle;">【不拆单】</span>
						<span style="font-size:14px;color:black;font-weight:bold;display:inline-block;vertical-align:middle;">所有商品到货后整单发货</span>
					</span>
				</span>
			{{# } }}
		</div>
	{{# } }}

    <div id="goodsgift_code">
        <div class="g-c-icon">
            <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u463.png" width="100%">
        </div>
        <span class="g-c-name">礼品码</span>
        <div class="g-c-content">
            {{# if(d.useGiftCode == 1) { }}
                <input type="text" type="text" name="giftCode" id="giftCode" maxlength="200" disabled>
                <span class="g-c-unuse">已使用</span>
            {{# }else{ }}
                <input type="text" name="giftCode" id="giftCode" maxlength="200" onfocus="giftCart.giftCodeFocus();" onblur="giftCart.giftCodeBlur();" value="请输入礼品码">
                <span onclick="giftCart.giftCodeUse();" class="g-c-use">使用</span>
                <div class="g-c-click">
                    <img src="https://cdns.lining.com/shop/lining/theme/xth2/images/cart/v1612/u11.png" width="15px" height="8px">
                </div>
            {{# } }}
        </div>
        <a class="g-c-link" style="text-decoration: underline;" href="https://store.lining.com/shop/memberCenter.html?operFlg=5&flg=4" target="_blank">点击查看我的礼品码</a>
    </div>
    <div id="goodsgift_layer">
        {{# if(d.getUnusedGiftCode && jsonLength(d.getUnusedGiftCode) > 0) { }}
	        <ul>
	            {{# layui.each(d.getUnusedGiftCode , function(k, giftcode){ }}
	            	<li title="{{giftcode.giftcodeName}}" name="{{giftcode.code}}" pcode="{{giftcode.product_code}}">{{giftcode.giftcodeName}}</li>
	            {{# }) }}
	        </ul>
        {{# }else{ }}
            <div style="text-align:center;height:60px;line-height:60px;color:#F05133;font-size: 13px;">没有可用的礼品码</div>
        {{# } }}
    </div>
</div>

</script>

<!--omniture 统计-->
<script language="JavaScript" type="text/javascript">

//删除商品时触发
function addOmniture(product_code) {
	var s=s_gi('lining-prd'); 
	s.linkTrackVars='products,events'; 
	s.linkTrackEvents='scRemove'; 
	s.products=';'+product_code; 
	s.events='scRemove'; 
	s.tl(this,'o','删除商品'); 
}
</script>
</body>
</html>
